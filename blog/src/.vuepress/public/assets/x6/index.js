!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).X6={})}(this,(function(t){"use strict";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},e(t,n)};function n(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};function i(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function o(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function s(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}"object"==typeof window&&window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((t=>{Object.prototype.hasOwnProperty.call(t,"append")||Object.defineProperty(t,"append",{configurable:!0,enumerable:!0,writable:!0,value(...t){const e=document.createDocumentFragment();t.forEach((t=>{const n=t instanceof Node;e.appendChild(n?t:document.createTextNode(String(t)))})),this.appendChild(e)}})}));class a{get disposed(){return!0===this._disposed}dispose(){this._disposed=!0}}!function(t){t.dispose=function(){return(t,e,n)=>{const r=n.value,i=t.__proto__;n.value=function(){this.disposed||(r.call(this),i.dispose.call(this))}}}}(a||(a={}));class l{constructor(){this.isDisposed=!1,this.items=new Set}get disposed(){return this.isDisposed}dispose(){this.isDisposed||(this.isDisposed=!0,this.items.forEach((t=>{t.dispose()})),this.items.clear())}contains(t){return this.items.has(t)}add(t){this.items.add(t)}remove(t){this.items.delete(t)}clear(){this.items.clear()}}!function(t){t.from=function(e){const n=new t;return e.forEach((t=>{n.add(t)})),n}}(l||(l={}));var u="object"==typeof global&&global&&global.Object===Object&&global,c="object"==typeof self&&self&&self.Object===Object&&self,h=u||c||Function("return this")(),p=h.Symbol,f=Object.prototype,d=f.hasOwnProperty,g=f.toString,y=p?p.toStringTag:void 0;var v=Object.prototype.toString;var m=p?p.toStringTag:void 0;function b(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":m&&m in Object(t)?function(t){var e=d.call(t,y),n=t[y];try{t[y]=void 0;var r=!0}catch(t){}var i=g.call(t);return r&&(e?t[y]=n:delete t[y]),i}(t):function(t){return v.call(t)}(t)}function w(t){return null!=t&&"object"==typeof t}function x(t){return"symbol"==typeof t||w(t)&&"[object Symbol]"==b(t)}function P(t){return"number"==typeof t?t:x(t)?NaN:+t}function A(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var C=Array.isArray,E=p?p.prototype:void 0,M=E?E.toString:void 0;function S(t){if("string"==typeof t)return t;if(C(t))return A(t,S)+"";if(x(t))return M?M.call(t):"";var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}function T(t,e){return function(n,r){var i;if(void 0===n&&void 0===r)return e;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=S(n),r=S(r)):(n=P(n),r=P(r)),i=t(n,r)}return i}}var k=T((function(t,e){return t+e}),0),O=/\s/;function N(t){for(var e=t.length;e--&&O.test(t.charAt(e)););return e}var _=/^\s+/;function L(t){return t?t.slice(0,N(t)+1).replace(_,""):t}function B(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var I=/^[-+]0x[0-9a-f]+$/i,j=/^0b[01]+$/i,V=/^0o[0-7]+$/i,D=parseInt;function R(t){if("number"==typeof t)return t;if(x(t))return NaN;if(B(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=B(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=L(t);var n=j.test(t);return n||V.test(t)?D(t.slice(2),n?2:8):I.test(t)?NaN:+t}var z=1/0;function F(t){return t?(t=R(t))===z||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function G(t){var e=F(t),n=e%1;return e==e?n?e-n:e:0}function U(t){return t}function q(t){if(!B(t))return!1;var e=b(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var W,H=h["__core-js_shared__"],$=(W=/[^.]+$/.exec(H&&H.keys&&H.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"";var J=Function.prototype.toString;function X(t){if(null!=t){try{return J.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var Y=/^\[object .+?Constructor\]$/,Z=Function.prototype,K=Object.prototype,Q=Z.toString,tt=K.hasOwnProperty,et=RegExp("^"+Q.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function nt(t){return!(!B(t)||function(t){return!!$&&$ in t}(t))&&(q(t)?et:Y).test(X(t))}function rt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return nt(n)?n:void 0}var it=rt(h,"WeakMap"),ot=it&&new it,st=ot?function(t,e){return ot.set(t,e),t}:U,at=Object.create,lt=function(){function t(){}return function(e){if(!B(e))return{};if(at)return at(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function ut(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=lt(t.prototype),r=t.apply(n,e);return B(r)?r:n}}function ct(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var ht=Math.max;function pt(t,e,n,r){for(var i=-1,o=t.length,s=n.length,a=-1,l=e.length,u=ht(o-s,0),c=Array(l+u),h=!r;++a<l;)c[a]=e[a];for(;++i<s;)(h||i<o)&&(c[n[i]]=t[i]);for(;u--;)c[a++]=t[i++];return c}var ft=Math.max;function dt(t,e,n,r){for(var i=-1,o=t.length,s=-1,a=n.length,l=-1,u=e.length,c=ft(o-a,0),h=Array(c+u),p=!r;++i<c;)h[i]=t[i];for(var f=i;++l<u;)h[f+l]=e[l];for(;++s<a;)(p||i<o)&&(h[f+n[s]]=t[i++]);return h}function gt(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}function yt(){}function vt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function mt(){}vt.prototype=lt(yt.prototype),vt.prototype.constructor=vt;var bt=ot?function(t){return ot.get(t)}:mt,wt={},xt=Object.prototype.hasOwnProperty;function Pt(t){for(var e=t.name+"",n=wt[e],r=xt.call(wt,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function At(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function Ct(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function Et(t){if(t instanceof vt)return t.clone();var e=new At(t.__wrapped__,t.__chain__);return e.__actions__=Ct(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}At.prototype=lt(yt.prototype),At.prototype.constructor=At;var Mt=Object.prototype.hasOwnProperty;function St(t){if(w(t)&&!C(t)&&!(t instanceof vt)){if(t instanceof At)return t;if(Mt.call(t,"__wrapped__"))return Et(t)}return new At(t)}function Tt(t){var e=Pt(t),n=St[e];if("function"!=typeof n||!(e in vt.prototype))return!1;if(t===n)return!0;var r=bt(n);return!!r&&t===r[0]}St.prototype=yt.prototype,St.prototype.constructor=St;var kt=Date.now;function Ot(t){var e=0,n=0;return function(){var r=kt(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Nt=Ot(st),_t=/\{\n\/\* \[wrapped with (.+)\] \*/,Lt=/,? & /;var Bt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function It(t){return function(){return t}}var jt=function(){try{var t=rt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Vt=jt?function(t,e){return jt(t,"toString",{configurable:!0,enumerable:!1,value:It(e),writable:!0})}:U,Dt=Ot(Vt);function Rt(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function zt(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Ft(t){return t!=t}function Gt(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):zt(t,Ft,n)}function Ut(t,e){return!!(null==t?0:t.length)&&Gt(t,e,0)>-1}var qt=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];function Wt(t,e,n){var r=e+"";return Dt(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Bt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Rt(qt,(function(n){var r="_."+n[0];e&n[1]&&!Ut(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(_t);return e?e[1].split(Lt):[]}(r),n)))}function Ht(t,e,n,r,i,o,s,a,l,u){var c=8&e;e|=c?32:64,4&(e&=~(c?64:32))||(e&=-4);var h=[t,e,i,c?o:void 0,c?s:void 0,c?void 0:o,c?void 0:s,a,l,u],p=n.apply(void 0,h);return Tt(t)&&Nt(p,h),p.placeholder=r,Wt(p,t,e)}function $t(t){return t.placeholder}var Jt=/^(?:0|[1-9]\d*)$/;function Xt(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Jt.test(t))&&t>-1&&t%1==0&&t<e}var Yt=Math.min;function Zt(t,e){for(var n=t.length,r=Yt(e.length,n),i=Ct(t);r--;){var o=e[r];t[r]=Xt(o,n)?i[o]:void 0}return t}var Kt="__lodash_placeholder__";function Qt(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==Kt||(t[n]=Kt,o[i++]=n)}return o}function te(t,e,n,r,i,o,s,a,l,u){var c=128&e,p=1&e,f=2&e,d=24&e,g=512&e,y=f?void 0:ut(t);return function v(){for(var m=arguments.length,b=Array(m),w=m;w--;)b[w]=arguments[w];if(d)var x=$t(v),P=gt(b,x);if(r&&(b=pt(b,r,i,d)),o&&(b=dt(b,o,s,d)),m-=P,d&&m<u){var A=Qt(b,x);return Ht(t,e,te,v.placeholder,n,b,A,a,l,u-m)}var C=p?n:this,E=f?C[t]:t;return m=b.length,a?b=Zt(b,a):g&&m>1&&b.reverse(),c&&l<m&&(b.length=l),this&&this!==h&&this instanceof v&&(E=y||ut(E)),E.apply(C,b)}}var ee="__lodash_placeholder__",ne=128,re=Math.min;var ie=Math.max;function oe(t,e,n,r,i,o,s,a){var l=2&e;if(!l&&"function"!=typeof t)throw new TypeError("Expected a function");var u=r?r.length:0;if(u||(e&=-97,r=i=void 0),s=void 0===s?s:ie(G(s),0),a=void 0===a?a:G(a),u-=i?i.length:0,64&e){var c=r,p=i;r=i=void 0}var f=l?void 0:bt(t),d=[t,e,n,r,i,c,p,o,s,a];if(f&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,s=r==ne&&8==n||r==ne&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var a=e[3];if(a){var l=t[3];t[3]=l?pt(l,a,e[4]):a,t[4]=l?Qt(t[3],ee):e[4]}(a=e[5])&&(l=t[5],t[5]=l?dt(l,a,e[6]):a,t[6]=l?Qt(t[5],ee):e[6]),(a=e[7])&&(t[7]=a),r&ne&&(t[8]=null==t[8]?e[8]:re(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(d,f),t=d[0],e=d[1],n=d[2],r=d[3],i=d[4],!(a=d[9]=void 0===d[9]?l?0:t.length:ie(d[9]-u,0))&&24&e&&(e&=-25),e&&1!=e)g=8==e||16==e?function(t,e,n){var r=ut(t);return function i(){for(var o=arguments.length,s=Array(o),a=o,l=$t(i);a--;)s[a]=arguments[a];var u=o<3&&s[0]!==l&&s[o-1]!==l?[]:Qt(s,l);return(o-=u.length)<n?Ht(t,e,te,i.placeholder,void 0,s,u,void 0,void 0,n-o):ct(this&&this!==h&&this instanceof i?r:t,this,s)}}(t,e,a):32!=e&&33!=e||i.length?te.apply(void 0,d):function(t,e,n,r){var i=1&e,o=ut(t);return function e(){for(var s=-1,a=arguments.length,l=-1,u=r.length,c=Array(u+a),p=this&&this!==h&&this instanceof e?o:t;++l<u;)c[l]=r[l];for(;a--;)c[l++]=arguments[++s];return ct(p,i?n:this,c)}}(t,e,n,r);else var g=function(t,e,n){var r=1&e,i=ut(t);return function e(){return(this&&this!==h&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Wt((f?st:Nt)(g,d),t,e)}function se(t,e,n){return e=n?void 0:e,oe(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function ae(t,e,n){"__proto__"==e&&jt?jt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function le(t,e){return t===e||t!=t&&e!=e}var ue=Object.prototype.hasOwnProperty;function ce(t,e,n){var r=t[e];ue.call(t,e)&&le(r,n)&&(void 0!==n||e in t)||ae(t,e,n)}function he(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=r?r(n[a],t[a],a,n,t):void 0;void 0===l&&(l=t[a]),i?ae(n,a,l):ce(n,a,l)}return n}var pe=Math.max;function fe(t,e,n){return e=pe(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=pe(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),ct(t,this,a)}}function de(t,e){return Dt(fe(t,e,U),t+"")}function ge(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function ye(t){return null!=t&&ge(t.length)&&!q(t)}function ve(t,e,n){if(!B(n))return!1;var r=typeof e;return!!("number"==r?ye(n)&&Xt(e,n.length):"string"==r&&e in n)&&le(n[e],t)}function me(t){return de((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,s&&ve(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,o)}return e}))}var be=Object.prototype;function we(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||be)}function xe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Pe(t){return w(t)&&"[object Arguments]"==b(t)}var Ae=Object.prototype,Ce=Ae.hasOwnProperty,Ee=Ae.propertyIsEnumerable,Me=Pe(function(){return arguments}())?Pe:function(t){return w(t)&&Ce.call(t,"callee")&&!Ee.call(t,"callee")};function Se(){return!1}var Te="object"==typeof t&&t&&!t.nodeType&&t,ke=Te&&"object"==typeof module&&module&&!module.nodeType&&module,Oe=ke&&ke.exports===Te?h.Buffer:void 0,Ne=(Oe?Oe.isBuffer:void 0)||Se,_e={};function Le(t){return function(e){return t(e)}}_e["[object Float32Array]"]=_e["[object Float64Array]"]=_e["[object Int8Array]"]=_e["[object Int16Array]"]=_e["[object Int32Array]"]=_e["[object Uint8Array]"]=_e["[object Uint8ClampedArray]"]=_e["[object Uint16Array]"]=_e["[object Uint32Array]"]=!0,_e["[object Arguments]"]=_e["[object Array]"]=_e["[object ArrayBuffer]"]=_e["[object Boolean]"]=_e["[object DataView]"]=_e["[object Date]"]=_e["[object Error]"]=_e["[object Function]"]=_e["[object Map]"]=_e["[object Number]"]=_e["[object Object]"]=_e["[object RegExp]"]=_e["[object Set]"]=_e["[object String]"]=_e["[object WeakMap]"]=!1;var Be="object"==typeof t&&t&&!t.nodeType&&t,Ie=Be&&"object"==typeof module&&module&&!module.nodeType&&module,je=Ie&&Ie.exports===Be&&u.process,Ve=function(){try{var t=Ie&&Ie.require&&Ie.require("util").types;return t||je&&je.binding&&je.binding("util")}catch(t){}}(),De=Ve&&Ve.isTypedArray,Re=De?Le(De):function(t){return w(t)&&ge(t.length)&&!!_e[b(t)]},ze=Object.prototype.hasOwnProperty;function Fe(t,e){var n=C(t),r=!n&&Me(t),i=!n&&!r&&Ne(t),o=!n&&!r&&!i&&Re(t),s=n||r||i||o,a=s?xe(t.length,String):[],l=a.length;for(var u in t)!e&&!ze.call(t,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Xt(u,l))||a.push(u);return a}function Ge(t,e){return function(n){return t(e(n))}}var Ue=Ge(Object.keys,Object),qe=Object.prototype.hasOwnProperty;function We(t){if(!we(t))return Ue(t);var e=[];for(var n in Object(t))qe.call(t,n)&&"constructor"!=n&&e.push(n);return e}function He(t){return ye(t)?Fe(t):We(t)}var $e=Object.prototype.hasOwnProperty,Je=me((function(t,e){if(we(e)||ye(e))he(e,He(e),t);else for(var n in e)$e.call(e,n)&&ce(t,n,e[n])}));var Xe=Object.prototype.hasOwnProperty;function Ye(t){if(!B(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=we(t),n=[];for(var r in t)("constructor"!=r||!e&&Xe.call(t,r))&&n.push(r);return n}function Ze(t){return ye(t)?Fe(t,!0):Ye(t)}var Ke=me((function(t,e){he(e,Ze(e),t)})),Qe=me((function(t,e,n,r){he(e,Ze(e),t,r)})),tn=me((function(t,e,n,r){he(e,He(e),t,r)})),en=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nn=/^\w*$/;function rn(t,e){if(C(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!x(t))||(nn.test(t)||!en.test(t)||null!=e&&t in Object(e))}var on=rt(Object,"create");var sn=Object.prototype.hasOwnProperty;var an=Object.prototype.hasOwnProperty;function ln(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function un(t,e){for(var n=t.length;n--;)if(le(t[n][0],e))return n;return-1}ln.prototype.clear=function(){this.__data__=on?on(null):{},this.size=0},ln.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ln.prototype.get=function(t){var e=this.__data__;if(on){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return sn.call(e,t)?e[t]:void 0},ln.prototype.has=function(t){var e=this.__data__;return on?void 0!==e[t]:an.call(e,t)},ln.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=on&&void 0===e?"__lodash_hash_undefined__":e,this};var cn=Array.prototype.splice;function hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}hn.prototype.clear=function(){this.__data__=[],this.size=0},hn.prototype.delete=function(t){var e=this.__data__,n=un(e,t);return!(n<0)&&(n==e.length-1?e.pop():cn.call(e,n,1),--this.size,!0)},hn.prototype.get=function(t){var e=this.__data__,n=un(e,t);return n<0?void 0:e[n][1]},hn.prototype.has=function(t){return un(this.__data__,t)>-1},hn.prototype.set=function(t,e){var n=this.__data__,r=un(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var pn=rt(h,"Map");function fn(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function dn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}dn.prototype.clear=function(){this.size=0,this.__data__={hash:new ln,map:new(pn||hn),string:new ln}},dn.prototype.delete=function(t){var e=fn(this,t).delete(t);return this.size-=e?1:0,e},dn.prototype.get=function(t){return fn(this,t).get(t)},dn.prototype.has=function(t){return fn(this,t).has(t)},dn.prototype.set=function(t,e){var n=fn(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function gn(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(gn.Cache||dn),n}gn.Cache=dn;var yn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vn=/\\(\\)?/g,mn=function(t){var e=gn(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(yn,(function(t,n,r,i){e.push(r?i.replace(vn,"$1"):n||t)})),e}));function bn(t){return null==t?"":S(t)}function wn(t,e){return C(t)?t:rn(t,e)?[t]:mn(bn(t))}function xn(t){if("string"==typeof t||x(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}function Pn(t,e){for(var n=0,r=(e=wn(e,t)).length;null!=t&&n<r;)t=t[xn(e[n++])];return n&&n==r?t:void 0}function An(t,e,n){var r=null==t?void 0:Pn(t,e);return void 0===r?n:r}function Cn(t,e){for(var n=-1,r=e.length,i=Array(r),o=null==t;++n<r;)i[n]=o?void 0:An(t,e[n]);return i}function En(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Mn=p?p.isConcatSpreadable:void 0;function Sn(t){return C(t)||Me(t)||!!(Mn&&t&&t[Mn])}function Tn(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=Sn),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?Tn(a,e-1,n,r,i):En(i,a):r||(i[i.length]=a)}return i}function kn(t){return(null==t?0:t.length)?Tn(t,1):[]}function On(t){return Dt(fe(t,void 0,kn),t+"")}var Nn=On(Cn),_n=Ge(Object.getPrototypeOf,Object),Ln=Function.prototype,Bn=Object.prototype,In=Ln.toString,jn=Bn.hasOwnProperty,Vn=In.call(Object);function Dn(t){if(!w(t)||"[object Object]"!=b(t))return!1;var e=_n(t);if(null===e)return!0;var n=jn.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&In.call(n)==Vn}function Rn(t){if(!w(t))return!1;var e=b(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Dn(t)}var zn=de((function(t,e){try{return ct(t,void 0,e)}catch(t){return Rn(t)?t:new Error(t)}}));function Fn(t,e){var n;if("function"!=typeof e)throw new TypeError("Expected a function");return t=G(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var Gn=de((function(t,e,n){var r=1;if(n.length){var i=Qt(n,$t(Gn));r|=32}return oe(t,r,e,n,i)}));Gn.placeholder={};var Un=On((function(t,e){return Rt(e,(function(e){e=xn(e),ae(t,e,Gn(t[e],t))})),t})),qn=de((function(t,e,n){var r=3;if(n.length){var i=Qt(n,$t(qn));r|=32}return oe(e,r,t,n,i)}));function Wn(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}function Hn(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:Wn(t,e,n)}qn.placeholder={};var $n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Jn(t){return $n.test(t)}var Xn="\\ud800-\\udfff",Yn="["+Xn+"]",Zn="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Kn="\\ud83c[\\udffb-\\udfff]",Qn="[^"+Xn+"]",tr="(?:\\ud83c[\\udde6-\\uddff]){2}",er="[\\ud800-\\udbff][\\udc00-\\udfff]",nr="(?:"+Zn+"|"+Kn+")"+"?",rr="[\\ufe0e\\ufe0f]?",ir=rr+nr+("(?:\\u200d(?:"+[Qn,tr,er].join("|")+")"+rr+nr+")*"),or="(?:"+[Qn+Zn+"?",Zn,tr,er,Yn].join("|")+")",sr=RegExp(Kn+"(?="+Kn+")|"+or+ir,"g");function ar(t){return Jn(t)?function(t){return t.match(sr)||[]}(t):function(t){return t.split("")}(t)}function lr(t){return function(e){var n=Jn(e=bn(e))?ar(e):void 0,r=n?n[0]:e.charAt(0),i=n?Hn(n,1).join(""):e.slice(1);return r[t]()+i}}var ur=lr("toUpperCase");function cr(t){return ur(bn(t).toLowerCase())}function hr(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function pr(t){return function(e){return null==t?void 0:t[e]}}var fr=pr({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),dr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gr=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");function yr(t){return(t=bn(t))&&t.replace(dr,fr).replace(gr,"")}var vr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var mr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var br="\\ud800-\\udfff",wr="\\u2700-\\u27bf",xr="a-z\\xdf-\\xf6\\xf8-\\xff",Pr="A-Z\\xc0-\\xd6\\xd8-\\xde",Ar="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Cr="["+Ar+"]",Er="\\d+",Mr="["+wr+"]",Sr="["+xr+"]",Tr="[^"+br+Ar+Er+wr+xr+Pr+"]",kr="(?:\\ud83c[\\udde6-\\uddff]){2}",Or="[\\ud800-\\udbff][\\udc00-\\udfff]",Nr="["+Pr+"]",_r="(?:"+Sr+"|"+Tr+")",Lr="(?:"+Nr+"|"+Tr+")",Br="(?:['’](?:d|ll|m|re|s|t|ve))?",Ir="(?:['’](?:D|LL|M|RE|S|T|VE))?",jr="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Vr="[\\ufe0e\\ufe0f]?",Dr=Vr+jr+("(?:\\u200d(?:"+["[^"+br+"]",kr,Or].join("|")+")"+Vr+jr+")*"),Rr="(?:"+[Mr,kr,Or].join("|")+")"+Dr,zr=RegExp([Nr+"?"+Sr+"+"+Br+"(?="+[Cr,Nr,"$"].join("|")+")",Lr+"+"+Ir+"(?="+[Cr,Nr+_r,"$"].join("|")+")",Nr+"?"+_r+"+"+Br,Nr+"+"+Ir,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Er,Rr].join("|"),"g");function Fr(t,e,n){return t=bn(t),void 0===(e=n?void 0:e)?function(t){return mr.test(t)}(t)?function(t){return t.match(zr)||[]}(t):function(t){return t.match(vr)||[]}(t):t.match(e)||[]}var Gr=RegExp("['’]","g");function Ur(t){return function(e){return hr(Fr(yr(e).replace(Gr,"")),t,"")}}var qr=Ur((function(t,e,n){return e=e.toLowerCase(),t+(n?cr(e):e)}));var Wr=h.isFinite,Hr=Math.min;function $r(t){var e=Math[t];return function(t,n){if(t=R(t),(n=null==n?0:Hr(G(n),292))&&Wr(t)){var r=(bn(t)+"e").split("e");return+((r=(bn(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Jr=$r("ceil");function Xr(t){var e=St(t);return e.__chain__=!0,e}var Yr=Math.ceil,Zr=Math.max;function Kr(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}function Qr(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=R(n))==n?n:0),void 0!==e&&(e=(e=R(e))==e?e:0),Kr(R(t),e,n)}function ti(t){var e=this.__data__=new hn(t);this.size=e.size}function ei(t,e){return t&&he(e,He(e),t)}ti.prototype.clear=function(){this.__data__=new hn,this.size=0},ti.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},ti.prototype.get=function(t){return this.__data__.get(t)},ti.prototype.has=function(t){return this.__data__.has(t)},ti.prototype.set=function(t,e){var n=this.__data__;if(n instanceof hn){var r=n.__data__;if(!pn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new dn(r)}return n.set(t,e),this.size=n.size,this};var ni="object"==typeof t&&t&&!t.nodeType&&t,ri=ni&&"object"==typeof module&&module&&!module.nodeType&&module,ii=ri&&ri.exports===ni?h.Buffer:void 0,oi=ii?ii.allocUnsafe:void 0;function si(t,e){if(e)return t.slice();var n=t.length,r=oi?oi(n):new t.constructor(n);return t.copy(r),r}function ai(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function li(){return[]}var ui=Object.prototype.propertyIsEnumerable,ci=Object.getOwnPropertySymbols,hi=ci?function(t){return null==t?[]:(t=Object(t),ai(ci(t),(function(e){return ui.call(t,e)})))}:li;var pi=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)En(e,hi(t)),t=_n(t);return e}:li;function fi(t,e,n){var r=e(t);return C(t)?r:En(r,n(t))}function di(t){return fi(t,He,hi)}function gi(t){return fi(t,Ze,pi)}var yi=rt(h,"DataView"),vi=rt(h,"Promise"),mi=rt(h,"Set"),bi="[object Map]",wi="[object Promise]",xi="[object Set]",Pi="[object WeakMap]",Ai="[object DataView]",Ci=X(yi),Ei=X(pn),Mi=X(vi),Si=X(mi),Ti=X(it),ki=b;(yi&&ki(new yi(new ArrayBuffer(1)))!=Ai||pn&&ki(new pn)!=bi||vi&&ki(vi.resolve())!=wi||mi&&ki(new mi)!=xi||it&&ki(new it)!=Pi)&&(ki=function(t){var e=b(t),n="[object Object]"==e?t.constructor:void 0,r=n?X(n):"";if(r)switch(r){case Ci:return Ai;case Ei:return bi;case Mi:return wi;case Si:return xi;case Ti:return Pi}return e});var Oi=ki,Ni=Object.prototype.hasOwnProperty;var _i=h.Uint8Array;function Li(t){var e=new t.constructor(t.byteLength);return new _i(e).set(new _i(t)),e}var Bi=/\w*$/;var Ii=p?p.prototype:void 0,ji=Ii?Ii.valueOf:void 0;function Vi(t,e){var n=e?Li(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Di(t,e,n){var r,i=t.constructor;switch(e){case"[object ArrayBuffer]":return Li(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":return function(t,e){var n=e?Li(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Vi(t,n);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return function(t){var e=new t.constructor(t.source,Bi.exec(t));return e.lastIndex=t.lastIndex,e}(t);case"[object Symbol]":return r=t,ji?Object(ji.call(r)):{}}}function Ri(t){return"function"!=typeof t.constructor||we(t)?{}:lt(_n(t))}var zi=Ve&&Ve.isMap,Fi=zi?Le(zi):function(t){return w(t)&&"[object Map]"==Oi(t)};var Gi=Ve&&Ve.isSet,Ui=Gi?Le(Gi):function(t){return w(t)&&"[object Set]"==Oi(t)},qi="[object Arguments]",Wi="[object Function]",Hi="[object Object]",$i={};function Ji(t,e,n,r,i,o){var s,a=1&e,l=2&e,u=4&e;if(n&&(s=i?n(t,r,i,o):n(t)),void 0!==s)return s;if(!B(t))return t;var c=C(t);if(c){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ni.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!a)return Ct(t,s)}else{var h=Oi(t),p=h==Wi||"[object GeneratorFunction]"==h;if(Ne(t))return si(t,a);if(h==Hi||h==qi||p&&!i){if(s=l||p?{}:Ri(t),!a)return l?function(t,e){return he(t,pi(t),e)}(t,function(t,e){return t&&he(e,Ze(e),t)}(s,t)):function(t,e){return he(t,hi(t),e)}(t,ei(s,t))}else{if(!$i[h])return i?t:{};s=Di(t,h,a)}}o||(o=new ti);var f=o.get(t);if(f)return f;o.set(t,s),Ui(t)?t.forEach((function(r){s.add(Ji(r,e,n,r,t,o))})):Fi(t)&&t.forEach((function(r,i){s.set(i,Ji(r,e,n,i,t,o))}));var d=c?void 0:(u?l?gi:di:l?Ze:He)(t);return Rt(d||t,(function(r,i){d&&(r=t[i=r]),ce(s,i,Ji(r,e,n,i,t,o))})),s}$i[qi]=$i["[object Array]"]=$i["[object ArrayBuffer]"]=$i["[object DataView]"]=$i["[object Boolean]"]=$i["[object Date]"]=$i["[object Float32Array]"]=$i["[object Float64Array]"]=$i["[object Int8Array]"]=$i["[object Int16Array]"]=$i["[object Int32Array]"]=$i["[object Map]"]=$i["[object Number]"]=$i[Hi]=$i["[object RegExp]"]=$i["[object Set]"]=$i["[object String]"]=$i["[object Symbol]"]=$i["[object Uint8Array]"]=$i["[object Uint8ClampedArray]"]=$i["[object Uint16Array]"]=$i["[object Uint32Array]"]=!0,$i["[object Error]"]=$i[Wi]=$i["[object WeakMap]"]=!1;function Xi(t){return Ji(t,4)}function Yi(t){return Ji(t,5)}function Zi(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new dn;++e<n;)this.add(t[e])}function Ki(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function Qi(t,e){return t.has(e)}Zi.prototype.add=Zi.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Zi.prototype.has=function(t){return this.__data__.has(t)};function to(t,e,n,r,i,o){var s=1&n,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var h=-1,p=!0,f=2&n?new Zi:void 0;for(o.set(t,e),o.set(e,t);++h<a;){var d=t[h],g=e[h];if(r)var y=s?r(g,d,h,e,t,o):r(d,g,h,t,e,o);if(void 0!==y){if(y)continue;p=!1;break}if(f){if(!Ki(e,(function(t,e){if(!Qi(f,e)&&(d===t||i(d,t,n,r,o)))return f.push(e)}))){p=!1;break}}else if(d!==g&&!i(d,g,n,r,o)){p=!1;break}}return o.delete(t),o.delete(e),p}function eo(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function no(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var ro=p?p.prototype:void 0,io=ro?ro.valueOf:void 0;var oo=Object.prototype.hasOwnProperty;var so="[object Arguments]",ao="[object Array]",lo="[object Object]",uo=Object.prototype.hasOwnProperty;function co(t,e,n,r,i,o){var s=C(t),a=C(e),l=s?ao:Oi(t),u=a?ao:Oi(e),c=(l=l==so?lo:l)==lo,h=(u=u==so?lo:u)==lo,p=l==u;if(p&&Ne(t)){if(!Ne(e))return!1;s=!0,c=!1}if(p&&!c)return o||(o=new ti),s||Re(t)?to(t,e,n,r,i,o):function(t,e,n,r,i,o,s){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new _i(t),new _i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return le(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=eo;case"[object Set]":var l=1&r;if(a||(a=no),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;r|=2,s.set(t,e);var c=to(a(t),a(e),r,i,o,s);return s.delete(t),c;case"[object Symbol]":if(io)return io.call(t)==io.call(e)}return!1}(t,e,l,n,r,i,o);if(!(1&n)){var f=c&&uo.call(t,"__wrapped__"),d=h&&uo.call(e,"__wrapped__");if(f||d){var g=f?t.value():t,y=d?e.value():e;return o||(o=new ti),i(g,y,n,r,o)}}return!!p&&(o||(o=new ti),function(t,e,n,r,i,o){var s=1&n,a=di(t),l=a.length;if(l!=di(e).length&&!s)return!1;for(var u=l;u--;){var c=a[u];if(!(s?c in e:oo.call(e,c)))return!1}var h=o.get(t),p=o.get(e);if(h&&p)return h==e&&p==t;var f=!0;o.set(t,e),o.set(e,t);for(var d=s;++u<l;){var g=t[c=a[u]],y=e[c];if(r)var v=s?r(y,g,c,e,t,o):r(g,y,c,t,e,o);if(!(void 0===v?g===y||i(g,y,n,r,o):v)){f=!1;break}d||(d="constructor"==c)}if(f&&!d){var m=t.constructor,b=e.constructor;m==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,r,i,o))}function ho(t,e,n,r,i){return t===e||(null==t||null==e||!w(t)&&!w(e)?t!=t&&e!=e:co(t,e,n,r,ho,i))}function po(t,e,n,r){var i=n.length,o=i,s=!r;if(null==t)return!o;for(t=Object(t);i--;){var a=n[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){var l=(a=n[i])[0],u=t[l],c=a[1];if(s&&a[2]){if(void 0===u&&!(l in t))return!1}else{var h=new ti;if(r)var p=r(u,c,l,t,e,h);if(!(void 0===p?ho(c,u,3,r,h):p))return!1}}return!0}function fo(t){return t==t&&!B(t)}function go(t){for(var e=He(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,fo(i)]}return e}function yo(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function vo(t){var e=go(t);return 1==e.length&&e[0][2]?yo(e[0][0],e[0][1]):function(n){return n===t||po(n,t,e)}}function mo(t,e){return null!=t&&e in Object(t)}function bo(t,e,n){for(var r=-1,i=(e=wn(e,t)).length,o=!1;++r<i;){var s=xn(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ge(i)&&Xt(s,i)&&(C(t)||Me(t))}function wo(t,e){return null!=t&&bo(t,e,mo)}function xo(t,e){return rn(t)&&fo(e)?yo(xn(t),e):function(n){var r=An(n,t);return void 0===r&&r===e?wo(n,t):ho(e,r,3)}}function Po(t){return function(e){return null==e?void 0:e[t]}}function Ao(t){return rn(t)?Po(xn(t)):function(t){return function(e){return Pn(e,t)}}(t)}function Co(t){return"function"==typeof t?t:null==t?U:"object"==typeof t?C(t)?xo(t[0],t[1]):vo(t):Ao(t)}function Eo(t,e,n){var r=n.length;if(null==t)return!r;for(t=Object(t);r--;){var i=n[r],o=e[i],s=t[i];if(void 0===s&&!(i in t)||!o(s))return!1}return!0}function Mo(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function So(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var l=s[t?a:++i];if(!1===n(o[l],l,o))break}return e}}var To=So();function ko(t,e){return t&&To(t,e,He)}function Oo(t,e){return function(n,r){if(null==n)return n;if(!ye(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Object(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}var No=Oo(ko);function _o(t,e,n,r){return No(t,(function(t,i,o){e(r,t,n(t),o)})),r}function Lo(t,e){return function(n,r){var i=C(n)?Mo:_o,o=e?e():{};return i(n,t,Co(r),o)}}var Bo=Object.prototype.hasOwnProperty,Io=Lo((function(t,e,n){Bo.call(t,n)?++t[n]:ae(t,n,1)}));function jo(t,e,n){var r=oe(t,8,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return r.placeholder=jo.placeholder,r}jo.placeholder={};function Vo(t,e,n){var r=oe(t,16,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return r.placeholder=Vo.placeholder,r}Vo.placeholder={};var Do=function(){return h.Date.now()},Ro=Math.max,zo=Math.min;function Fo(t,e,n){var r,i,o,s,a,l,u=0,c=!1,h=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var n=r,o=i;return r=i=void 0,u=e,s=t.apply(o,n)}function d(t){return u=t,a=setTimeout(y,e),c?f(t):s}function g(t){var n=t-l;return void 0===l||n>=e||n<0||h&&t-u>=o}function y(){var t=Do();if(g(t))return v(t);a=setTimeout(y,function(t){var n=e-(t-l);return h?zo(n,o-(t-u)):n}(t))}function v(t){return a=void 0,p&&r?f(t):(r=i=void 0,s)}function m(){var t=Do(),n=g(t);if(r=arguments,i=this,l=t,n){if(void 0===a)return d(l);if(h)return clearTimeout(a),a=setTimeout(y,e),f(l)}return void 0===a&&(a=setTimeout(y,e)),s}return e=R(e)||0,B(n)&&(c=!!n.leading,o=(h="maxWait"in n)?Ro(R(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),m.cancel=function(){void 0!==a&&clearTimeout(a),u=0,r=l=i=a=void 0},m.flush=function(){return void 0===a?s:v(Do())},m}var Go=Object.prototype,Uo=Go.hasOwnProperty,qo=de((function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&ve(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],s=Ze(o),a=-1,l=s.length;++a<l;){var u=s[a],c=t[u];(void 0===c||le(c,Go[u])&&!Uo.call(t,u))&&(t[u]=o[u])}return t}));function Wo(t,e,n){(void 0!==n&&!le(t[e],n)||void 0===n&&!(e in t))&&ae(t,e,n)}function Ho(t){return w(t)&&ye(t)}function $o(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function Jo(t){return he(t,Ze(t))}function Xo(t,e,n,r,i){t!==e&&To(e,(function(o,s){if(i||(i=new ti),B(o))!function(t,e,n,r,i,o,s){var a=$o(t,n),l=$o(e,n),u=s.get(l);if(u)Wo(t,n,u);else{var c=o?o(a,l,n+"",t,e,s):void 0,h=void 0===c;if(h){var p=C(l),f=!p&&Ne(l),d=!p&&!f&&Re(l);c=l,p||f||d?C(a)?c=a:Ho(a)?c=Ct(a):f?(h=!1,c=si(l,!0)):d?(h=!1,c=Vi(l,!0)):c=[]:Dn(l)||Me(l)?(c=a,Me(a)?c=Jo(a):B(a)&&!q(a)||(c=Ri(l))):h=!1}h&&(s.set(l,c),i(c,l,r,o,s),s.delete(l)),Wo(t,n,c)}}(t,e,s,n,Xo,r,i);else{var a=r?r($o(t,s),o,s+"",t,e,i):void 0;void 0===a&&(a=o),Wo(t,s,a)}}),Ze)}function Yo(t,e,n,r,i,o){return B(t)&&B(e)&&(o.set(e,t),Xo(t,e,void 0,Yo,o),o.delete(e)),t}var Zo=me((function(t,e,n,r){Xo(t,e,n,r)})),Ko=de((function(t){return t.push(void 0,Yo),ct(Zo,void 0,t)}));function Qo(t,e,n){if("function"!=typeof t)throw new TypeError("Expected a function");return setTimeout((function(){t.apply(void 0,n)}),e)}var ts=de((function(t,e){return Qo(t,1,e)})),es=de((function(t,e,n){return Qo(t,R(e)||0,n)}));function ns(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function rs(t,e,n,r){var i=-1,o=Ut,s=!0,a=t.length,l=[],u=e.length;if(!a)return l;n&&(e=A(e,Le(n))),r?(o=ns,s=!1):e.length>=200&&(o=Qi,s=!1,e=new Zi(e));t:for(;++i<a;){var c=t[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,s&&h==h){for(var p=u;p--;)if(e[p]===h)continue t;l.push(c)}else o(e,h,r)||l.push(c)}return l}var is=de((function(t,e){return Ho(t)?rs(t,Tn(e,1,Ho,!0)):[]}));function os(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var ss=de((function(t,e){var n=os(e);return Ho(n)&&(n=void 0),Ho(t)?rs(t,Tn(e,1,Ho,!0),Co(n)):[]})),as=de((function(t,e){var n=os(e);return Ho(n)&&(n=void 0),Ho(t)?rs(t,Tn(e,1,Ho,!0),void 0,n):[]})),ls=T((function(t,e){return t/e}),1);function us(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Wn(t,r?0:o,r?o+1:i):Wn(t,r?o+1:0,r?i:o)}function cs(t){return"function"==typeof t?t:U}function hs(t,e){return(C(t)?Rt:No)(t,cs(e))}function ps(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}var fs=So(!0);function ds(t,e){return t&&fs(t,e,He)}var gs=Oo(ds,!0);function ys(t,e){return(C(t)?ps:gs)(t,cs(e))}function vs(t){return function(e){var n=Oi(e);return"[object Map]"==n?eo(e):"[object Set]"==n?function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}(e):function(t,e){return A(e,(function(e){return[e,t[e]]}))}(e,t(e))}}var ms=vs(He),bs=vs(Ze),ws=pr({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),xs=/[&<>"']/g,Ps=RegExp(xs.source);function As(t){return(t=bn(t))&&Ps.test(t)?t.replace(xs,ws):t}var Cs=/[\\^$.*+?()[\]{}|]/g,Es=RegExp(Cs.source);function Ms(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ss(t,e){var n=!0;return No(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function Ts(t){return t?Kr(G(t),0,4294967295):0}function ks(t,e){var n=[];return No(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function Os(t){return function(e,n,r){var i=Object(e);if(!ye(e)){var o=Co(n);e=He(e),n=function(t){return o(i[t],t,i)}}var s=t(e,n,r);return s>-1?i[o?e[s]:s]:void 0}}var Ns=Math.max;function _s(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:G(n);return i<0&&(i=Ns(r+i,0)),zt(t,Co(e),i)}var Ls=Os(_s);function Bs(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}var Is=Math.max,js=Math.min;function Vs(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=G(n),i=n<0?Is(r+i,0):js(i,r-1)),zt(t,Co(e),i,!0)}var Ds=Os(Vs);function Rs(t){return t&&t.length?t[0]:void 0}function zs(t,e){var n=-1,r=ye(t)?Array(t.length):[];return No(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function Fs(t,e){return(C(t)?A:zs)(t,Co(e))}var Gs=$r("floor");function Us(t){return On((function(e){var n=e.length,r=n,i=At.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new TypeError("Expected a function");if(i&&!s&&"wrapper"==Pt(o))var s=new At([],!0)}for(r=s?r:n;++r<n;){var a=Pt(o=e[r]),l="wrapper"==a?bt(o):void 0;s=l&&Tt(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?s[Pt(l[0])].apply(s,l[3]):1==o.length&&Tt(o)?s[a]():s.thru(o)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&C(r))return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}var qs=Us(),Ws=Us(!0);function Hs(t,e){return ai(e,(function(e){return q(t[e])}))}var $s=Object.prototype.hasOwnProperty,Js=Lo((function(t,e,n){$s.call(t,n)?t[n].push(e):ae(t,n,[e])}));function Xs(t,e){return t>e}function Ys(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=R(e),n=R(n)),t(e,n)}}var Zs=Ys(Xs),Ks=Ys((function(t,e){return t>=e})),Qs=Object.prototype.hasOwnProperty;function ta(t,e){return null!=t&&Qs.call(t,e)}function ea(t,e){return null!=t&&bo(t,e,ta)}var na=Math.max,ra=Math.min;function ia(t){return"string"==typeof t||!C(t)&&w(t)&&"[object String]"==b(t)}function oa(t,e){return A(e,(function(e){return t[e]}))}function sa(t){return null==t?[]:oa(t,He(t))}var aa=Math.max;var la=Math.max;var ua=Math.min;function ca(t,e,n){for(var r=n?ns:Ut,i=t[0].length,o=t.length,s=o,a=Array(o),l=1/0,u=[];s--;){var c=t[s];s&&e&&(c=A(c,Le(e))),l=ua(c.length,l),a[s]=!n&&(e||i>=120&&c.length>=120)?new Zi(s&&c):void 0}c=t[0];var h=-1,p=a[0];t:for(;++h<i&&u.length<l;){var f=c[h],d=e?e(f):f;if(f=n||0!==f?f:0,!(p?Qi(p,d):r(u,d,n))){for(s=o;--s;){var g=a[s];if(!(g?Qi(g,d):r(t[s],d,n)))continue t}p&&p.push(d),u.push(f)}}return u}function ha(t){return Ho(t)?t:[]}var pa=de((function(t){var e=A(t,ha);return e.length&&e[0]===t[0]?ca(e):[]})),fa=de((function(t){var e=os(t),n=A(t,ha);return e===os(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?ca(n,Co(e)):[]})),da=de((function(t){var e=os(t),n=A(t,ha);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?ca(n,void 0,e):[]}));function ga(t,e){return function(n,r){return function(t,e,n,r){return ko(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}var ya=Object.prototype.toString,va=ga((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=ya.call(e)),t[e]=n}),It(U)),ma=Object.prototype,ba=ma.hasOwnProperty,wa=ma.toString,xa=ga((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=wa.call(e)),ba.call(t,e)?t[e].push(n):t[e]=[n]}),Co);function Pa(t,e){return e.length<2?t:Pn(t,Wn(e,0,-1))}function Aa(t,e,n){var r=null==(t=Pa(t,e=wn(e,t)))?t:t[xn(os(e))];return null==r?void 0:ct(r,t,n)}var Ca=de(Aa),Ea=de((function(t,e,n){var r=-1,i="function"==typeof e,o=ye(t)?Array(t.length):[];return No(t,(function(t){o[++r]=i?ct(e,t,n):Aa(t,e,n)})),o}));var Ma=Ve&&Ve.isArrayBuffer,Sa=Ma?Le(Ma):function(t){return w(t)&&"[object ArrayBuffer]"==b(t)};var Ta=Ve&&Ve.isDate,ka=Ta?Le(Ta):function(t){return w(t)&&"[object Date]"==b(t)};var Oa=Object.prototype.hasOwnProperty;function Na(t){if(null==t)return!0;if(ye(t)&&(C(t)||"string"==typeof t||"function"==typeof t.splice||Ne(t)||Re(t)||Me(t)))return!t.length;var e=Oi(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(we(t))return!We(t).length;for(var n in t)if(Oa.call(t,n))return!1;return!0}function _a(t,e){return ho(t,e)}var La=h.isFinite;function Ba(t){return"number"==typeof t&&t==G(t)}function Ia(t){return"number"==typeof t||w(t)&&"[object Number]"==b(t)}var ja=H?q:Se;var Va=Ve&&Ve.isRegExp,Da=Va?Le(Va):function(t){return w(t)&&"[object RegExp]"==b(t)},Ra=9007199254740991;var za=Array.prototype.join;var Fa=Ur((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ga=Lo((function(t,e,n){ae(t,n,e)}));var Ua=Math.max,qa=Math.min;var Wa=Ur((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ha=lr("toLowerCase");function $a(t,e){return t<e}var Ja=Ys($a),Xa=Ys((function(t,e){return t<=e}));function Ya(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],s=e(o);if(null!=s&&(void 0===a?s==s&&!x(s):n(s,a)))var a=s,l=o}return l}function Za(t){return t&&t.length?Ya(t,U,Xs):void 0}function Ka(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Qa(t,e){var n=null==t?0:t.length;return n?Ka(t,e)/n:NaN}var tl=me((function(t,e,n){Xo(t,e,n)})),el=de((function(t,e){return function(n){return Aa(n,t,e)}})),nl=de((function(t,e){return function(n){return Aa(t,n,e)}}));function rl(t,e,n){var r=He(e),i=Hs(e,r),o=!(B(n)&&"chain"in n&&!n.chain),s=q(t);return Rt(i,(function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Ct(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,En([this.value()],arguments))})})),t}var il=T((function(t,e){return t*e}),1);function ol(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}var sl=p?p.iterator:void 0;function al(t){if(!t)return[];if(ye(t))return ia(t)?ar(t):Ct(t);if(sl&&t[sl])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[sl]());var e=Oi(t);return("[object Map]"==e?eo:"[object Set]"==e?no:sa)(t)}function ll(t,e){var n=t.length;if(n)return Xt(e+=e<0?n:0,n)?t[e]:void 0}function ul(t,e){return null==(t=Pa(t,e=wn(e,t)))||delete t[xn(os(e))]}function cl(t){return Dn(t)?void 0:t}var hl=On((function(t,e){var n={};if(null==t)return n;var r=!1;e=A(e,(function(e){return e=wn(e,t),r||(r=e.length>1),e})),he(t,gi(t),n),r&&(n=Ji(n,7,cl));for(var i=e.length;i--;)ul(n,e[i]);return n}));function pl(t,e,n,r){if(!B(t))return t;for(var i=-1,o=(e=wn(e,t)).length,s=o-1,a=t;null!=a&&++i<o;){var l=xn(e[i]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(i!=s){var c=a[l];void 0===(u=r?r(c,l,a):void 0)&&(u=B(c)?c:Xt(e[i+1])?[]:{})}ce(a,l,u),a=a[l]}return t}function fl(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=Pn(t,s);n(a,s)&&pl(o,wn(s,t),a)}return o}function dl(t,e){if(null==t)return{};var n=A(gi(t),(function(t){return[t]}));return e=Co(e),fl(t,n,(function(t,n){return e(t,n[0])}))}function gl(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=x(t),s=void 0!==e,a=null===e,l=e==e,u=x(e);if(!a&&!u&&!o&&t>e||o&&s&&l&&!a&&!u||r&&s&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&t<e||u&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!l)return-1}return 0}function yl(t,e,n){e=e.length?A(e,(function(t){return C(t)?function(e){return Pn(e,1===t.length?t[0]:t)}:t})):[U];var r=-1;e=A(e,Le(Co));var i=zs(t,(function(t,n,i){var o=A(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(i,(function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var l=gl(i[r],o[r]);if(l)return r>=a?l:l*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function vl(t){return On((function(e){return e=A(e,Le(Co)),de((function(n){var r=this;return t(e,(function(t){return ct(t,r,n)}))}))}))}var ml=vl(A),bl=de,wl=Math.min,xl=bl((function(t,e){var n=(e=1==e.length&&C(e[0])?A(e[0],Le(Co)):A(Tn(e,1),Le(Co))).length;return de((function(r){for(var i=-1,o=wl(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return ct(t,this,r)}))})),Pl=vl(Ms),Al=vl(Ki),Cl=Math.floor;function El(t,e){var n="";if(!t||e<1||e>9007199254740991)return n;do{e%2&&(n+=t),(e=Cl(e/2))&&(t+=t)}while(e);return n}var Ml=Po("length"),Sl="\\ud800-\\udfff",Tl="["+Sl+"]",kl="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ol="\\ud83c[\\udffb-\\udfff]",Nl="[^"+Sl+"]",_l="(?:\\ud83c[\\udde6-\\uddff]){2}",Ll="[\\ud800-\\udbff][\\udc00-\\udfff]",Bl="(?:"+kl+"|"+Ol+")"+"?",Il="[\\ufe0e\\ufe0f]?",jl=Il+Bl+("(?:\\u200d(?:"+[Nl,_l,Ll].join("|")+")"+Il+Bl+")*"),Vl="(?:"+[Nl+kl+"?",kl,_l,Ll,Tl].join("|")+")",Dl=RegExp(Ol+"(?="+Ol+")|"+Vl+jl,"g");function Rl(t){return Jn(t)?function(t){for(var e=Dl.lastIndex=0;Dl.test(t);)++e;return e}(t):Ml(t)}var zl=Math.ceil;function Fl(t,e){var n=(e=void 0===e?" ":S(e)).length;if(n<2)return n?El(e,t):e;var r=El(e,zl(t/Rl(e)));return Jn(e)?Hn(ar(r),0,t).join(""):r.slice(0,t)}var Gl=Math.ceil,Ul=Math.floor;var ql=/^\s+/,Wl=h.parseInt;var Hl=de((function(t,e){return oe(t,32,void 0,e,Qt(e,$t(Hl)))}));Hl.placeholder={};var $l=de((function(t,e){return oe(t,64,void 0,e,Qt(e,$t($l)))}));$l.placeholder={};var Jl=Lo((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Xl=On((function(t,e){return null==t?{}:function(t,e){return fl(t,e,(function(e,n){return wo(t,n)}))}(t,e)}));function Yl(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}var Zl=Array.prototype.splice;function Kl(t,e,n,r){var i=r?Yl:Gt,o=-1,s=e.length,a=t;for(t===e&&(e=Ct(e)),n&&(a=A(t,Le(n)));++o<s;)for(var l=0,u=e[o],c=n?n(u):u;(l=i(a,c,l,r))>-1;)a!==t&&Zl.call(a,l,1),Zl.call(t,l,1);return t}function Ql(t,e){return t&&t.length&&e&&e.length?Kl(t,e):t}var tu=de(Ql);var eu=Array.prototype.splice;function nu(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Xt(i)?eu.call(t,i,1):ul(t,i)}}return t}var ru=On((function(t,e){var n=null==t?0:t.length,r=Cn(t,e);return nu(t,A(e,(function(t){return Xt(t,n)?+t:t})).sort(gl)),r})),iu=Math.floor,ou=Math.random;function su(t,e){return t+iu(ou()*(e-t+1))}var au=parseFloat,lu=Math.min,uu=Math.random;var cu=Math.ceil,hu=Math.max;function pu(t){return function(e,n,r){return r&&"number"!=typeof r&&ve(e,n,r)&&(n=r=void 0),e=F(e),void 0===n?(n=e,e=0):n=F(n),function(t,e,n,r){for(var i=-1,o=hu(cu((e-t)/(n||1)),0),s=Array(o);o--;)s[r?o:++i]=t,t+=n;return s}(e,n,r=void 0===r?e<n?1:-1:F(r),t)}}var fu=pu(),du=pu(!0),gu=On((function(t,e){return oe(t,256,void 0,void 0,void 0,e)}));function yu(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function vu(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}var mu=Array.prototype.reverse;function bu(t){return null==t?t:mu.call(t)}var wu=$r("round");function xu(t){var e=t.length;return e?t[su(0,e-1)]:void 0}function Pu(t){return xu(sa(t))}function Au(t,e){var n=-1,r=t.length,i=r-1;for(e=void 0===e?r:e;++n<e;){var o=su(n,i),s=t[o];t[o]=t[n],t[n]=s}return t.length=e,t}function Cu(t,e){return Au(Ct(t),Kr(e,0,t.length))}function Eu(t,e){var n=sa(t);return Au(n,Kr(e,0,n.length))}function Mu(t){return Au(Ct(t))}function Su(t){return Au(sa(t))}var Tu=Ur((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));function ku(t,e){var n;return No(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}var Ou=de((function(t,e){if(null==t)return[];var n=e.length;return n>1&&ve(t,e[0],e[1])?e=[]:n>2&&ve(e[0],e[1],e[2])&&(e=[e[0]]),yl(t,Tn(e,1),[])})),Nu=Math.floor,_u=Math.min;function Lu(t,e,n,r){var i=0,o=null==t?0:t.length;if(0===o)return 0;for(var s=(e=n(e))!=e,a=null===e,l=x(e),u=void 0===e;i<o;){var c=Nu((i+o)/2),h=n(t[c]),p=void 0!==h,f=null===h,d=h==h,g=x(h);if(s)var y=r||d;else y=u?d&&(r||p):a?d&&p&&(r||!f):l?d&&p&&!f&&(r||!g):!f&&!g&&(r?h<=e:h<e);y?i=c+1:o=c}return _u(o,4294967294)}function Bu(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!x(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return Lu(t,e,U,n)}function Iu(t,e){return Bu(t,e)}function ju(t,e,n){return Lu(t,e,Co(n))}function Vu(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!le(a,l)){var l=a;o[i++]=0===s?0:s}}return o}var Du=Math.max;var Ru=Ur((function(t,e,n){return t+(n?" ":"")+ur(e)}));var zu=T((function(t,e){return t-e}),0);var Fu=Object.prototype,Gu=Fu.hasOwnProperty;function Uu(t,e,n,r){return void 0===t||le(t,Fu[n])&&!Gu.call(r,n)?e:t}var qu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function Wu(t){return"\\"+qu[t]}var Hu=/<%=([\s\S]+?)%>/g,$u={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Hu,variable:"",imports:{_:{escape:As}}},Ju=/\b__p \+= '';/g,Xu=/\b(__p \+=) '' \+/g,Yu=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Zu=/[()=,{}\[\]\/\s]/,Ku=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qu=/($^)/,tc=/['\n\r\u2028\u2029\\]/g,ec=Object.prototype.hasOwnProperty;function nc(t,e){return e(t)}var rc=4294967295,ic=Math.min;function oc(t,e){var n=t;return n instanceof vt&&(n=n.value()),hr(e,(function(t,e){return e.func.apply(e.thisArg,En([t],e.args))}),n)}function sc(){return oc(this.__wrapped__,this.__actions__)}var ac=9007199254740991;function lc(t,e){for(var n=t.length;n--&&Gt(e,t[n],0)>-1;);return n}function uc(t,e){for(var n=-1,r=t.length;++n<r&&Gt(e,t[n],0)>-1;);return n}var cc=/^\s+/;var hc=/\w*$/;var pc=pr({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),fc=/&(?:amp|lt|gt|quot|#39);/g,dc=RegExp(fc.source);var gc=mi&&1/no(new mi([,-0]))[1]==1/0?function(t){return new mi(t)}:mt;function yc(t,e,n){var r=-1,i=Ut,o=t.length,s=!0,a=[],l=a;if(n)s=!1,i=ns;else if(o>=200){var u=e?null:gc(t);if(u)return no(u);s=!1,i=Qi,l=new Zi}else l=e?[]:a;t:for(;++r<o;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,s&&h==h){for(var p=l.length;p--;)if(l[p]===h)continue t;e&&l.push(h),a.push(c)}else i(l,h,n)||(l!==a&&l.push(h),a.push(c))}return a}var vc=de((function(t){return yc(Tn(t,1,Ho,!0))})),mc=de((function(t){var e=os(t);return Ho(e)&&(e=void 0),yc(Tn(t,1,Ho,!0),Co(e))})),bc=de((function(t){var e=os(t);return e="function"==typeof e?e:void 0,yc(Tn(t,1,Ho,!0),void 0,e)}));function wc(t){return t&&t.length?yc(t):[]}var xc=0;function Pc(t){var e=++xc;return bn(t)+e}var Ac=Math.max;function Cc(t){if(!t||!t.length)return[];var e=0;return t=ai(t,(function(t){if(Ho(t))return e=Ac(t.length,e),!0})),xe(e,(function(e){return A(t,Po(e))}))}function Ec(t,e){if(!t||!t.length)return[];var n=Cc(t);return null==e?n:A(n,(function(t){return ct(e,void 0,t)}))}function Mc(t,e,n,r){return pl(t,e,n(Pn(t,e)),r)}var Sc=Ur((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}));var Tc=de((function(t,e){return Ho(t)?rs(t,e):[]}));var kc=On((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Cn(e,t)};return!(e>1||this.__actions__.length)&&r instanceof vt&&Xt(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:nc,args:[i],thisArg:void 0}),new At(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(i)}));function Oc(t,e,n){var r=t.length;if(r<2)return r?yc(t[0]):[];for(var i=-1,o=Array(r);++i<r;)for(var s=t[i],a=-1;++a<r;)a!=i&&(o[i]=rs(o[i]||s,t[a],e,n));return yc(Tn(o,1),e,n)}var Nc=de((function(t){return Oc(ai(t,Ho))})),_c=de((function(t){var e=os(t);return Ho(e)&&(e=void 0),Oc(ai(t,Ho),Co(e))})),Lc=de((function(t){var e=os(t);return e="function"==typeof e?e:void 0,Oc(ai(t,Ho),void 0,e)})),Bc=de(Cc);function Ic(t,e,n){for(var r=-1,i=t.length,o=e.length,s={};++r<i;){var a=r<o?e[r]:void 0;n(s,t[r],a)}return s}var jc=de((function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,Ec(t,n)})),Vc={chunk:function(t,e,n){e=(n?ve(t,e,n):void 0===e)?1:Zr(G(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,s=Array(Yr(r/e));i<r;)s[o++]=Wn(t,i,i+=e);return s},compact:function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},concat:function(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return En(C(n)?Ct(n):[n],Tn(e,1))},difference:is,differenceBy:ss,differenceWith:as,drop:function(t,e,n){var r=null==t?0:t.length;return r?Wn(t,(e=n||void 0===e?1:G(e))<0?0:e,r):[]},dropRight:function(t,e,n){var r=null==t?0:t.length;return r?Wn(t,0,(e=r-(e=n||void 0===e?1:G(e)))<0?0:e):[]},dropRightWhile:function(t,e){return t&&t.length?us(t,Co(e),!0,!0):[]},dropWhile:function(t,e){return t&&t.length?us(t,Co(e),!0):[]},fill:function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&ve(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=G(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:G(r))<0&&(r+=i),r=n>r?0:Ts(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},findIndex:_s,findLastIndex:Vs,first:Rs,flatten:kn,flattenDeep:function(t){return(null==t?0:t.length)?Tn(t,Infinity):[]},flattenDepth:function(t,e){return(null==t?0:t.length)?Tn(t,e=void 0===e?1:G(e)):[]},fromPairs:function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},head:Rs,indexOf:function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:G(n);return i<0&&(i=la(r+i,0)),Gt(t,e,i)},initial:function(t){return(null==t?0:t.length)?Wn(t,0,-1):[]},intersection:pa,intersectionBy:fa,intersectionWith:da,join:function(t,e){return null==t?"":za.call(t,e)},last:os,lastIndexOf:function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=G(n))<0?Ua(r+i,0):qa(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):zt(t,Ft,i,!0)},nth:function(t,e){return t&&t.length?ll(t,G(e)):void 0},pull:tu,pullAll:Ql,pullAllBy:function(t,e,n){return t&&t.length&&e&&e.length?Kl(t,e,Co(n)):t},pullAllWith:function(t,e,n){return t&&t.length&&e&&e.length?Kl(t,e,void 0,n):t},pullAt:ru,remove:function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Co(e);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return nu(t,i),n},reverse:bu,slice:function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&ve(t,e,n)?(e=0,n=r):(e=null==e?0:G(e),n=void 0===n?r:G(n)),Wn(t,e,n)):[]},sortedIndex:Iu,sortedIndexBy:ju,sortedIndexOf:function(t,e){var n=null==t?0:t.length;if(n){var r=Bu(t,e);if(r<n&&le(t[r],e))return r}return-1},sortedLastIndex:function(t,e){return Bu(t,e,!0)},sortedLastIndexBy:function(t,e,n){return Lu(t,e,Co(n),!0)},sortedLastIndexOf:function(t,e){if(null==t?0:t.length){var n=Bu(t,e,!0)-1;if(le(t[n],e))return n}return-1},sortedUniq:function(t){return t&&t.length?Vu(t):[]},sortedUniqBy:function(t,e){return t&&t.length?Vu(t,Co(e)):[]},tail:function(t){var e=null==t?0:t.length;return e?Wn(t,1,e):[]},take:function(t,e,n){return t&&t.length?Wn(t,0,(e=n||void 0===e?1:G(e))<0?0:e):[]},takeRight:function(t,e,n){var r=null==t?0:t.length;return r?Wn(t,(e=r-(e=n||void 0===e?1:G(e)))<0?0:e,r):[]},takeRightWhile:function(t,e){return t&&t.length?us(t,Co(e),!1,!0):[]},takeWhile:function(t,e){return t&&t.length?us(t,Co(e)):[]},union:vc,unionBy:mc,unionWith:bc,uniq:wc,uniqBy:function(t,e){return t&&t.length?yc(t,Co(e)):[]},uniqWith:function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?yc(t,void 0,e):[]},unzip:Cc,unzipWith:Ec,without:Tc,xor:Nc,xorBy:_c,xorWith:Lc,zip:Bc,zipObject:function(t,e){return Ic(t||[],e||[],ce)},zipObjectDeep:function(t,e){return Ic(t||[],e||[],pl)},zipWith:jc},Dc={countBy:Io,each:hs,eachRight:ys,every:function(t,e,n){var r=C(t)?Ms:Ss;return n&&ve(t,e,n)&&(e=void 0),r(t,Co(e))},filter:function(t,e){return(C(t)?ai:ks)(t,Co(e))},find:Ls,findLast:Ds,flatMap:function(t,e){return Tn(Fs(t,e),1)},flatMapDeep:function(t,e){return Tn(Fs(t,e),Infinity)},flatMapDepth:function(t,e,n){return n=void 0===n?1:G(n),Tn(Fs(t,e),n)},forEach:hs,forEachRight:ys,groupBy:Js,includes:function(t,e,n,r){t=ye(t)?t:sa(t),n=n&&!r?G(n):0;var i=t.length;return n<0&&(n=aa(i+n,0)),ia(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Gt(t,e,n)>-1},invokeMap:Ea,keyBy:Ga,map:Fs,orderBy:function(t,e,n,r){return null==t?[]:(C(e)||(e=null==e?[]:[e]),C(n=r?void 0:n)||(n=null==n?[]:[n]),yl(t,e,n))},partition:Jl,reduce:function(t,e,n){var r=C(t)?hr:yu,i=arguments.length<3;return r(t,Co(e),n,i,No)},reduceRight:function(t,e,n){var r=C(t)?vu:yu,i=arguments.length<3;return r(t,Co(e),n,i,gs)},reject:function(t,e){return(C(t)?ai:ks)(t,ol(Co(e)))},sample:function(t){return(C(t)?xu:Pu)(t)},sampleSize:function(t,e,n){return e=(n?ve(t,e,n):void 0===e)?1:G(e),(C(t)?Cu:Eu)(t,e)},shuffle:function(t){return(C(t)?Mu:Su)(t)},size:function(t){if(null==t)return 0;if(ye(t))return ia(t)?Rl(t):t.length;var e=Oi(t);return"[object Map]"==e||"[object Set]"==e?t.size:We(t).length},some:function(t,e,n){var r=C(t)?Ki:ku;return n&&ve(t,e,n)&&(e=void 0),r(t,Co(e))},sortBy:Ou},Rc=Do,zc={after:function(t,e){if("function"!=typeof e)throw new TypeError("Expected a function");return t=G(t),function(){if(--t<1)return e.apply(this,arguments)}},ary:se,before:Fn,bind:Gn,bindKey:qn,curry:jo,curryRight:Vo,debounce:Fo,defer:ts,delay:es,flip:function(t){return oe(t,512)},memoize:gn,negate:ol,once:function(t){return Fn(2,t)},overArgs:xl,partial:Hl,partialRight:$l,rearg:gu,rest:function(t,e){if("function"!=typeof t)throw new TypeError("Expected a function");return de(t,e=void 0===e?e:G(e))},spread:function(t,e){if("function"!=typeof t)throw new TypeError("Expected a function");return e=null==e?0:Du(G(e),0),de((function(n){var r=n[e],i=Hn(n,0,e);return r&&En(i,r),ct(t,this,i)}))},throttle:function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return B(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Fo(t,e,{leading:r,maxWait:e,trailing:i})},unary:function(t){return se(t,1)},wrap:function(t,e){return Hl(cs(e),t)}},Fc={castArray:function(){if(!arguments.length)return[];var t=arguments[0];return C(t)?t:[t]},clone:Xi,cloneDeep:Yi,cloneDeepWith:function(t,e){return Ji(t,5,e="function"==typeof e?e:void 0)},cloneWith:function(t,e){return Ji(t,4,e="function"==typeof e?e:void 0)},conformsTo:function(t,e){return null==e||Eo(t,e,He(e))},eq:le,gt:Zs,gte:Ks,isArguments:Me,isArray:C,isArrayBuffer:Sa,isArrayLike:ye,isArrayLikeObject:Ho,isBoolean:function(t){return!0===t||!1===t||w(t)&&"[object Boolean]"==b(t)},isBuffer:Ne,isDate:ka,isElement:function(t){return w(t)&&1===t.nodeType&&!Dn(t)},isEmpty:Na,isEqual:_a,isEqualWith:function(t,e,n){var r=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===r?ho(t,e,void 0,n):!!r},isError:Rn,isFinite:function(t){return"number"==typeof t&&La(t)},isFunction:q,isInteger:Ba,isLength:ge,isMap:Fi,isMatch:function(t,e){return t===e||po(t,e,go(e))},isMatchWith:function(t,e,n){return n="function"==typeof n?n:void 0,po(t,e,go(e),n)},isNaN:function(t){return Ia(t)&&t!=+t},isNative:function(t){if(ja(t))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return nt(t)},isNil:function(t){return null==t},isNull:function(t){return null===t},isNumber:Ia,isObject:B,isObjectLike:w,isPlainObject:Dn,isRegExp:Da,isSafeInteger:function(t){return Ba(t)&&t>=-9007199254740991&&t<=Ra},isSet:Ui,isString:ia,isSymbol:x,isTypedArray:Re,isUndefined:function(t){return void 0===t},isWeakMap:function(t){return w(t)&&"[object WeakMap]"==Oi(t)},isWeakSet:function(t){return w(t)&&"[object WeakSet]"==b(t)},lt:Ja,lte:Xa,toArray:al,toFinite:F,toInteger:G,toLength:Ts,toNumber:R,toPlainObject:Jo,toSafeInteger:function(t){return t?Kr(G(t),-9007199254740991,ac):0===t?t:0},toString:bn},Gc={add:k,ceil:Jr,divide:ls,floor:Gs,max:Za,maxBy:function(t,e){return t&&t.length?Ya(t,Co(e),Xs):void 0},mean:function(t){return Qa(t,U)},meanBy:function(t,e){return Qa(t,Co(e))},min:function(t){return t&&t.length?Ya(t,U,$a):void 0},minBy:function(t,e){return t&&t.length?Ya(t,Co(e),$a):void 0},multiply:il,round:wu,subtract:zu,sum:function(t){return t&&t.length?Ka(t,U):0},sumBy:function(t,e){return t&&t.length?Ka(t,Co(e)):0}},Uc=Qr,qc=function(t,e,n){return e=F(e),void 0===n?(n=e,e=0):n=F(n),function(t,e,n){return t>=ra(e,n)&&t<na(e,n)}(t=R(t),e,n)},Wc=function(t,e,n){if(n&&"boolean"!=typeof n&&ve(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=F(t),void 0===e?(e=t,t=0):e=F(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=uu();return lu(t+i*(e-t+au("1e-"+((i+"").length-1))),e)}return su(t,e)},Hc={assign:Je,assignIn:Ke,assignInWith:Qe,assignWith:tn,at:Nn,create:function(t,e){var n=lt(t);return null==e?n:ei(n,e)},defaults:qo,defaultsDeep:Ko,entries:ms,entriesIn:bs,extend:Ke,extendWith:Qe,findKey:function(t,e){return Bs(t,Co(e),ko)},findLastKey:function(t,e){return Bs(t,Co(e),ds)},forIn:function(t,e){return null==t?t:To(t,cs(e),Ze)},forInRight:function(t,e){return null==t?t:fs(t,cs(e),Ze)},forOwn:function(t,e){return t&&ko(t,cs(e))},forOwnRight:function(t,e){return t&&ds(t,cs(e))},functions:function(t){return null==t?[]:Hs(t,He(t))},functionsIn:function(t){return null==t?[]:Hs(t,Ze(t))},get:An,has:ea,hasIn:wo,invert:va,invertBy:xa,invoke:Ca,keys:He,keysIn:Ze,mapKeys:function(t,e){var n={};return e=Co(e),ko(t,(function(t,r,i){ae(n,e(t,r,i),t)})),n},mapValues:function(t,e){var n={};return e=Co(e),ko(t,(function(t,r,i){ae(n,r,e(t,r,i))})),n},merge:tl,mergeWith:Zo,omit:hl,omitBy:function(t,e){return dl(t,ol(Co(e)))},pick:Xl,pickBy:dl,result:function(t,e,n){var r=-1,i=(e=wn(e,t)).length;for(i||(i=1,t=void 0);++r<i;){var o=null==t?void 0:t[xn(e[r])];void 0===o&&(r=i,o=n),t=q(o)?o.call(t):o}return t},set:function(t,e,n){return null==t?t:pl(t,e,n)},setWith:function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:pl(t,e,n,r)},toPairs:ms,toPairsIn:bs,transform:function(t,e,n){var r=C(t),i=r||Ne(t)||Re(t);if(e=Co(e),null==n){var o=t&&t.constructor;n=i?r?new o:[]:B(t)&&q(o)?lt(_n(t)):{}}return(i?Rt:ko)(t,(function(t,r,i){return e(n,t,r,i)})),n},unset:function(t,e){return null==t||ul(t,e)},update:function(t,e,n){return null==t?t:Mc(t,e,cs(n))},updateWith:function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:Mc(t,e,cs(n),r)},values:sa,valuesIn:function(t){return null==t?[]:oa(t,Ze(t))}},$c={at:kc,chain:Xr,commit:function(){return new At(this.value(),this.__chain__)},lodash:St,next:function(){void 0===this.__values__&&(this.__values__=al(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},plant:function(t){for(var e,n=this;n instanceof yt;){var r=Et(n);r.__index__=0,r.__values__=void 0,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},reverse:function(){var t=this.__wrapped__;if(t instanceof vt){var e=t;return this.__actions__.length&&(e=new vt(this)),(e=e.reverse()).__actions__.push({func:nc,args:[bu],thisArg:void 0}),new At(e,this.__chain__)}return this.thru(bu)},tap:function(t,e){return e(t),t},thru:nc,toIterator:function(){return this},toJSON:sc,value:sc,valueOf:sc,wrapperChain:function(){return Xr(this)}},Jc={camelCase:qr,capitalize:cr,deburr:yr,endsWith:function(t,e,n){t=bn(t),e=S(e);var r=t.length,i=n=void 0===n?r:Kr(G(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},escape:As,escapeRegExp:function(t){return(t=bn(t))&&Es.test(t)?t.replace(Cs,"\\$&"):t},kebabCase:Fa,lowerCase:Wa,lowerFirst:Ha,pad:function(t,e,n){t=bn(t);var r=(e=G(e))?Rl(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Fl(Ul(i),n)+t+Fl(Gl(i),n)},padEnd:function(t,e,n){t=bn(t);var r=(e=G(e))?Rl(t):0;return e&&r<e?t+Fl(e-r,n):t},padStart:function(t,e,n){t=bn(t);var r=(e=G(e))?Rl(t):0;return e&&r<e?Fl(e-r,n)+t:t},parseInt:function(t,e,n){return n||null==e?e=0:e&&(e=+e),Wl(bn(t).replace(ql,""),e||0)},repeat:function(t,e,n){return e=(n?ve(t,e,n):void 0===e)?1:G(e),El(bn(t),e)},replace:function(){var t=arguments,e=bn(t[0]);return t.length<3?e:e.replace(t[1],t[2])},snakeCase:Tu,split:function(t,e,n){return n&&"number"!=typeof n&&ve(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=bn(t))&&("string"==typeof e||null!=e&&!Da(e))&&!(e=S(e))&&Jn(t)?Hn(ar(t),0,n):t.split(e,n):[]},startCase:Ru,startsWith:function(t,e,n){return t=bn(t),n=null==n?0:Kr(G(n),0,t.length),e=S(e),t.slice(n,n+e.length)==e},template:function(t,e,n){var r=$u.imports._.templateSettings||$u;n&&ve(t,e,n)&&(e=void 0),t=bn(t),e=Qe({},e,r,Uu);var i,o,s=Qe({},e.imports,r.imports,Uu),a=He(s),l=oa(s,a),u=0,c=e.interpolate||Qu,h="__p += '",p=RegExp((e.escape||Qu).source+"|"+c.source+"|"+(c===Hu?Ku:Qu).source+"|"+(e.evaluate||Qu).source+"|$","g"),f=ec.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+"\n":"";t.replace(p,(function(e,n,r,s,a,l){return r||(r=s),h+=t.slice(u,l).replace(tc,Wu),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),a&&(o=!0,h+="';\n"+a+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+e.length,e})),h+="';\n";var d=ec.call(e,"variable")&&e.variable;if(d){if(Zu.test(d))throw new Error("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(o?h.replace(Ju,""):h).replace(Xu,"$1").replace(Yu,"$1;"),h="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=zn((function(){return Function(a,f+"return "+h).apply(void 0,l)}));if(g.source=h,Rn(g))throw g;return g},templateSettings:$u,toLower:function(t){return bn(t).toLowerCase()},toUpper:function(t){return bn(t).toUpperCase()},trim:function(t,e,n){if((t=bn(t))&&(n||void 0===e))return L(t);if(!t||!(e=S(e)))return t;var r=ar(t),i=ar(e);return Hn(r,uc(r,i),lc(r,i)+1).join("")},trimEnd:function(t,e,n){if((t=bn(t))&&(n||void 0===e))return t.slice(0,N(t)+1);if(!t||!(e=S(e)))return t;var r=ar(t);return Hn(r,0,lc(r,ar(e))+1).join("")},trimStart:function(t,e,n){if((t=bn(t))&&(n||void 0===e))return t.replace(cc,"");if(!t||!(e=S(e)))return t;var r=ar(t);return Hn(r,uc(r,ar(e))).join("")},truncate:function(t,e){var n=30,r="...";if(B(e)){var i="separator"in e?e.separator:i;n="length"in e?G(e.length):n,r="omission"in e?S(e.omission):r}var o=(t=bn(t)).length;if(Jn(t)){var s=ar(t);o=s.length}if(n>=o)return t;var a=n-Rl(r);if(a<1)return r;var l=s?Hn(s,0,a).join(""):t.slice(0,a);if(void 0===i)return l+r;if(s&&(a+=l.length-a),Da(i)){if(t.slice(a).search(i)){var u,c=l;for(i.global||(i=RegExp(i.source,bn(hc.exec(i))+"g")),i.lastIndex=0;u=i.exec(c);)var h=u.index;l=l.slice(0,void 0===h?a:h)}}else if(t.indexOf(S(i),a)!=a){var p=l.lastIndexOf(i);p>-1&&(l=l.slice(0,p))}return l+r},unescape:function(t){return(t=bn(t))&&dc.test(t)?t.replace(fc,pc):t},upperCase:Sc,upperFirst:ur,words:Fr},Xc={attempt:zn,bindAll:Un,cond:function(t){var e=null==t?0:t.length,n=Co;return t=e?A(t,(function(t){if("function"!=typeof t[1])throw new TypeError("Expected a function");return[n(t[0]),t[1]]})):[],de((function(n){for(var r=-1;++r<e;){var i=t[r];if(ct(i[0],this,n))return ct(i[1],this,n)}}))},conforms:function(t){return function(t){var e=He(t);return function(n){return Eo(n,t,e)}}(Ji(t,1))},constant:It,defaultTo:function(t,e){return null==t||t!=t?e:t},flow:qs,flowRight:Ws,identity:U,iteratee:function(t){return Co("function"==typeof t?t:Ji(t,1))},matches:function(t){return vo(Ji(t,1))},matchesProperty:function(t,e){return xo(t,Ji(e,1))},method:el,methodOf:nl,mixin:rl,noop:mt,nthArg:function(t){return t=G(t),de((function(e){return ll(e,t)}))},over:ml,overEvery:Pl,overSome:Al,property:Ao,propertyOf:function(t){return function(e){return null==t?void 0:Pn(t,e)}},range:fu,rangeRight:du,stubArray:li,stubFalse:Se,stubObject:function(){return{}},stubString:function(){return""},stubTrue:function(){return!0},times:function(t,e){if((t=G(t))<1||t>9007199254740991)return[];var n=rc,r=ic(t,rc);e=cs(e),t-=rc;for(var i=xe(r,e);++n<t;)e(n);return i},toPath:function(t){return C(t)?A(t,xn):x(t)?[t]:Ct(mn(bn(t)))},uniqueId:Pc};var Yc=Math.max,Zc=Math.min;var Kc=Math.min;
/**
     * @license
     * Lodash (Custom Build) <https://lodash.com/>
     * Build: `lodash modularize exports="es" -o ./`
     * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
     * Released under MIT license <https://lodash.com/license>
     * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
     * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
     */
var Qc,th=4294967295,eh=Array.prototype,nh=Object.prototype.hasOwnProperty,rh=p?p.iterator:void 0,ih=Math.max,oh=Math.min,sh=function(t){return function(e,n,r){if(null==r){var i=B(n),o=i&&He(n),s=o&&o.length&&Hs(n,o);(s?s.length:i)||(r=n,n=e,e=this)}return t(e,n,r)}}(rl);function ah(t,e,n){if(n)switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2]);case 4:return t.call(e,n[0],n[1],n[2],n[3]);case 5:return t.call(e,n[0],n[1],n[2],n[3],n[4]);case 6:return t.call(e,n[0],n[1],n[2],n[3],n[4],n[5]);default:return t.apply(e,n)}return t.call(e)}function lh(t,e,...n){return ah(t,e,n)}function uh(t){return"object"==typeof t&&t.then&&"function"==typeof t.then}function ch(t){return null!=t&&(t instanceof Promise||uh(t))}function hh(...t){const e=[];t.forEach((t=>{Array.isArray(t)?e.push(...t):e.push(t)}));if(e.some((t=>ch(t)))){const t=e.map((t=>ch(t)?t:Promise.resolve(!1!==t)));return Promise.all(t).then((t=>t.reduce(((t,e)=>!1!==e&&t),!0)))}return e.every((t=>!1!==t))}St.after=zc.after,St.ary=zc.ary,St.assign=Hc.assign,St.assignIn=Hc.assignIn,St.assignInWith=Hc.assignInWith,St.assignWith=Hc.assignWith,St.at=Hc.at,St.before=zc.before,St.bind=zc.bind,St.bindAll=Xc.bindAll,St.bindKey=zc.bindKey,St.castArray=Fc.castArray,St.chain=$c.chain,St.chunk=Vc.chunk,St.compact=Vc.compact,St.concat=Vc.concat,St.cond=Xc.cond,St.conforms=Xc.conforms,St.constant=Xc.constant,St.countBy=Dc.countBy,St.create=Hc.create,St.curry=zc.curry,St.curryRight=zc.curryRight,St.debounce=zc.debounce,St.defaults=Hc.defaults,St.defaultsDeep=Hc.defaultsDeep,St.defer=zc.defer,St.delay=zc.delay,St.difference=Vc.difference,St.differenceBy=Vc.differenceBy,St.differenceWith=Vc.differenceWith,St.drop=Vc.drop,St.dropRight=Vc.dropRight,St.dropRightWhile=Vc.dropRightWhile,St.dropWhile=Vc.dropWhile,St.fill=Vc.fill,St.filter=Dc.filter,St.flatMap=Dc.flatMap,St.flatMapDeep=Dc.flatMapDeep,St.flatMapDepth=Dc.flatMapDepth,St.flatten=Vc.flatten,St.flattenDeep=Vc.flattenDeep,St.flattenDepth=Vc.flattenDepth,St.flip=zc.flip,St.flow=Xc.flow,St.flowRight=Xc.flowRight,St.fromPairs=Vc.fromPairs,St.functions=Hc.functions,St.functionsIn=Hc.functionsIn,St.groupBy=Dc.groupBy,St.initial=Vc.initial,St.intersection=Vc.intersection,St.intersectionBy=Vc.intersectionBy,St.intersectionWith=Vc.intersectionWith,St.invert=Hc.invert,St.invertBy=Hc.invertBy,St.invokeMap=Dc.invokeMap,St.iteratee=Xc.iteratee,St.keyBy=Dc.keyBy,St.keys=He,St.keysIn=Hc.keysIn,St.map=Dc.map,St.mapKeys=Hc.mapKeys,St.mapValues=Hc.mapValues,St.matches=Xc.matches,St.matchesProperty=Xc.matchesProperty,St.memoize=zc.memoize,St.merge=Hc.merge,St.mergeWith=Hc.mergeWith,St.method=Xc.method,St.methodOf=Xc.methodOf,St.mixin=sh,St.negate=ol,St.nthArg=Xc.nthArg,St.omit=Hc.omit,St.omitBy=Hc.omitBy,St.once=zc.once,St.orderBy=Dc.orderBy,St.over=Xc.over,St.overArgs=zc.overArgs,St.overEvery=Xc.overEvery,St.overSome=Xc.overSome,St.partial=zc.partial,St.partialRight=zc.partialRight,St.partition=Dc.partition,St.pick=Hc.pick,St.pickBy=Hc.pickBy,St.property=Xc.property,St.propertyOf=Xc.propertyOf,St.pull=Vc.pull,St.pullAll=Vc.pullAll,St.pullAllBy=Vc.pullAllBy,St.pullAllWith=Vc.pullAllWith,St.pullAt=Vc.pullAt,St.range=Xc.range,St.rangeRight=Xc.rangeRight,St.rearg=zc.rearg,St.reject=Dc.reject,St.remove=Vc.remove,St.rest=zc.rest,St.reverse=Vc.reverse,St.sampleSize=Dc.sampleSize,St.set=Hc.set,St.setWith=Hc.setWith,St.shuffle=Dc.shuffle,St.slice=Vc.slice,St.sortBy=Dc.sortBy,St.sortedUniq=Vc.sortedUniq,St.sortedUniqBy=Vc.sortedUniqBy,St.split=Jc.split,St.spread=zc.spread,St.tail=Vc.tail,St.take=Vc.take,St.takeRight=Vc.takeRight,St.takeRightWhile=Vc.takeRightWhile,St.takeWhile=Vc.takeWhile,St.tap=$c.tap,St.throttle=zc.throttle,St.thru=nc,St.toArray=Fc.toArray,St.toPairs=Hc.toPairs,St.toPairsIn=Hc.toPairsIn,St.toPath=Xc.toPath,St.toPlainObject=Fc.toPlainObject,St.transform=Hc.transform,St.unary=zc.unary,St.union=Vc.union,St.unionBy=Vc.unionBy,St.unionWith=Vc.unionWith,St.uniq=Vc.uniq,St.uniqBy=Vc.uniqBy,St.uniqWith=Vc.uniqWith,St.unset=Hc.unset,St.unzip=Vc.unzip,St.unzipWith=Vc.unzipWith,St.update=Hc.update,St.updateWith=Hc.updateWith,St.values=Hc.values,St.valuesIn=Hc.valuesIn,St.without=Vc.without,St.words=Jc.words,St.wrap=zc.wrap,St.xor=Vc.xor,St.xorBy=Vc.xorBy,St.xorWith=Vc.xorWith,St.zip=Vc.zip,St.zipObject=Vc.zipObject,St.zipObjectDeep=Vc.zipObjectDeep,St.zipWith=Vc.zipWith,St.entries=Hc.toPairs,St.entriesIn=Hc.toPairsIn,St.extend=Hc.assignIn,St.extendWith=Hc.assignInWith,sh(St,St),St.add=Gc.add,St.attempt=Xc.attempt,St.camelCase=Jc.camelCase,St.capitalize=Jc.capitalize,St.ceil=Gc.ceil,St.clamp=Uc,St.clone=Fc.clone,St.cloneDeep=Fc.cloneDeep,St.cloneDeepWith=Fc.cloneDeepWith,St.cloneWith=Fc.cloneWith,St.conformsTo=Fc.conformsTo,St.deburr=Jc.deburr,St.defaultTo=Xc.defaultTo,St.divide=Gc.divide,St.endsWith=Jc.endsWith,St.eq=Fc.eq,St.escape=Jc.escape,St.escapeRegExp=Jc.escapeRegExp,St.every=Dc.every,St.find=Dc.find,St.findIndex=Vc.findIndex,St.findKey=Hc.findKey,St.findLast=Dc.findLast,St.findLastIndex=Vc.findLastIndex,St.findLastKey=Hc.findLastKey,St.floor=Gc.floor,St.forEach=Dc.forEach,St.forEachRight=Dc.forEachRight,St.forIn=Hc.forIn,St.forInRight=Hc.forInRight,St.forOwn=Hc.forOwn,St.forOwnRight=Hc.forOwnRight,St.get=Hc.get,St.gt=Fc.gt,St.gte=Fc.gte,St.has=Hc.has,St.hasIn=Hc.hasIn,St.head=Vc.head,St.identity=U,St.includes=Dc.includes,St.indexOf=Vc.indexOf,St.inRange=qc,St.invoke=Hc.invoke,St.isArguments=Fc.isArguments,St.isArray=C,St.isArrayBuffer=Fc.isArrayBuffer,St.isArrayLike=Fc.isArrayLike,St.isArrayLikeObject=Fc.isArrayLikeObject,St.isBoolean=Fc.isBoolean,St.isBuffer=Fc.isBuffer,St.isDate=Fc.isDate,St.isElement=Fc.isElement,St.isEmpty=Fc.isEmpty,St.isEqual=Fc.isEqual,St.isEqualWith=Fc.isEqualWith,St.isError=Fc.isError,St.isFinite=Fc.isFinite,St.isFunction=Fc.isFunction,St.isInteger=Fc.isInteger,St.isLength=Fc.isLength,St.isMap=Fc.isMap,St.isMatch=Fc.isMatch,St.isMatchWith=Fc.isMatchWith,St.isNaN=Fc.isNaN,St.isNative=Fc.isNative,St.isNil=Fc.isNil,St.isNull=Fc.isNull,St.isNumber=Fc.isNumber,St.isObject=B,St.isObjectLike=Fc.isObjectLike,St.isPlainObject=Fc.isPlainObject,St.isRegExp=Fc.isRegExp,St.isSafeInteger=Fc.isSafeInteger,St.isSet=Fc.isSet,St.isString=Fc.isString,St.isSymbol=Fc.isSymbol,St.isTypedArray=Fc.isTypedArray,St.isUndefined=Fc.isUndefined,St.isWeakMap=Fc.isWeakMap,St.isWeakSet=Fc.isWeakSet,St.join=Vc.join,St.kebabCase=Jc.kebabCase,St.last=os,St.lastIndexOf=Vc.lastIndexOf,St.lowerCase=Jc.lowerCase,St.lowerFirst=Jc.lowerFirst,St.lt=Fc.lt,St.lte=Fc.lte,St.max=Gc.max,St.maxBy=Gc.maxBy,St.mean=Gc.mean,St.meanBy=Gc.meanBy,St.min=Gc.min,St.minBy=Gc.minBy,St.stubArray=Xc.stubArray,St.stubFalse=Xc.stubFalse,St.stubObject=Xc.stubObject,St.stubString=Xc.stubString,St.stubTrue=Xc.stubTrue,St.multiply=Gc.multiply,St.nth=Vc.nth,St.noop=Xc.noop,St.now=Rc,St.pad=Jc.pad,St.padEnd=Jc.padEnd,St.padStart=Jc.padStart,St.parseInt=Jc.parseInt,St.random=Wc,St.reduce=Dc.reduce,St.reduceRight=Dc.reduceRight,St.repeat=Jc.repeat,St.replace=Jc.replace,St.result=Hc.result,St.round=Gc.round,St.sample=Dc.sample,St.size=Dc.size,St.snakeCase=Jc.snakeCase,St.some=Dc.some,St.sortedIndex=Vc.sortedIndex,St.sortedIndexBy=Vc.sortedIndexBy,St.sortedIndexOf=Vc.sortedIndexOf,St.sortedLastIndex=Vc.sortedLastIndex,St.sortedLastIndexBy=Vc.sortedLastIndexBy,St.sortedLastIndexOf=Vc.sortedLastIndexOf,St.startCase=Jc.startCase,St.startsWith=Jc.startsWith,St.subtract=Gc.subtract,St.sum=Gc.sum,St.sumBy=Gc.sumBy,St.template=Jc.template,St.times=Xc.times,St.toFinite=Fc.toFinite,St.toInteger=G,St.toLength=Fc.toLength,St.toLower=Jc.toLower,St.toNumber=Fc.toNumber,St.toSafeInteger=Fc.toSafeInteger,St.toString=Fc.toString,St.toUpper=Jc.toUpper,St.trim=Jc.trim,St.trimEnd=Jc.trimEnd,St.trimStart=Jc.trimStart,St.truncate=Jc.truncate,St.unescape=Jc.unescape,St.uniqueId=Xc.uniqueId,St.upperCase=Jc.upperCase,St.upperFirst=Jc.upperFirst,St.each=Dc.forEach,St.eachRight=Dc.forEachRight,St.first=Vc.head,sh(St,(Qc={},ko(St,(function(t,e){nh.call(St.prototype,e)||(Qc[e]=t)})),Qc),{chain:!1}),St.VERSION="4.17.21",(St.templateSettings=Jc.templateSettings).imports._=St,Rt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){St[t].placeholder=St})),Rt(["drop","take"],(function(t,e){vt.prototype[t]=function(n){n=void 0===n?1:ih(G(n),0);var r=this.__filtered__&&!e?new vt(this):this.clone();return r.__filtered__?r.__takeCount__=oh(n,r.__takeCount__):r.__views__.push({size:oh(n,th),type:t+(r.__dir__<0?"Right":"")}),r},vt.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Rt(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;vt.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Co(t),type:n}),e.__filtered__=e.__filtered__||r,e}})),Rt(["head","last"],(function(t,e){var n="take"+(e?"Right":"");vt.prototype[t]=function(){return this[n](1).value()[0]}})),Rt(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");vt.prototype[t]=function(){return this.__filtered__?new vt(this):this[n](1)}})),vt.prototype.compact=function(){return this.filter(U)},vt.prototype.find=function(t){return this.filter(t).head()},vt.prototype.findLast=function(t){return this.reverse().find(t)},vt.prototype.invokeMap=de((function(t,e){return"function"==typeof t?new vt(this):this.map((function(n){return Aa(n,t,e)}))})),vt.prototype.reject=function(t){return this.filter(ol(Co(t)))},vt.prototype.slice=function(t,e){t=G(t);var n=this;return n.__filtered__&&(t>0||e<0)?new vt(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=(e=G(e))<0?n.dropRight(-e):n.take(e-t)),n)},vt.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},vt.prototype.toArray=function(){return this.take(th)},ko(vt.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=St[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(St.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,a=e instanceof vt,l=s[0],u=a||C(e),c=function(t){var e=i.apply(St,En([t],s));return r&&h?e[0]:e};u&&n&&"function"==typeof l&&1!=l.length&&(a=u=!1);var h=this.__chain__,p=!!this.__actions__.length,f=o&&!h,d=a&&!p;if(!o&&u){e=d?e:new vt(this);var g=t.apply(e,s);return g.__actions__.push({func:nc,args:[c],thisArg:void 0}),new At(g,h)}return f&&d?t.apply(this,s):(g=this.thru(c),f?r?g.value()[0]:g.value():g)})})),Rt(["pop","push","shift","sort","splice","unshift"],(function(t){var e=eh[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);St.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(C(i)?i:[],t)}return this[n]((function(n){return e.apply(C(n)?n:[],t)}))}})),ko(vt.prototype,(function(t,e){var n=St[e];if(n){var r=n.name+"";nh.call(wt,r)||(wt[r]=[]),wt[r].push({name:e,func:n})}})),wt[te(void 0,2).name]=[{name:"wrapper",func:void 0}],vt.prototype.clone=function(){var t=new vt(this.__wrapped__);return t.__actions__=Ct(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ct(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ct(this.__views__),t},vt.prototype.reverse=function(){if(this.__filtered__){var t=new vt(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},vt.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=C(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Zc(e,t+s);break;case"takeRight":t=Yc(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=o.end,l=a-s,u=r?a:s-1,c=this.__iteratees__,h=c.length,p=0,f=Kc(l,this.__takeCount__);if(!n||!r&&i==l&&f==l)return oc(t,this.__actions__);var d=[];t:for(;l--&&p<f;){for(var g=-1,y=t[u+=e];++g<h;){var v=c[g],m=v.iteratee,b=v.type,w=m(y);if(2==b)y=w;else if(!w){if(1==b)continue t;break t}}d[p++]=y}return d},St.prototype.at=$c.at,St.prototype.chain=$c.wrapperChain,St.prototype.commit=$c.commit,St.prototype.next=$c.next,St.prototype.plant=$c.plant,St.prototype.reverse=$c.reverse,St.prototype.toJSON=St.prototype.valueOf=St.prototype.value=$c.value,St.prototype.first=St.prototype.head,rh&&(St.prototype[rh]=$c.toIterator);var ph=Object.freeze({__proto__:null,debounce:Fo,apply:ah,call:lh,isAsyncLike:uh,isAsync:ch,toAsyncBoolean:hh,toDeferredBoolean:function(...t){const e=hh(t);return"boolean"==typeof e?Promise.resolve(e):e}});function fh(t,e){const n=[];for(let r=0;r<t.length;r+=2){const i=ah(t[r],t[r+1],Array.isArray(e)?e:[e]);n.push(i)}return hh(n)}class dh{constructor(){this.listeners={}}on(t,e,n){if(null==e)return this;this.listeners[t]||(this.listeners[t]=[]);return this.listeners[t].push(e,n),this}once(t,e,n){const r=(...i)=>(this.off(t,r),fh([e,n],i));return this.on(t,r,this)}off(t,e,n){if(!(t||e||n))return this.listeners={},this;const r=this.listeners;return(t?[t]:Object.keys(r)).forEach((t=>{const i=r[t];if(i)if(e||n)for(let t=i.length-2;t>=0;t-=2)e&&i[t]!==e||n&&i[t+1]!==n||i.splice(t,2);else delete r[t]})),this}trigger(t,...e){let n=!0;if("*"!==t){const r=this.listeners[t];null!=r&&(n=fh([...r],e))}const r=this.listeners["*"];return null!=r?hh([n,fh([...r],[t,...e])]):n}emit(t,...e){return this.trigger(t,...e)}}function gh(t,...e){e.forEach((e=>{Object.getOwnPropertyNames(e.prototype).forEach((n=>{"constructor"!==n&&Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype,n))}))}))}const yh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])};function vh(t,e){function n(){this.constructor=t}yh(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}const mh=/^\s*class\s+/.test(`${class{}}`)||/^\s*class\s*\{/.test(`${class{}}`);function bh(t,e){let n;return mh?n=class extends e{}:(n=function(){return e.apply(this,arguments)},vh(n,e)),Object.defineProperty(n,"name",{value:t}),n}function wh(t,e){return null!=t?t:e}function xh(t){return"__proto__"===t}function Ph(t,e,n="/"){let r;const i=Array.isArray(e)?e:e.split(n);if(i.length)for(r=t;i.length;){const t=i.shift();if(Object(r)!==r||!t||!(t in r))return;r=r[t]}return r}function Ah(t,e,n,r="/"){const i=Array.isArray(e)?e:e.split(r),o=i.pop();if(o&&!xh(o)){let e=t;i.forEach((t=>{xh(t)||(null==e[t]&&(e[t]={}),e=e[t])})),e[o]=n}return t}function Ch(t,e,n="/"){const r=Array.isArray(e)?e.slice():e.split(n),i=r.pop();if(i)if(r.length>0){const e=Ph(t,r);e&&delete e[i]}else delete t[i];return t}var Eh=Object.freeze({__proto__:null,ensure:wh,getValue:function(t,e,n){const r=null!=t?t[e]:null;return void 0!==n?wh(r,n):r},getNumber:function(t,e,n){let r=null!=t?t[e]:null;return null==r?n:(r=+r,Number.isNaN(r)||!Number.isFinite(r)?n:r)},getBoolean:function(t,e,n){const r=null!=t?t[e]:null;return null==r?n:!!r},isMaliciousProp:xh,getByPath:Ph,setByPath:Ah,unsetByPath:Ch,flatten:function t(e,n="/",r){const i={};Object.keys(e).forEach((o=>{const s=e[o];let a="object"==typeof s||Array.isArray(s);if(a&&r&&r(s)&&(a=!1),a){const e=t(s,n,r);Object.keys(e).forEach((t=>{i[o+n+t]=e[t]}))}else i[o]=s}));for(const t in e)Object.prototype.hasOwnProperty.call(e,t);return i},has:ea,pick:Xl,merge:tl,isEqual:_a,isEmpty:Na,isObject:B,isPlainObject:Dn,clone:Xi,cloneDeep:Yi,defaults:qo,defaultsDeep:Ko,applyMixins:gh,inherit:vh,createClass:bh});class Mh extends dh{}!function(t){t.dispose=a.dispose}(Mh||(Mh={})),gh(Mh,a);var Sh=Object.freeze({__proto__:null,uniq:wc,union:vc,sortedIndex:Iu,sortedIndexBy:ju,sortBy:Ou,groupBy:Js,difference:is,max:Za});const Th=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},kh=Th((t=>t.replace(/\B([A-Z])/g,"-$1").toLowerCase())),Oh=Th((t=>Ru(qr(t)).replace(/ /g,""))),Nh=Th((t=>Sc(t).replace(/ /g,"_"))),_h=Th((t=>Wa(t).replace(/ /g,"."))),Lh=Th((t=>Wa(t).replace(/ /g,"/"))),Bh=Th((t=>ur(Wa(t)))),Ih=Th((t=>Ru(qr(t))));function jh(t){let e=2166136261,n=!1,r=t;for(let t=0,i=r.length;t<i;t+=1){let i=r.charCodeAt(t);i>127&&!n&&(r=unescape(encodeURIComponent(r)),i=r.charCodeAt(t),n=!0),e^=i,e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}return e>>>0}function Vh(){let t="";const e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";for(let n=0,r=e.length;n<r;n+=1){const r=e[n],i=16*Math.random()|0;t+=("x"===r?i:"y"===r?3&i|8:r).toString(16)}return t}function Dh(t,e,n){const r=Math.min(2,Math.floor(.34*t.length));let i,o=Math.floor(.4*t.length)+1,s=!1;const a=t.toLowerCase();for(const l of e){const e=n(l);if(void 0!==e&&Math.abs(e.length-a.length)<=r){const n=e.toLowerCase();if(n===a){if(e===t)continue;return l}if(s)continue;if(e.length<3)continue;const r=Rh(a,n,o-1);if(void 0===r)continue;r<3?(s=!0,i=l):(o=r,i=l)}}return i}function Rh(t,e,n){let r=new Array(e.length+1),i=new Array(e.length+1);const o=n+1;for(let t=0;t<=e.length;t+=1)r[t]=t;for(let s=1;s<=t.length;s+=1){const a=t.charCodeAt(s-1),l=s>n?s-n:1,u=e.length>n+s?n+s:e.length;i[0]=s;let c=s;for(let t=1;t<l;t+=1)i[t]=o;for(let t=l;t<=u;t+=1){const n=a===e.charCodeAt(t-1)?r[t-1]:Math.min(r[t]+1,i[t-1]+1,r[t-1]+2);i[t]=n,c=Math.min(c,n)}for(let t=u+1;t<=e.length;t+=1)i[t]=o;if(c>n)return;const h=r;r=i,i=h}const s=r[e.length];return s>n?void 0:s}var zh=Object.freeze({__proto__:null,uniqueId:Pc,lowerFirst:Ha,upperFirst:ur,camelCase:qr,kebabCase:kh,pascalCase:Oh,constantCase:Nh,dotCase:_h,pathCase:Lh,sentenceCase:Bh,titleCase:Ih,hashcode:jh,uuid:Vh,getSpellingSuggestion:Dh});function Fh(t){return"string"==typeof t&&"%"===t.slice(-1)}function Gh(t,e){if(null==t)return 0;let n;if("string"==typeof t){if(n=parseFloat(t),Fh(t)&&(n/=100,Number.isFinite(n)))return n*e}else n=t;return Number.isFinite(n)?n>0&&n<1?n*e:n:0}function Uh(t){if("object"==typeof t){let e=0,n=0,r=0,i=0;return null!=t.vertical&&Number.isFinite(t.vertical)&&(n=i=t.vertical),null!=t.horizontal&&Number.isFinite(t.horizontal)&&(r=e=t.horizontal),null!=t.left&&Number.isFinite(t.left)&&(e=t.left),null!=t.top&&Number.isFinite(t.top)&&(n=t.top),null!=t.right&&Number.isFinite(t.right)&&(r=t.right),null!=t.bottom&&Number.isFinite(t.bottom)&&(i=t.bottom),{top:n,right:r,bottom:i,left:e}}let e=0;return null!=t&&Number.isFinite(t)&&(e=t),{top:e,right:e,bottom:e,left:e}}var qh=Object.freeze({__proto__:null,mod:function(t,e){return(t%e+e)%e},random:function(t,e){if(null==e)e=null==t?1:t,t=0;else if(e<t){const n=t;t=e,e=n}return Math.floor(Math.random()*(e-t+1)+t)},isPercentage:Fh,normalizePercentage:Gh,parseCssNumeric:function(t,e){const n=parseFloat(t);if(Number.isNaN(n))return null;let r;if(null==e)r="[A-Za-z]*";else if(Array.isArray(e)){if(0===e.length)return null;r=e.join("|")}else"string"==typeof e&&(r=e);const i=function(e){const n=new RegExp(`(?:\\d+(?:\\.\\d+)*)(${e})$`).exec(t);return n?n[1]:null}(r);return null===i?null:{unit:i,value:n}},normalizeSides:Uh,isNumber:Ia,clamp:Qr});let Wh=!1,Hh=!1,$h=!1,Jh=!1,Xh=!1,Yh=!1,Zh=!1,Kh=!1,Qh=!1,tp=!1,ep=!1,np=!1,rp=!1,ip=!1,op=!1,sp=!1;if("object"==typeof navigator){const t=navigator.userAgent;Wh=t.indexOf("Macintosh")>=0,Hh=!!t.match(/(iPad|iPhone|iPod)/g),$h=t.indexOf("Windows")>=0,Jh=t.indexOf("MSIE")>=0,Xh=!!t.match(/Trident\/7\./),Yh=!!t.match(/Edge\//),Zh=t.indexOf("Mozilla/")>=0&&t.indexOf("MSIE")<0&&t.indexOf("Edge/")<0,Qh=t.indexOf("Chrome/")>=0&&t.indexOf("Edge/")<0,tp=t.indexOf("Opera/")>=0||t.indexOf("OPR/")>=0,ep=t.indexOf("Firefox/")>=0,np=t.indexOf("AppleWebKit/")>=0&&t.indexOf("Chrome/")<0&&t.indexOf("Edge/")<0,"object"==typeof document&&(sp=!document.createElementNS||"[object SVGForeignObjectElement]"!=`${document.createElementNS("http://www.w3.org/2000/svg","foreignObject")}`||t.indexOf("Opera/")>=0)}if("object"==typeof window&&(Kh=null!=window.chrome&&null!=window.chrome.app&&null!=window.chrome.app.runtime,ip=null!=window.PointerEvent&&!Wh),"object"==typeof document){rp="ontouchstart"in document.documentElement;try{const t=Object.defineProperty({},"passive",{get(){op=!0}}),e=document.createElement("div");e.addEventListener&&e.addEventListener("click",(()=>{}),t)}catch(t){}}var ap;t.Platform=void 0,(ap=t.Platform||(t.Platform={})).IS_MAC=Wh,ap.IS_IOS=Hh,ap.IS_WINDOWS=$h,ap.IS_IE=Jh,ap.IS_IE11=Xh,ap.IS_EDGE=Yh,ap.IS_NETSCAPE=Zh,ap.IS_CHROME_APP=Kh,ap.IS_CHROME=Qh,ap.IS_OPERA=tp,ap.IS_FIREFOX=ep,ap.IS_SAFARI=np,ap.SUPPORT_TOUCH=rp,ap.SUPPORT_POINTER=ip,ap.SUPPORT_PASSIVE=op,ap.NO_FOREIGNOBJECT=sp,ap.SUPPORT_FOREIGNOBJECT=!ap.NO_FOREIGNOBJECT,function(t){function e(){const t=window.module;return null!=t&&null!=t.hot&&null!=t.hot.status?t.hot.status():"unkonwn"}t.getHMRStatus=e,t.isApplyingHMR=function(){return"apply"===e()};const n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};t.isEventSupported=function(t){const e=document.createElement(n[t]||"div"),r=`on${t}`;let i=r in e;return i||(e.setAttribute(r,"return;"),i="function"==typeof e[r]),i}}(t.Platform||(t.Platform={}));const lp=/[\t\r\n\f]/g,up=/\S+/g,cp=t=>` ${t} `;function hp(t){return t&&t.getAttribute&&t.getAttribute("class")||""}function pp(t,e){if(null==t||null==e)return!1;const n=cp(hp(t)),r=cp(e);return 1===t.nodeType&&n.replace(lp," ").includes(r)}function fp(t,e){if(null!=t&&null!=e){if("function"==typeof e)return fp(t,e(hp(t)));if("string"==typeof e&&1===t.nodeType){const n=e.match(up)||[],r=cp(hp(t)).replace(lp," ");let i=n.reduce(((t,e)=>t.indexOf(cp(e))<0?`${t}${e} `:t),r);i=i.trim(),r!==i&&t.setAttribute("class",i)}}}function dp(t,e){if(null!=t){if("function"==typeof e)return dp(t,e(hp(t)));if((!e||"string"==typeof e)&&1===t.nodeType){const n=(e||"").match(up)||[],r=cp(hp(t)).replace(lp," ");let i=n.reduce(((t,e)=>{const n=cp(e);return t.indexOf(n)>-1?t.replace(n," "):t}),r);i=e?i.trim():"",r!==i&&t.setAttribute("class",i)}}}function gp(t,e,n){if(null!=t&&null!=e)if(null==n||"string"!=typeof e){if("function"==typeof e)return gp(t,e(hp(t),n),n);if("string"==typeof e){(e.match(up)||[]).forEach((e=>{pp(t,e)?dp(t,e):fp(t,e)}))}}else n?fp(t,e):dp(t,e)}let yp=0;function vp(){return yp+=1,`v${yp}`}function mp(t){return null!=t.id&&""!==t.id||(t.id=vp()),t.id}function bp(t){return null!=t&&("function"==typeof t.getScreenCTM&&t instanceof SVGElement)}const wp={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},xp="1.1";function Pp(t,e=document){return e.createElement(t)}function Ap(t,e=wp.xhtml,n=document){return n.createElementNS(e,t)}function Cp(t,e=document){return Ap(t,wp.svg,e)}function Ep(t){if(t){const e=`<svg xmlns="${wp.svg}" xmlns:xlink="${wp.xlink}" version="${xp}">${t}</svg>`,{documentElement:n}=Mp(e,{async:!1});return n}const e=document.createElementNS(wp.svg,"svg");return e.setAttributeNS(wp.xmlns,"xmlns:xlink",wp.xlink),e.setAttribute("version",xp),e}function Mp(t,e={}){let n;try{const r=new DOMParser;if(null!=e.async){r.async=e.async}n=r.parseFromString(t,e.mimeType||"text/xml")}catch(t){n=void 0}if(!n||n.getElementsByTagName("parsererror").length)throw new Error(`Invalid XML: ${t}`);return n}function Sp(t,e=!0){const n=t.nodeName;return e?n.toLowerCase():n.toUpperCase()}function Tp(t){let e=0,n=t.previousSibling;for(;n;)1===n.nodeType&&(e+=1),n=n.previousSibling;return e}function kp(t,e){return t.querySelectorAll(e)}function Op(t,e){return t.querySelector(e)}function Np(t,e,n){const r=t.ownerSVGElement;let i=t.parentNode;for(;i&&i!==n&&i!==r;){if(pp(i,e))return i;i=i.parentNode}return null}function _p(t,e){const n=e&&e.parentNode;return t===n||!!(n&&1===n.nodeType&&16&t.compareDocumentPosition(n))}function Lp(t){if(t){(Array.isArray(t)?t:[t]).forEach((t=>{t.parentNode&&t.parentNode.removeChild(t)}))}}function Bp(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Ip(t,e){(Array.isArray(e)?e:[e]).forEach((e=>{null!=e&&t.appendChild(e)}))}function jp(t,e){const n=t.firstChild;return n?Vp(n,e):Ip(t,e)}function Vp(t,e){const n=t.parentNode;if(n){(Array.isArray(e)?e:[e]).forEach((e=>{null!=e&&n.insertBefore(e,t)}))}}function Dp(t,e){null!=e&&e.appendChild(t)}function Rp(t){return!!t&&1===t.nodeType}function zp(t){try{return t instanceof HTMLElement}catch(e){return"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}}const Fp=["viewBox","attributeName","attributeType","repeatCount"];function Gp(t,e){return t.getAttribute(e)}function Up(t,e){const n=$p(e);n.ns?t.hasAttributeNS(n.ns,n.local)&&t.removeAttributeNS(n.ns,n.local):t.hasAttribute(e)&&t.removeAttribute(e)}function qp(t,e,n){if(null==n)return Up(t,e);const r=$p(e);r.ns&&"string"==typeof n?t.setAttributeNS(r.ns,e,n):"id"===e?t.id=`${n}`:t.setAttribute(e,`${n}`)}function Wp(t,e){Object.keys(e).forEach((n=>{qp(t,n,e[n])}))}function Hp(t,e,n){if(null==e){const e=t.attributes,n={};for(let t=0;t<e.length;t+=1)n[e[t].name]=e[t].value;return n}if("string"==typeof e&&void 0===n)return t.getAttribute(e);"object"==typeof e?Wp(t,e):qp(t,e,n)}function $p(t){if(-1!==t.indexOf(":")){const e=t.split(":");return{ns:wp[e[0]],local:e[1]}}return{ns:null,local:t}}function Jp(t){const e={};return Object.keys(t).forEach((n=>{const r=Fp.includes(n)?n:kh(n);e[r]=t[n]})),e}function Xp(t){const e={};return t.split(";").forEach((t=>{const n=t.trim();if(n){const t=n.split("=");t.length&&(e[t[0].trim()]=t[1]?t[1].trim():"")}})),e}function Yp(t,e){return Object.keys(e).forEach((n=>{if("class"===n)t[n]=t[n]?`${t[n]} ${e[n]}`:e[n];else if("style"===n){const r="object"==typeof t[n],i="object"==typeof e[n];let o,s;r&&i?(o=t[n],s=e[n]):r?(o=t[n],s=Xp(e[n])):i?(o=Xp(t[n]),s=e[n]):(o=Xp(t[n]),s=Xp(e[n])),t[n]=Yp(o,s)}else t[n]=e[n]})),t}function Zp(t,e,n={}){const r=n.offset||0,i=[],o=[];let s,a,l=null;for(let u=0;u<t.length;u+=1){s=o[u]=t[u];for(let i=0,a=e.length;i<a;i+=1){const a=e[i],l=a.start+r,c=a.end+r;u>=l&&u<c&&("string"==typeof s?s=o[u]={t:t[u],attrs:a.attrs}:s.attrs=Yp(Yp({},s.attrs),a.attrs),n.includeAnnotationIndices&&(null==s.annotations&&(s.annotations=[]),s.annotations.push(i)))}a=o[u-1],a?B(s)&&B(a)?JSON.stringify(s.attrs)===JSON.stringify(a.attrs)?l.t+=s.t:(i.push(l),l=s):B(s)||B(a)?(i.push(l),l=s):l=(l||"")+s:l=s}return null!=l&&i.push(l),i}function Kp(t){return t.replace(/ /g," ")}var Qp=Object.freeze({__proto__:null,annotate:Zp,findAnnotationsAtIndex:function(t,e){return t?t.filter((t=>t.start<e&&e<=t.end)):[]},findAnnotationsBetweenIndexes:function(t,e,n){return t?t.filter((t=>e>=t.start&&e<t.end||n>t.start&&n<=t.end||t.start>=e&&t.end<n)):[]},shiftAnnotations:function(t,e,n){return t&&t.forEach((t=>{t.start<e&&t.end>=e?t.end+=n:t.start>=e&&(t.start+=n,t.end+=n)})),t},sanitize:Kp});let tf;t.DataUri=void 0,function(t){function e(t){const e="data:";return t.substr(0,e.length)===e}function n(t){let e=t.replace(/\s/g,"");e=decodeURIComponent(e);const n=e.indexOf(","),r=e.slice(0,n),i=r.split(":")[1].split(";")[0],o=e.slice(n+1);let s;s=r.indexOf("base64")>=0?atob(o):unescape(encodeURIComponent(o));const a=new Uint8Array(s.length);for(let t=0;t<s.length;t+=1)a[t]=s.charCodeAt(t);return new Blob([a],{type:i})}function r(t,e){const n=window.navigator.msSaveBlob;if(n)n(t,e);else{const n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)}}function i(t){const e=parseFloat(t);return Number.isNaN(e)?null:e}t.isDataUrl=e,t.imageToDataUri=function(t,n){if(!t||e(t))return void setTimeout((()=>n(null,t)));const r=()=>{n(new Error(`Failed to load image: ${t}`))},i=window.FileReader?t=>{if(200===t.status){const e=new FileReader;e.onload=t=>{const e=t.target.result;n(null,e)},e.onerror=r,e.readAsDataURL(t.response)}else r()}:e=>{if(200===e.status){let r=t.split(".").pop()||"png";"svg"===r&&(r="svg+xml");const i=`data:image/${r};base64,`,o=new Uint8Array(e.response),s=i+btoa((t=>{const e=[];for(let n=0;n<t.length;n+=32768)e.push(String.fromCharCode.apply(null,t.subarray(n,n+32768)));return e.join("")})(o));n(null,s)}else r()},o=new XMLHttpRequest;o.responseType=window.FileReader?"blob":"arraybuffer",o.open("GET",t,!0),o.addEventListener("error",r),o.addEventListener("load",(()=>i(o))),o.send()},t.dataUriToBlob=n,t.downloadBlob=r,t.downloadDataUri=function(t,e){r(n(t),e)},t.svgToDataUrl=function(t,e={}){let n=null;const r=e=>(null==n&&(n=function(t){const e=t.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return e&&e[2]?e[2].replace(/\s+/," ").split(" "):null}(t)),null!=n?i(n[e]):null),o=e=>{const n=t.match(e);return n&&n[2]?i(n[2]):null};let s=e.width;if(null==s&&(s=o(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),null==s&&(s=r(2)),null==s)throw new Error("Can not parse width from svg string");let a=e.height;if(null==a&&(a=o(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),null==a&&(a=r(3)),null==a)throw new Error("Can not parse height from svg string");return`data:image/svg+xml,${encodeURIComponent(t).replace(/'/g,"%27").replace(/"/g,"%22")}`}}(t.DataUri||(t.DataUri={}));const ef={px:t=>t,mm:t=>tf*t,cm:t=>tf*t*10,in:t=>tf*t*25.4,pt:t=>tf*(25.4*t/72),pc:t=>tf*(25.4*t/6)};t.Unit=void 0,function(t){function e(t,e,n){const r=document.createElement("div"),i=r.style;i.display="inline-block",i.position="absolute",i.left="-15000px",i.top="-15000px",i.width=t+(n||"px"),i.height=e+(n||"px"),document.body.appendChild(r);const o=r.getBoundingClientRect(),s={width:o.width||0,height:o.height||0};return document.body.removeChild(r),s}t.measure=e,t.toPx=function(t,n){null==tf&&(tf=e("1","1","mm").width);const r=n?ef[n]:null;return r?r(t):t}}(t.Unit||(t.Unit={}));const nf=/-(.)/g;const rf={},of=["webkit","ms","moz","o"],sf=document?document.createElement("div").style:{};function af(t){const e=t.replace(nf,((t,e)=>e.toUpperCase()));if(null==rf[e]){const t=e.charAt(0).toUpperCase()+e.slice(1);rf[e]=e in sf?e:function(t){for(let e=0;e<of.length;e+=1){const n=of[e]+t;if(n in sf)return n}return null}(t)}return rf[e]}function lf(t,e){const n=t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):window.getComputedStyle(t,null);return n&&e?n.getPropertyValue(e)||n[e]:n}const uf=function(){const t=document;return t.selection?function(){t.selection.empty()}:window.getSelection?function(){const t=window.getSelection();t&&(t.empty?t.empty():t.removeAllRanges&&t.removeAllRanges())}:function(){}}(),cf={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function hf(t){return/^--/.test(t)}function pf(t,e,n){const r=window.getComputedStyle(t,null);return n?r.getPropertyValue(e)||void 0:r[e]||t.style[e]}function ff(t,e){return parseInt(pf(t,e),10)||0}function df(t,e,n){if("string"!=typeof e)for(const n in e)df(t,n,e[n]);else{const r=hf(e);if(r||(e=af(e)),void 0===n)return pf(t,e,r);r||(n=function(t,e){return cf[t]||"number"!=typeof e?e:`${e}px`}(e,n));const i=t.style;r?i.setProperty(e,n):i[e]=n}}const gf=new WeakMap;function yf(t,e){const n=qr(e),r=gf.get(t);if(r)return r[n]}function vf(t,e,n){const r=qr(e),i=gf.get(t);i?i[r]=n:gf.set(t,{[r]:n})}function mf(t,e,n){if(!e){const e={};return Object.keys(gf).forEach((n=>{e[n]=yf(t,n)})),e}if("string"==typeof e)return void 0===n?yf(t,e):void vf(t,e,n);for(const n in e)mf(t,n,e[n])}const bf={class:"className",contenteditable:"contentEditable",for:"htmlFor",readonly:"readOnly",maxlength:"maxLength",tabindex:"tabIndex",colspan:"colSpan",rowspan:"rowSpan",usemap:"useMap"};class wf{get[Symbol.toStringTag](){return wf.toStringTag}get type(){return this.node.nodeName}get id(){return this.node.id}set id(t){this.node.id=t}constructor(t,e,n){if(!t)throw new TypeError("Invalid element to create vector");let r;if(wf.isVector(t))r=t.node;else if("string"==typeof t)if("svg"===t.toLowerCase())r=Ep();else if("<"===t[0]){const e=Ep(t);r=document.importNode(e.firstChild,!0)}else r=document.createElementNS(wp.svg,t);else r=t;this.node=r,e&&this.setAttributes(e),n&&this.append(n)}transform(t,e){return null==t?id(this.node):(id(this.node,t,e),this)}translate(t,e=0,n={}){return null==t?od(this.node):(od(this.node,t,e,n),this)}rotate(t,e,n,r={}){return null==t?sd(this.node):(sd(this.node,t,e,n,r),this)}scale(t,e){return null==t?ad(this.node):(ad(this.node,t,e),this)}getTransformToElement(t){const e=wf.toNode(t);return ld(this.node,e)}removeAttribute(t){return Up(this.node,t),this}getAttribute(t){return Gp(this.node,t)}setAttribute(t,e){return qp(this.node,t,e),this}setAttributes(t){return Wp(this.node,t),this}attr(t,e){return null==t?Hp(this.node):"string"==typeof t&&void 0===e?Hp(this.node,t):("object"==typeof t?Hp(this.node,t):Hp(this.node,t,e),this)}svg(){return this.node instanceof SVGSVGElement?this:wf.create(this.node.ownerSVGElement)}defs(){const t=this.svg()||this,e=t.node.getElementsByTagName("defs")[0];return e?wf.create(e):wf.create("defs").appendTo(t)}text(t,e={}){return Ef(this.node,t,e),this}tagName(){return Sp(this.node)}clone(){return wf.create(this.node.cloneNode(!0))}remove(){return Lp(this.node),this}empty(){return Bp(this.node),this}append(t){return Ip(this.node,wf.toNodes(t)),this}appendTo(t){return Dp(this.node,wf.isVector(t)?t.node:t),this}prepend(t){return jp(this.node,wf.toNodes(t)),this}before(t){return Vp(this.node,wf.toNodes(t)),this}replace(t){return this.node.parentNode&&this.node.parentNode.replaceChild(wf.toNode(t),this.node),wf.create(t)}first(){return this.node.firstChild?wf.create(this.node.firstChild):null}last(){return this.node.lastChild?wf.create(this.node.lastChild):null}get(t){const e=this.node.childNodes[t];return e?wf.create(e):null}indexOf(t){return Array.prototype.slice.call(this.node.childNodes).indexOf(wf.toNode(t))}find(t){const e=[],n=kp(this.node,t);if(n)for(let t=0,r=n.length;t<r;t+=1)e.push(wf.create(n[t]));return e}findOne(t){const e=Op(this.node,t);return e?wf.create(e):null}findParentByClass(t,e){const n=Np(this.node,t,e);return n?wf.create(n):null}matches(t){const e=this.node;this.node.matches;const n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null;return n&&n.call(e,t)}contains(t){return _p(this.node,wf.isVector(t)?t.node:t)}wrap(t){const e=wf.create(t),n=this.node.parentNode;return null!=n&&n.insertBefore(e.node,this.node),e.append(this)}parent(t){let e=this;if(null==e.node.parentNode)return null;if(e=wf.create(e.node.parentNode),null==t)return e;do{if("string"==typeof t?e.matches(t):e instanceof t)return e}while(e=wf.create(e.node.parentNode));return e}children(){const t=this.node.childNodes,e=[];for(let n=0;n<t.length;n+=1){1===t[n].nodeType&&e.push(wf.create(t[n]))}return e}eachChild(t,e){const n=this.children();for(let r=0,i=n.length;r<i;r+=1)t.call(n[r],n[r],r,n),e&&n[r].eachChild(t,e);return this}index(){return Tp(this.node)}hasClass(t){return pp(this.node,t)}addClass(t){return fp(this.node,t),this}removeClass(t){return dp(this.node,t),this}toggleClass(t,e){return gp(this.node,t,e),this}toLocalPoint(t,e){return cd(this.node,t,e)}sample(t=1){return this.node instanceof SVGPathElement?Nf(this.node,t):[]}toPath(){return wf.create(Ff(this.node))}toPathData(){return Gf(this.node)}}!function(t){function e(e){if(null==e)return!1;if(e instanceof t)return!0;const n=e[Symbol.toStringTag],r=e;return(null==n||n===t.toStringTag)&&r.node instanceof SVGElement&&"function"==typeof r.sample&&"function"==typeof r.toPath}function n(e,n,r){return new t(e,n,r)}function r(t){return e(t)?t.node:t}t.toStringTag=`X6.${t.name}`,t.isVector=e,t.create=n,t.createVectors=function(t){if("<"===t[0]){const e=Ep(t),r=[];for(let t=0,i=e.childNodes.length;t<i;t+=1){const i=e.childNodes[t];r.push(n(document.importNode(i,!0)))}return r}return[n(t)]},t.toNode=r,t.toNodes=function(t){return Array.isArray(t)?t.map((t=>r(t))):[r(t)]}}(wf||(wf={}));const xf=document.createElement("canvas").getContext("2d");function Pf(t,e,n){const r=n.eol,i=n.baseSize,o=n.lineHeight;let s,a=0;const l={},u=e.length-1;for(let o=0;o<=u;o+=1){let l=e[o],c=null;if("object"==typeof l){const t=l.attrs,e=wf.create("tspan",t);s=e.node;let h=l.t;r&&o===u&&(h+=r),s.textContent=h;const p=t.class;p&&e.addClass(p),n.includeAnnotationIndices&&e.attr("annotations",l.annotations.join(",")),c=parseFloat(t["font-size"]),void 0===c&&(c=i),c&&c>a&&(a=c)}else r&&o===u&&(l+=r),s=document.createTextNode(l||" "),i&&i>a&&(a=i);t.appendChild(s)}return a&&(l.maxFontSize=a),o?l.lineHeight=o:a&&(l.lineHeight=1.2*a),l}const Af=/em$/;function Cf(t,e){const n=parseFloat(t);return Af.test(t)?n*e:n}function Ef(t,e,n={}){e=Kp(e);const r=n.eol;let i=n.textPath;const o=n.textVerticalAnchor,s="middle"===o||"bottom"===o||"top"===o;let a=n.x;void 0===a&&(a=t.getAttribute("x")||0);const l=n.includeAnnotationIndices;let u=n.annotations;u&&!Array.isArray(u)&&(u=[u]);const c=n.lineHeight,h="auto"===c,p=h?"1.5em":c||"1em";Bp(t),Hp(t,{"xml:space":"preserve",display:e||n.displayEmpty?null:"none"});const f=Hp(t,"font-size");let d,g,y=parseFloat(f);y||(y=16,!s&&!u||f||Hp(t,"font-size",`${y}`)),i?("string"==typeof i&&(i={d:i}),d=function(t,e){const n=wf.create(e),r=wf.create("textPath"),i=t.d;if(i&&void 0===t["xlink:href"]){const t=wf.create("path").attr("d",i).appendTo(n.defs());r.attr("xlink:href",`#${t.id}`)}return"object"==typeof t&&r.attr(t),r.node}(i,t)):d=document.createDocumentFragment();let v,m=0;const b=e.split("\n"),w=[],x=b.length-1;for(let t=0;t<=x;t+=1){g=p;let e="v-line";const n=Cp("tspan");let o,s=b[t];if(s)if(u){o=Pf(n,Zp(s,u,{offset:-m,includeAnnotationIndices:l}),{eol:t!==x&&r,baseSize:y,lineHeight:h?null:p,includeAnnotationIndices:l});const e=o.lineHeight;e&&h&&0!==t&&(g=e),0===t&&(v=.8*o.maxFontSize)}else r&&t!==x&&(s+=r),n.textContent=s;else{n.textContent="-",e+=" v-empty-line";const t=n.style;t.fillOpacity=0,t.strokeOpacity=0,u&&(o={})}o&&w.push(o),t>0&&n.setAttribute("dy",g),(t>0||i)&&n.setAttribute("x",a),n.className.baseVal=e,d.appendChild(n),m+=s.length+1}if(s)if(u)g=function(t,e,n,r){if(!Array.isArray(e))return 0;const i=e.length;if(!i)return 0;let o=e[0];const s=Cf(o.maxFontSize,n)||n;let a=0;const l=Cf(r,n);for(let t=1;t<i;t+=1)o=e[t],a+=Cf(o.lineHeight,n)||l;const u=Cf(o.maxFontSize,n)||n;let c;switch(t){case"middle":c=s/2-.15*u-a/2;break;case"bottom":c=-.25*u-a;break;default:c=.8*s}return c}(o,w,y,p);else if("top"===o)g="0.8em";else{let t;switch(x>0?(t=parseFloat(p)||1,t*=x,Af.test(p)||(t/=y)):t=0,o){case"middle":g=.3-t/2+"em";break;case"bottom":g=-t-.3+"em"}}else 0===o?g="0em":o?g=o:(g=0,null==t.getAttribute("y")&&t.setAttribute("y",`${v||"0.8em"}`));d.firstChild.setAttribute("dy",g),t.appendChild(d)}function Mf(t,e={}){if(!t)return{width:0};const n=[],r=e["font-size"]?`${parseFloat(e["font-size"])}px`:"14px";return n.push(e["font-style"]||"normal"),n.push(e["font-variant"]||"normal"),n.push(e["font-weight"]||400),n.push(r),n.push(e["font-family"]||"sans-serif"),xf.font=n.join(" "),xf.measureText(t)}function Sf(t,e,n,r={}){if(e>=n)return[t,""];const i=t.length,o={};let s=Math.round(e/n*i-1);for(s<0&&(s=0);s>=0&&s<i;){const n=t.slice(0,s),i=o[n]||Mf(n,r).width,a=t.slice(0,s+1),l=o[a]||Mf(a,r).width;if(o[n]=i,o[a]=l,i>e)s-=1;else{if(!(l<=e))break;s+=1}}return[t.slice(0,s),t.slice(s)]}function Tf(t,e,n={},r={}){const i=e.width,o=e.height,s=r.eol||"\n",{width:a}=Mf(t,n);if(a<i)return t;const l=[],u=n.fontSize||14,c=n.lineHeight?parseFloat(n.lineHeight):Math.ceil(1.4*u),h=Math.floor(o/c);let p=t,f=a,d=r.ellipsis,g=0;d&&("string"!=typeof d&&(d="…"),g=Mf(d,n).width);for(let t=0;t<h;t+=1){if(!(f>i)){l.push(p);break}if(t===h-1){const[t]=Sf(p,i-g,f,n);l.push(d?`${t}${d}`:t)}else{const[t,e]=Sf(p,i,f,n);l.push(t),p=e,f=Mf(p,n).width}}return l.join(s)}const kf=.551784;function Of(t,e,n=NaN){const r=t.getAttribute(e);if(null==r)return n;const i=parseFloat(r);return Number.isNaN(i)?n:i}function Nf(t,e=1){const n=t.getTotalLength(),r=[];let i,o=0;for(;o<n;)i=t.getPointAtLength(o),r.push({distance:o,x:i.x,y:i.y}),o+=e;return r}function _f(t){return["M",Of(t,"x1"),Of(t,"y1"),"L",Of(t,"x2"),Of(t,"y2")].join(" ")}function Lf(t){const e=jf(t);return 0===e.length?null:`${If(e)} Z`}function Bf(t){const e=jf(t);return 0===e.length?null:If(e)}function If(t){return`M ${t.map((t=>`${t.x} ${t.y}`)).join(" L")}`}function jf(t){const e=[],n=t.points;if(n)for(let t=0,r=n.numberOfItems;t<r;t+=1)e.push(n.getItem(t));return e}function Vf(t){const e=Of(t,"cx",0),n=Of(t,"cy",0),r=Of(t,"r"),i=r*kf;return["M",e,n-r,"C",e+i,n-r,e+r,n-i,e+r,n,"C",e+r,n+i,e+i,n+r,e,n+r,"C",e-i,n+r,e-r,n+i,e-r,n,"C",e-r,n-i,e-i,n-r,e,n-r,"Z"].join(" ")}function Df(t){const e=Of(t,"cx",0),n=Of(t,"cy",0),r=Of(t,"rx"),i=Of(t,"ry")||r,o=r*kf,s=i*kf;return["M",e,n-i,"C",e+o,n-i,e+r,n-s,e+r,n,"C",e+r,n+s,e+o,n+i,e,n+i,"C",e-o,n+i,e-r,n+s,e-r,n,"C",e-r,n-s,e-o,n-i,e,n-i,"Z"].join(" ")}function Rf(t){return zf({x:Of(t,"x",0),y:Of(t,"y",0),width:Of(t,"width",0),height:Of(t,"height",0),rx:Of(t,"rx",0),ry:Of(t,"ry",0)})}function zf(t){let e;const n=t.x,r=t.y,i=t.width,o=t.height,s=Math.min(t.rx||t["top-rx"]||0,i/2),a=Math.min(t.rx||t["bottom-rx"]||0,i/2),l=Math.min(t.ry||t["top-ry"]||0,o/2),u=Math.min(t.ry||t["bottom-ry"]||0,o/2);return e=s||a||l||u?["M",n,r+l,"v",o-l-u,"a",a,u,0,0,0,a,u,"h",i-2*a,"a",a,u,0,0,0,a,-u,"v",-(o-u-l),"a",s,l,0,0,0,-s,-l,"h",-(i-2*s),"a",s,l,0,0,0,-s,l,"Z"]:["M",n,r,"H",n+i,"V",r+o,"H",n,"V",r,"Z"],e.join(" ")}function Ff(t){const e=Cp("path");Hp(e,Hp(t));const n=Gf(t);return n&&e.setAttribute("d",n),e}function Gf(t){const e=t.tagName.toLowerCase();switch(e){case"path":return t.getAttribute("d");case"line":return _f(t);case"polygon":return Lf(t);case"polyline":return Bf(t);case"ellipse":return Df(t);case"circle":return Vf(t);case"rect":return Rf(t)}throw new Error(`"${e}" cannot be converted to svg path element.`)}const Uf=Cp("svg"),qf=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,Wf=/[ ,]+/,Hf=/^(\w+)\((.*)\)/;function $f(t,e){const n=Uf.createSVGPoint();return n.x=t,n.y=e,n}function Jf(t){const e=Uf.createSVGMatrix();if(null!=t){const n=t,r=e;for(const t in n)r[t]=n[t]}return e}function Xf(t){return null!=t?(t instanceof DOMMatrix||(t=Jf(t)),Uf.createSVGTransformFromMatrix(t)):Uf.createSVGTransform()}function Yf(t){let e=Jf();const n=null!=t&&t.match(qf);if(!n)return e;for(let t=0,r=n.length;t<r;t+=1){const r=n[t].match(Hf);if(r){let t,n,i,o,s,a=Jf();const l=r[2].split(Wf);switch(r[1].toLowerCase()){case"scale":t=parseFloat(l[0]),n=void 0===l[1]?t:parseFloat(l[1]),a=a.scaleNonUniform(t,n);break;case"translate":i=parseFloat(l[0]),o=parseFloat(l[1]),a=a.translate(i,o);break;case"rotate":s=parseFloat(l[0]),i=parseFloat(l[1])||0,o=parseFloat(l[2])||0,a=0!==i||0!==o?a.translate(i,o).rotate(s).translate(-i,-o):a.rotate(s);break;case"skewx":s=parseFloat(l[0]),a=a.skewX(s);break;case"skewy":s=parseFloat(l[0]),a=a.skewY(s);break;case"matrix":a.a=parseFloat(l[0]),a.b=parseFloat(l[1]),a.c=parseFloat(l[2]),a.d=parseFloat(l[3]),a.e=parseFloat(l[4]),a.f=parseFloat(l[5]);break;default:continue}e=e.multiply(a)}}return e}function Zf(t){const e=t||{};return`matrix(${null!=e.a?e.a:1},${null!=e.b?e.b:0},${null!=e.c?e.c:0},${null!=e.d?e.d:1},${null!=e.e?e.e:0},${null!=e.f?e.f:0})`}function Kf(t){let e,n,r;if(t){const i=Wf;if(t.trim().indexOf("matrix")>=0){const i=td(Yf(t));e=[i.translateX,i.translateY],n=[i.rotation],r=[i.scaleX,i.scaleY];const o=[];0===e[0]&&0===e[1]||o.push(`translate(${e.join(",")})`),1===r[0]&&1===r[1]||o.push(`scale(${r.join(",")})`),0!==n[0]&&o.push(`rotate(${n[0]})`),t=o.join(" ")}else{const o=t.match(/translate\((.*?)\)/);o&&(e=o[1].split(i));const s=t.match(/rotate\((.*?)\)/);s&&(n=s[1].split(i));const a=t.match(/scale\((.*?)\)/);a&&(r=a[1].split(i))}}const i=r&&r[0]?parseFloat(r[0]):1;return{raw:t||"",translation:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotation:{angle:n&&n[0]?parseInt(n[0],10):0,cx:n&&n[1]?parseInt(n[1],10):void 0,cy:n&&n[2]?parseInt(n[2],10):void 0},scale:{sx:i,sy:r&&r[1]?parseFloat(r[1]):i}}}function Qf(t,e){return{x:e.x*t.a+e.y*t.c+0,y:e.x*t.b+e.y*t.d+0}}function td(t){const e=Qf(t,{x:0,y:1}),n=Qf(t,{x:1,y:0}),r=180/Math.PI*Math.atan2(e.y,e.x)-90;return{skewX:r,skewY:180/Math.PI*Math.atan2(n.y,n.x),translateX:t.e,translateY:t.f,scaleX:Math.sqrt(t.a*t.a+t.b*t.b),scaleY:Math.sqrt(t.c*t.c+t.d*t.d),rotation:r}}function ed(t){let e,n,r,i;return t?(e=null==t.a?1:t.a,i=null==t.d?1:t.d,n=t.b,r=t.c):e=i=1,{sx:n?Math.sqrt(e*e+n*n):e,sy:r?Math.sqrt(r*r+i*i):i}}function nd(t){let e={x:0,y:1};t&&(e=Qf(t,e));const n=180*Math.atan2(e.y,e.x)/Math.PI%360-90;return{angle:n%360+(n<0?360:0)}}function rd(t){return{tx:t&&t.e||0,ty:t&&t.f||0}}function id(t,e,n={}){if(null==e)return Yf(Hp(t,"transform"));if(n.absolute)return void t.setAttribute("transform",Zf(e));const r=t.transform,i=Xf(e);r.baseVal.appendItem(i)}function od(t,e,n=0,r={}){let i=Hp(t,"transform");const o=Kf(i);if(null==e)return o.translation;i=o.raw,i=i.replace(/translate\([^)]*\)/g,"").trim();const s=`translate(${r.absolute?e:o.translation.tx+e},${r.absolute?n:o.translation.ty+n})`;t.setAttribute("transform",`${s} ${i}`.trim())}function sd(t,e,n,r,i={}){let o=Hp(t,"transform");const s=Kf(o);if(null==e)return s.rotation;o=s.raw,o=o.replace(/rotate\([^)]*\)/g,"").trim(),e%=360;const a=`rotate(${i.absolute?e:s.rotation.angle+e}${null!=n&&null!=r?`,${n},${r}`:""})`;t.setAttribute("transform",`${o} ${a}`.trim())}function ad(t,e,n){let r=Hp(t,"transform");const i=Kf(r);if(null==e)return i.scale;n=null==n?e:n,r=i.raw,r=r.replace(/scale\([^)]*\)/g,"").trim();const o=`scale(${e},${n})`;t.setAttribute("transform",`${r} ${o}`.trim())}function ld(t,e){if(bp(e)&&bp(t)){const n=e.getScreenCTM(),r=t.getScreenCTM();if(n&&r)return n.inverse().multiply(r)}return Jf()}function ud(t,e){let n=Jf();if(bp(e)&&bp(t)){let r=t;const i=[];for(;r&&r!==e;){const t=Yf(r.getAttribute("transform")||null);i.push(t),r=r.parentNode}i.reverse().forEach((t=>{n=n.multiply(t)}))}return n}function cd(t,e,n){const r=t instanceof SVGSVGElement?t:t.ownerSVGElement,i=r.createSVGPoint();i.x=e,i.y=n;try{const e=r.getScreenCTM(),n=i.matrixTransform(e.inverse()),o=ld(t,r).inverse();return n.matrixTransform(o)}catch(t){return i}}var hd,pd,fd;!function(t){const e={};t.get=function(t){return e[t]||{}},t.register=function(t,n){e[t]=n},t.unregister=function(t){delete e[t]}}(hd||(hd={})),function(t){const e=new WeakMap;t.ensure=function(t){return e.has(t)||e.set(t,{events:Object.create(null)}),e.get(t)},t.get=function(t){return e.get(t)},t.remove=function(t){return e.delete(t)}}(pd||(pd={})),function(t){t.returnTrue=()=>!0,t.returnFalse=()=>!1,t.stopPropagationCallback=function(t){t.stopPropagation()},t.addEventListener=function(t,e,n){null!=t.addEventListener&&t.addEventListener(e,n)},t.removeEventListener=function(t,e,n){null!=t.removeEventListener&&t.removeEventListener(e,n)}}(fd||(fd={})),function(t){const e=/[^\x20\t\r\n\f]+/g,n=/^([^.]*)(?:\.(.+)|)/;t.splitType=function(t){return(t||"").match(e)||[""]},t.normalizeType=function(t){const e=n.exec(t)||[];return{originType:e[1]?e[1].trim():e[1],namespaces:e[2]?e[2].split(".").map((t=>t.trim())).sort():[]}},t.isValidTarget=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},t.isValidSelector=function(t,e){if(e){const n=t;return null!=n.querySelector&&null!=n.querySelector(e)}return!0}}(fd||(fd={})),function(t){let e=0;const n=new WeakMap;t.ensureHandlerId=function(t){return n.has(t)||(n.set(t,e),e+=1),n.get(t)},t.getHandlerId=function(t){return n.get(t)},t.removeHandlerId=function(t){return n.delete(t)},t.setHandlerId=function(t,e){return n.set(t,e)}}(fd||(fd={})),function(t){t.getHandlerQueue=function(t,e){const n=[],r=pd.get(t),i=r&&r.events&&r.events[e.type],o=i&&i.handlers||[],s=i?i.delegateCount:0;if(s>0&&!("click"===e.type&&"number"==typeof e.button&&e.button>=1))for(let r=e.target;r!==t;r=r.parentNode||t)if(1===r.nodeType&&("click"!==e.type||!0!==r.disabled)){const e=[],i={};for(let n=0;n<s;n+=1){const s=o[n],a=s.selector;if(null!=a&&null==i[a]){const e=[];t.querySelectorAll(a).forEach((t=>{e.push(t)})),i[a]=e.includes(r)}i[a]&&e.push(s)}e.length&&n.push({elem:r,handlers:e})}return s<o.length&&n.push({elem:t,handlers:o.slice(s)}),n}}(fd||(fd={})),function(t){t.isWindow=function(t){return null!=t&&t===t.window}}(fd||(fd={})),function(t){t.contains=function(t,e){const n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}}(fd||(fd={}));class dd{constructor(t,e){this.isDefaultPrevented=fd.returnFalse,this.isPropagationStopped=fd.returnFalse,this.isImmediatePropagationStopped=fd.returnFalse,this.isSimulated=!1,"string"==typeof t?this.type=t:t.type&&(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?fd.returnTrue:fd.returnFalse,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.timeStamp=t.timeStamp),e&&Object.assign(this,e),this.timeStamp||(this.timeStamp=Date.now())}preventDefault(){const t=this.originalEvent;this.isDefaultPrevented=fd.returnTrue,t&&!this.isSimulated&&t.preventDefault()}stopPropagation(){const t=this.originalEvent;this.isPropagationStopped=fd.returnTrue,t&&!this.isSimulated&&t.stopPropagation()}stopImmediatePropagation(){const t=this.originalEvent;this.isImmediatePropagationStopped=fd.returnTrue,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}}!function(t){t.create=function(e){return e instanceof t?e:new t(e)}}(dd||(dd={})),function(t){t.addProperty=function(e,n){Object.defineProperty(t.prototype,e,{enumerable:!0,configurable:!0,get:"function"==typeof n?function(){if(this.originalEvent)return n(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})}}(dd||(dd={})),function(t){const e={bubbles:!0,cancelable:!0,eventPhase:!0,detail:!0,view:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pageX:!0,pageY:!0,screenX:!0,screenY:!0,toElement:!0,pointerId:!0,pointerType:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,touches:!0,changedTouches:!0,targetTouches:!0,which:!0,altKey:!0,ctrlKey:!0,metaKey:!0,shiftKey:!0};Object.keys(e).forEach((n=>t.addProperty(n,e[n])))}(dd||(dd={})),hd.register("load",{noBubble:!0}),hd.register("beforeunload",{postDispatch(t,e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}),hd.register("mouseenter",{delegateType:"mouseover",bindType:"mouseover",handle(t,e){let n;const r=e.relatedTarget,i=e.handleObj;return r&&(r===t||fd.contains(t,r))||(e.type=i.originType,n=i.handler.call(t,e),e.type="mouseover"),n}}),hd.register("mouseleave",{delegateType:"mouseout",bindType:"mouseout",handle(t,e){let n;const r=e.relatedTarget,i=e.handleObj;return r&&(r===t||fd.contains(t,r))||(e.type=i.originType,n=i.handler.call(t,e),e.type="mouseout"),n}});var gd,yd,vd,md=window&&window.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};!function(t){let e;function n(t,e,...n){const r=dd.create(e);r.delegateTarget=t;const i=hd.get(r.type);if(i.preDispatch&&!1===i.preDispatch(t,r))return;const o=fd.getHandlerQueue(t,r);for(let t=0,e=o.length;t<e&&!r.isPropagationStopped();t+=1){const e=o[t];r.currentTarget=e.elem;for(let t=0,i=e.handlers.length;t<i&&!r.isImmediatePropagationStopped();t+=1){const i=e.handlers[t];if(null==r.rnamespace||i.namespace&&r.rnamespace.test(i.namespace)){r.handleObj=i,r.data=i.data;const t=hd.get(i.originType).handle,o=t?t(e.elem,r,...n):i.handler.call(e.elem,r,...n);void 0!==o&&(r.result=o,!1===o&&(r.preventDefault(),r.stopPropagation()))}}}return i.postDispatch&&i.postDispatch(t,r),r.result}t.on=function(t,r,i,o,s){if(!fd.isValidTarget(t))return;let a;if("function"!=typeof i){const{handler:t,selector:e}=i,n=md(i,["handler","selector"]);i=t,s=e,a=n}const l=pd.ensure(t);let u=l.handler;null==u&&(u=l.handler=function(r,...i){return e!==r.type?n(t,r,...i):void 0});const c=fd.ensureHandlerId(i);fd.splitType(r).forEach((e=>{const{originType:n,namespaces:r}=fd.normalizeType(e);if(!n)return;let h=n,p=hd.get(h);h=(s?p.delegateType:p.bindType)||h,p=hd.get(h);const f=Object.assign({type:h,originType:n,data:o,selector:s,guid:c,handler:i,namespace:r.join(".")},a),d=l.events;let g=d[h];g||(g=d[h]={handlers:[],delegateCount:0},p.setup&&!1!==p.setup(t,o,r,u)||fd.addEventListener(t,h,u)),p.add&&(fd.removeHandlerId(f.handler),p.add(t,f),fd.setHandlerId(f.handler,c)),s?(g.handlers.splice(g.delegateCount,0,f),g.delegateCount+=1):g.handlers.push(f)}))},t.off=function t(e,n,r,i,o){const s=pd.get(e);if(!s)return;const a=s.events;a&&(fd.splitType(n).forEach((n=>{const{originType:l,namespaces:u}=fd.normalizeType(n);if(!l)return void Object.keys(a).forEach((o=>{t(e,o+n,r,i,!0)}));let c=l;const h=hd.get(c);c=(i?h.delegateType:h.bindType)||c;const p=a[c]||{},f=u.length>0?new RegExp(`(^|\\.)${u.join("\\.(?:.*\\.|)")}(\\.|$)`):null,d=p.handlers.length;for(let t=p.handlers.length-1;t>=0;t-=1){const n=p.handlers[t];!o&&l!==n.originType||r&&fd.getHandlerId(r)!==n.guid||!(null==f||n.namespace&&f.test(n.namespace))||!(null==i||i===n.selector||"**"===i&&n.selector)||(p.handlers.splice(t,1),n.selector&&(p.delegateCount-=1),h.remove&&h.remove(e,n))}d&&0===p.handlers.length&&(h.teardown&&!1!==h.teardown(e,u,s.handler)||fd.removeEventListener(e,c,s.handler),delete a[c])})),0===Object.keys(a).length&&pd.remove(e))},t.dispatch=n,t.trigger=function(t,n,r,i){let o=t,s="string"==typeof t?t:t.type,a="string"==typeof t||null==o.namespace?[]:o.namespace.split(".");const l=r;if(3===l.nodeType||8===l.nodeType)return;s.indexOf(".")>-1&&(a=s.split("."),s=a.shift(),a.sort());const u=s.indexOf(":")<0&&`on${s}`;o=t instanceof dd?t:new dd(s,"object"==typeof t?t:null),o.namespace=a.join("."),o.rnamespace=o.namespace?new RegExp(`(^|\\.)${a.join("\\.(?:.*\\.|)")}(\\.|$)`):null,o.result=void 0,o.target||(o.target=l);const c=[o];Array.isArray(n)?c.push(...n):c.push(n);const h=hd.get(s);if(!i&&h.trigger&&!1===h.trigger(l,o,n))return;let p;const f=[l];if(!i&&!h.noBubble&&!fd.isWindow(l)){p=h.delegateType||s;let t=l,e=l.parentNode;for(;null!=e;)f.push(e),t=e,e=e.parentNode;if(t===(l.ownerDocument||document)){const e=t.defaultView||t.parentWindow||window;f.push(e)}}let d=l;for(let t=0,e=f.length;t<e&&!o.isPropagationStopped();t+=1){const e=f[t];d=e,o.type=t>1?p:h.bindType||s;const n=pd.get(e);n&&n.events[o.type]&&n.handler&&n.handler.call(e,...c);const r=u&&e[u]||null;r&&fd.isValidTarget(e)&&(o.result=r.call(e,...c),!1===o.result&&o.preventDefault())}if(o.type=s,!i&&!o.isDefaultPrevented()){const t=h.preventDefault;if((null==t||!1===t(f.pop(),o,n))&&fd.isValidTarget(l)&&u&&"function"==typeof l[s]&&!fd.isWindow(l)){const t=l[u];t&&(l[u]=null),e=s,o.isPropagationStopped()&&d.addEventListener(s,fd.stopPropagationCallback),l[s](),o.isPropagationStopped()&&d.removeEventListener(s,fd.stopPropagationCallback),e=void 0,t&&(l[u]=t)}}return o.result}}(gd||(gd={})),function(t){t.on=function(t,e,n,r,i){return vd.on(t,e,n,r,i),t},t.once=function(t,e,n,r,i){return vd.on(t,e,n,r,i,!0),t},t.off=function(t,e,n,r){return vd.off(t,e,n,r),t},t.trigger=function(t,e,n,r){return gd.trigger(e,n,t,r),t}}(yd||(yd={})),function(t){t.on=function e(n,r,i,o,s,a){if("object"==typeof r)return"string"!=typeof i&&(o=o||i,i=void 0),void Object.keys(r).forEach((t=>e(n,t,i,o,r[t],a)));if(null==o&&null==s?(s=i,o=i=void 0):null==s&&("string"==typeof i?(s=o,o=void 0):(s=o,o=i,i=void 0)),!1===s)s=fd.returnFalse;else if(!s)return;if(a){const e=s;s=function(r,...i){return t.off(n,r),e.call(this,r,...i)},fd.setHandlerId(s,fd.ensureHandlerId(e))}gd.on(n,r,s,o,i)},t.off=function t(e,n,r,i){const o=n;if(o&&null!=o.preventDefault&&null!=o.handleObj){const e=o.handleObj;t(o.delegateTarget,e.namespace?`${e.originType}.${e.namespace}`:e.originType,e.selector,e.handler)}else if("object"!=typeof n)!1!==r&&"function"!=typeof r||(i=r,r=void 0),!1===i&&(i=fd.returnFalse),gd.off(e,n,i,r);else{const i=n;Object.keys(i).forEach((n=>t(e,n,r,i[n])))}}}(vd||(vd={}));class bd{constructor(e,n,r){this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=t.Platform.isEventSupported("wheel")?"wheel":"mousewheel",this.target=e,this.onWheelCallback=n,this.onWheelGuard=r,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}enable(){this.target.addEventListener(this.eventName,this.onWheel,{passive:!1})}disable(){this.target.removeEventListener(this.eventName,this.onWheel)}onWheel(t){if(null!=this.onWheelGuard&&!this.onWheelGuard(t))return;let e;this.deltaX+=t.deltaX,this.deltaY+=t.deltaY,t.preventDefault(),0===this.deltaX&&0===this.deltaY||(t.stopPropagation(),e=!0),!0===e&&0===this.animationFrameId&&(this.animationFrameId=requestAnimationFrame((()=>{this.didWheel(t)})))}didWheel(t){this.animationFrameId=0,this.onWheelCallback(t,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}function wd(t){const e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView;return{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}}var xd=Object.freeze({__proto__:null,CASE_SENSITIVE_ATTR:Fp,getAttribute:Gp,removeAttribute:Up,setAttribute:qp,setAttributes:Wp,attr:Hp,qualifyAttr:$p,kebablizeAttrs:Jp,styleToObject:Xp,mergeAttrs:Yp,uniqueId:vp,ensureId:mp,isSVGGraphicsElement:bp,ns:wp,svgVersion:xp,createElement:Pp,createElementNS:Ap,createSvgElement:Cp,createSvgDocument:Ep,parseXML:Mp,tagName:Sp,index:Tp,find:kp,findOne:Op,findParentByClass:Np,contains:_p,remove:Lp,empty:Bp,append:Ip,prepend:jp,before:Vp,after:function(t,e){const n=t.parentNode;if(n){(Array.isArray(e)?e:[e]).forEach((e=>{null!=e&&n.insertBefore(e,t.nextSibling)}))}},appendTo:Dp,isElement:Rp,isHTMLElement:zp,children:function(t,e){const n=[];let r=t.firstChild;for(;r;r=r.nextSibling)1===r.nodeType&&(e&&!pp(r,e)||n.push(r));return n},getClass:hp,hasClass:pp,addClass:fp,removeClass:dp,toggleClass:gp,setPrefixedStyle:function(t,e,n){const r=af(e);null!=r&&(t[r]=n),t[e]=n},getComputedStyle:lf,hasScrollbars:function(t){const e=lf(t);return null!=e&&("scroll"===e.overflow||"auto"===e.overflow)},getVendorPrefixedName:af,clearSelection:uf,isCSSVariable:hf,computeStyle:pf,computeStyleInt:ff,css:df,getData:yf,setData:vf,data:mf,prop:function t(e,n,r){if(n){if("string"==typeof n)return n=bf[n]||n,arguments.length<3?e[n]:void(e[n]=r);for(const r in n)t(e,r,n[r])}},text:Ef,measureText:Mf,splitTextByLength:Sf,breakText:Tf,KAPPA:kf,sample:Nf,lineToPathData:_f,polygonToPathData:Lf,polylineToPathData:Bf,getPointsFromSvgElement:jf,circleToPathData:Vf,ellipseToPathData:Df,rectangleToPathData:Rf,rectToPathData:zf,toPath:Ff,toPathData:Gf,createSlicePathData:function(t,e,n,r){const i=2*Math.PI-1e-6,o=t,s=e;let a=n,l=r;if(l<a){const t=a;a=l,l=t}const u=l-a,c=u<Math.PI?"0":"1",h=Math.cos(a),p=Math.sin(a),f=Math.cos(l),d=Math.sin(l);return u>=i?o?`M0,${s}A${s},${s} 0 1,1 0,${-s}A${s},${s} 0 1,1 0,${s}M0,${o}A${o},${o} 0 1,0 0,${-o}A${o},${o} 0 1,0 0,${o}Z`:`M0,${s}A${s},${s} 0 1,1 0,${-s}A${s},${s} 0 1,1 0,${s}Z`:o?`M${s*h},${s*p}A${s},${s} 0 ${c},1 ${s*f},${s*d}L${o*f},${o*d}A${o},${o} 0 ${c},0 ${o*h},${o*p}Z`:`M${s*h},${s*p}A${s},${s} 0 ${c},1 ${s*f},${s*d}L0,0Z`},createSVGPoint:$f,createSVGMatrix:Jf,createSVGTransform:Xf,transformStringToMatrix:Yf,matrixToTransformString:Zf,parseTransformString:Kf,decomposeMatrix:td,matrixToScale:ed,matrixToRotation:nd,matrixToTranslation:rd,transform:id,translate:od,rotate:sd,scale:ad,getTransformToElement:ld,getTransformToParentElement:ud,toLocalPoint:cd,get EventHook(){return hd},get Event(){return yd},get EventObject(){return dd},MouseWheelHandle:bd,offset:wd,width:function(t){return t.getBoundingClientRect().width},height:function(t){return t.getBoundingClientRect().height},position:function(t){const e="fixed"===pf(t,"position");let n;if(e){const e=t.getBoundingClientRect();n={left:e.left,top:e.top}}else n=wd(t);if(!e){const e=t.ownerDocument;let r=t.offsetParent||e.documentElement;for(;(r===e.body||r===e.documentElement)&&"static"===pf(r,"position");)r=r.parentNode;if(r!==t&&Rp(r)){const t=wd(r);n.top-=t.top+ff(r,"borderTopWidth"),n.left-=t.left+ff(r,"borderLeftWidth")}}return{top:n.top-ff(t,"marginTop"),left:n.left-ff(t,"marginLeft")}}});function Pd(t,e=60){let n=null;return(...r)=>{n&&clearTimeout(n),n=window.setTimeout((()=>{t.apply(this,r)}),e)}}const Ad="undefined"!=typeof ResizeObserver?function(t){let e=null,n=[];const r=Pd((()=>{n.forEach((e=>{e(t)}))})),i=()=>{e&&(e.disconnect(),n=[],e=null)};return{element:t,bind:i=>{e||(e=(()=>{const e=new ResizeObserver(r);return e.observe(t),r(),e})()),-1===n.indexOf(i)&&n.push(i)},destroy:i,unbind:t=>{const r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&e&&i()}}}:function(t){let e=null,n=[];const r=Pd((()=>{n.forEach((e=>e(t)))})),i=()=>{e&&e.parentNode&&(e.contentDocument&&e.contentDocument.defaultView.removeEventListener("resize",r),e.parentNode.removeChild(e),e=null,n=[])};return{element:t,bind:i=>{e||(e=(()=>{"static"===getComputedStyle(t).position&&(t.style.position="relative");const e=document.createElement("object");return e.onload=()=>{e.contentDocument.defaultView.addEventListener("resize",r),r()},e.style.display="block",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.height="100%",e.style.width="100%",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.zIndex="-1",e.style.opacity="0",e.setAttribute("tabindex","-1"),e.type="text/html",t.appendChild(e),e.data="about:blank",e})()),-1===n.indexOf(i)&&n.push(i)},destroy:i,unbind:t=>{const r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&e&&i()}}};t.SizeSensor=void 0,function(t){const e=new WeakMap;function n(t){let n=e.get(t);return n||(n=Ad(t),e.set(t,n),n)}t.bind=(t,e)=>{const r=n(t);return r.bind(e),()=>r.unbind(e)},t.clear=t=>{!function(t){t.destroy(),e.delete(t.element)}(n(t))}}(t.SizeSensor||(t.SizeSensor={}));class Cd{constructor(t={}){this.comparator=t.comparator||Cd.defaultComparator,this.index={},this.data=t.data||[],this.heapify()}isEmpty(){return 0===this.data.length}insert(t,e,n){const r={priority:t,value:e},i=this.data.length;return n&&(r.id=n,this.index[n]=i),this.data.push(r),this.bubbleUp(i),this}peek(){return this.data[0]?this.data[0].value:null}peekPriority(){return this.data[0]?this.data[0].priority:null}updatePriority(t,e){const n=this.index[t];if(void 0===n)throw new Error(`Node with id '${t}' was not found in the heap.`);const r=this.data,i=r[n].priority,o=this.comparator(e,i);o<0?(r[n].priority=e,this.bubbleUp(n)):o>0&&(r[n].priority=e,this.bubbleDown(n))}remove(){const t=this.data,e=t[0],n=t.pop();return e.id&&delete this.index[e.id],t.length>0&&(t[0]=n,n.id&&(this.index[n.id]=0),this.bubbleDown(0)),e?e.value:null}heapify(){for(let t=0;t<this.data.length;t+=1)this.bubbleUp(t)}bubbleUp(t){const e=this.data;let n,r,i=t;for(;i>0&&(r=i-1>>>1,this.comparator(e[i].priority,e[r].priority)<0);){n=e[r],e[r]=e[i];let t=e[i].id;null!=t&&(this.index[t]=r),e[i]=n,t=e[i].id,null!=t&&(this.index[t]=i),i=r}}bubbleDown(t){const e=this.data,n=e.length-1;let r=t;for(;;){const t=1+(r<<1),i=t+1;let o=r;if(t<=n&&this.comparator(e[t].priority,e[o].priority)<0&&(o=t),i<=n&&this.comparator(e[i].priority,e[o].priority)<0&&(o=i),o===r)break;{const t=e[o];e[o]=e[r];let n=e[r].id;null!=n&&(this.index[n]=o),e[r]=t,n=e[r].id,null!=n&&(this.index[n]=r),r=o}}}}var Ed,Md;!function(t){t.defaultComparator=(t,e)=>t-e}(Cd||(Cd={})),t.Dijkstra=void 0,(t.Dijkstra||(t.Dijkstra={})).run=function(t,e,n=((t,e)=>1)){const r={},i={},o={},s=new Cd;for(r[e]=0,Object.keys(t).forEach((t=>{t!==e&&(r[t]=1/0),s.insert(r[t],t,t)}));!s.isEmpty();){const e=s.remove();o[e]=!0;const a=t[e]||[];for(let t=0;t<a.length;t+=1){const l=a[t];if(!o[l]){const t=r[e]+n(e,l);t<r[l]&&(r[l]=t,i[l]=e,s.updatePriority(l,t))}}}return i};class Sd{constructor(t,e,n,r){return null==t?this.set(255,255,255,1):"number"==typeof t?this.set(t,e,n,r):"string"==typeof t?Sd.fromString(t)||this:Array.isArray(t)?this.set(t):void this.set(t.r,t.g,t.b,null==t.a?1:t.a)}blend(t,e,n){this.set(t.r+(e.r-t.r)*n,t.g+(e.g-t.g)*n,t.b+(e.b-t.b)*n,t.a+(e.a-t.a)*n)}lighten(t){const e=Sd.lighten(this.toArray(),t);this.r=e[0],this.g=e[1],this.b=e[2],this.a=e[3]}darken(t){this.lighten(-t)}set(t,e,n,r){const i=Array.isArray(t)?t[0]:t,o=Array.isArray(t)?t[1]:e,s=Array.isArray(t)?t[2]:n,a=Array.isArray(t)?t[3]:r;return this.r=Math.round(Qr(i,0,255)),this.g=Math.round(Qr(o,0,255)),this.b=Math.round(Qr(s,0,255)),this.a=null==a?1:Qr(a,0,1),this}toHex(){return`#${["r","g","b"].map((t=>{const e=this[t].toString(16);return e.length<2?`0${e}`:e})).join("")}`}toRGBA(){return this.toArray()}toHSLA(){return Sd.rgba2hsla(this.r,this.g,this.b,this.a)}toCSS(t){const e=`${this.r},${this.g},${this.b},`;return t?`rgb(${e})`:`rgba(${e},${this.a})`}toGrey(){return Sd.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}toArray(){return[this.r,this.g,this.b,this.a]}toString(){return this.toCSS()}}!function(t){function e(e){return new t([...a(e),1])}function n(e){const n=e.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(n){const e=n[1].split(/\s*,\s*/).map((t=>parseInt(t,10)));return new t(e)}return null}function r(t,e,n){n<0&&++n,n>1&&--n;const r=6*n;return r<1?t+(e-t)*r:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function i(e){const n=e.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(n){const e=n[2].split(/\s*,\s*/),r=(parseFloat(e[0])%360+360)%360/360,i=parseFloat(e[1])/100,s=parseFloat(e[2])/100,a=null==e[3]?1:parseInt(e[3],10);return new t(o(r,i,s,a))}return null}function o(t,e,n,i){const o=Array.isArray(t)?t[0]:t,s=Array.isArray(t)?t[1]:e,a=Array.isArray(t)?t[2]:n,l=Array.isArray(t)?t[3]:i,u=a<=.5?a*(s+1):a+s-a*s,c=2*a-u;return[256*r(c,u,o+1/3),256*r(c,u,o),256*r(c,u,o-1/3),null==l?1:l]}function s(e){return new t(Math.round(256*Math.random()),Math.round(256*Math.random()),Math.round(256*Math.random()),e?void 0:parseFloat(Math.random().toFixed(2)))}function a(t){const e=0===t.indexOf("#")?t:`#${t}`;let n=Number(`0x${e.substr(1)}`);if(4!==e.length&&7!==e.length||Number.isNaN(n))throw new Error("Invalid hex color.");const r=4===e.length?4:8,i=(1<<r)-1,o=["b","g","r"].map((()=>{const t=n&i;return n>>=r,4===r?17*t:t}));return[o[2],o[1],o[0]]}function l(t,e,n){const r=t=>t.length<2?`0${t}`:t;return`${r(t.toString(16))}${r(e.toString(16))}${r(n.toString(16))}`}function u(t,e){if("string"==typeof t){const n="#"===t[0],r=parseInt(n?t.substr(1):t,16),i=Qr((r>>16)+e,0,255),o=Qr((r>>8&255)+e,0,255);return`${n?"#":""}${(Qr((255&r)+e,0,255)|o<<8|i<<16).toString(16)}`}const n=a(u(l(t[0],t[1],t[2]),e));return[n[0],n[1],n[2],t[3]]}t.fromArray=function(e){return new t(e)},t.fromHex=e,t.fromRGBA=n,t.fromHSLA=i,t.fromString=function(r){if(r.startsWith("#"))return e(r);if(r.startsWith("rgb"))return n(r);const o=t.named[r];return o?e(o):i(r)},t.makeGrey=function(e,n){return t.fromArray([e,e,e,n])},t.rgba2hsla=function(t,e,n,r){const i=Array.isArray(t)?t[0]:t,o=Array.isArray(t)?t[1]:e,s=Array.isArray(t)?t[2]:n,a=Array.isArray(t)?t[3]:r,l=Math.max(i,o,s),u=Math.min(i,o,s),c=(l+u)/2;let h=0,p=0;if(u!==l){const t=l-u;switch(p=c>.5?t/(2-l-u):t/(l+u),l){case i:h=(o-s)/t+(o<s?6:0);break;case o:h=(s-i)/t+2;break;case s:h=(i-o)/t+4}h/=6}return[h,p,c,null==a?1:a]},t.hsla2rgba=o,t.random=s,t.randomHex=function(){let t="#";for(let e=0;e<6;e+=1)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},t.randomRGBA=function(t){return s(t).toString()},t.invert=function(t,e){if("string"==typeof t){const n="#"===t[0],[r,i,o]=a(t);return e?.299*r+.587*i+.114*o>186?"#000000":"#ffffff":`${n?"#":""}${l(255-r,255-i,255-o)}`}const n=t[0],r=t[1],i=t[2],o=t[3];return e?.299*n+.587*r+.114*i>186?[0,0,0,o]:[255,255,255,o]:[255-n,255-r,255-i,o]},t.lighten=function(t,e){return u(t,e)},t.darken=function(t,e){return u(t,-e)}}(Sd||(Sd={})),function(t){t.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(Sd||(Sd={}));class Td{constructor(){this.clear()}clear(){this.map=new WeakMap,this.arr=[]}has(t){return this.map.has(t)}get(t){return this.map.get(t)}set(t,e){this.map.set(t,e),this.arr.push(t)}delete(t){const e=this.arr.indexOf(t);e>=0&&this.arr.splice(e,1);const n=this.map.get(t);return this.map.delete(t),n}each(t){this.arr.forEach((e=>{const n=this.map.get(e);t(n,e)}))}dispose(){this.clear()}}t.ModifierKey=void 0,function(t){function e(t){const e=[],n=[];return Array.isArray(t)?e.push(...t):t.split("|").forEach((t=>{-1===t.indexOf("&")?e.push(t):n.push(...t.split("&"))})),{or:e,and:n}}t.parse=e,t.equals=function(t,n){if(null!=t&&null!=n){const r=e(t),i=e(n),o=r.or.sort(),s=i.or.sort(),a=r.and.sort(),l=i.and.sort(),u=(t,e)=>t.length===e.length&&(0===t.length||t.every(((t,n)=>t===e[n])));return u(o,s)&&u(a,l)}return null==t&&null==n},t.isMatch=function(t,n,r){if(null==n||Array.isArray(n)&&0===n.length)return!r||!0!==t.altKey&&!0!==t.ctrlKey&&!0!==t.metaKey&&!0!==t.shiftKey;const{or:i,and:o}=e(n),s=e=>{const n=`${e.toLowerCase()}Key`;return!0===t[n]};return i.some((t=>s(t)))&&o.every((t=>s(t)))}}(t.ModifierKey||(t.ModifierKey={})),t.Timing=void 0,(Ed=t.Timing||(t.Timing={})).linear=t=>t,Ed.quad=t=>t*t,Ed.cubic=t=>t*t*t,Ed.inout=t=>{if(t<=0)return 0;if(t>=1)return 1;const e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},Ed.exponential=t=>Math.pow(2,10*(t-1)),Ed.bounce=t=>{for(let e=0,n=1;;e+=n,n/=2)if(t>=(7-4*e)/11){const r=(11-6*e-11*t)/4;return-r*r+n*n}},function(t){t.decorators={reverse:t=>e=>1-t(1-e),reflect:t=>e=>.5*(e<.5?t(2*e):2-t(2-2*e)),clamp:(t,e=0,n=1)=>r=>{const i=t(r);return i<e?e:i>n?n:i},back:(t=1.70158)=>e=>e*e*((t+1)*e-t),elastic:(t=1.5)=>e=>Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}(t.Timing||(t.Timing={})),function(t){function e(t){const e=t/1;if(e<1/2.75)return 7.5625*e*e;if(e<2/2.75){const t=e-1.5/2.75;return 7.5625*t*t+.75}if(e<2.5/2.75){const t=e-2.25/2.75;return 7.5625*t*t+.9375}{const t=e-2.625/2.75;return 7.5625*t*t+.984375}}function n(t){return 1-e(1-t)}t.easeInSine=function(t){return-1*Math.cos(t*(Math.PI/2))+1},t.easeOutSine=function(t){return Math.sin(t*(Math.PI/2))},t.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t.easeInQuad=function(t){return t*t},t.easeOutQuad=function(t){return t*(2-t)},t.easeInOutQuad=function(t){return t<.5?2*t*t:(4-2*t)*t-1},t.easeInCubic=function(t){return t*t*t},t.easeOutCubic=function(t){const e=t-1;return e*e*e+1},t.easeInOutCubic=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},t.easeInQuart=function(t){return t*t*t*t},t.easeOutQuart=function(t){const e=t-1;return 1-e*e*e*e},t.easeInOutQuart=function(t){const e=t-1;return t<.5?8*t*t*t*t:1-8*e*e*e*e},t.easeInQuint=function(t){return t*t*t*t*t},t.easeOutQuint=function(t){const e=t-1;return 1+e*e*e*e*e},t.easeInOutQuint=function(t){const e=t-1;return t<.5?16*t*t*t*t*t:1+16*e*e*e*e*e},t.easeInExpo=function(t){return 0===t?0:Math.pow(2,10*(t-1))},t.easeOutExpo=function(t){return 1===t?1:1-Math.pow(2,-10*t)},t.easeInOutExpo=function(t){if(0===t||1===t)return t;const e=2*t,n=e-1;return e<1?.5*Math.pow(2,10*n):.5*(2-Math.pow(2,-10*n))},t.easeInCirc=function(t){const e=t/1;return-1*(Math.sqrt(1-e*t)-1)},t.easeOutCirc=function(t){const e=t-1;return Math.sqrt(1-e*e)},t.easeInOutCirc=function(t){const e=2*t,n=e-2;return e<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-n*n)+1)},t.easeInBack=function(t,e=1.70158){return t*t*((e+1)*t-e)},t.easeOutBack=function(t,e=1.70158){const n=t/1-1;return n*n*((e+1)*n+e)+1},t.easeInOutBack=function(t,e=1.70158){const n=2*t,r=n-2,i=1.525*e;return n<1?.5*n*n*((i+1)*n-i):.5*(r*r*((i+1)*r+i)+2)},t.easeInElastic=function(t,e=.7){if(0===t||1===t)return t;const n=t/1-1,r=1-e,i=r/(2*Math.PI)*Math.asin(1);return-Math.pow(2,10*n)*Math.sin((n-i)*(2*Math.PI)/r)},t.easeOutElastic=function(t,e=.7){const n=1-e,r=2*t;if(0===t||1===t)return t;const i=n/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*r)*Math.sin((r-i)*(2*Math.PI)/n)+1},t.easeInOutElastic=function(t,e=.65){const n=1-e;if(0===t||1===t)return t;const r=2*t,i=r-1,o=n/(2*Math.PI)*Math.asin(1);return r<1?Math.pow(2,10*i)*Math.sin((i-o)*(2*Math.PI)/n)*-.5:Math.pow(2,-10*i)*Math.sin((i-o)*(2*Math.PI)/n)*.5+1},t.easeOutBounce=e,t.easeInBounce=n,t.easeInOutBounce=function(t){return t<.5?.5*n(2*t):.5*e(2*t-1)+.5}}(t.Timing||(t.Timing={})),t.Interp=void 0,(Md=t.Interp||(t.Interp={})).number=(t,e)=>{const n=e-t;return e=>t+n*e},Md.object=(t,e)=>{const n=Object.keys(t);return r=>{const i={};for(let o=n.length-1;-1!==o;o-=1){const s=n[o];i[s]=t[s]+(e[s]-t[s])*r}return i}},Md.unit=(t,e)=>{const n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=n.exec(t),i=n.exec(e),o=i?i[1]:"",s=r?+r[1]:0,a=i?+i[1]:0,l=o.indexOf("."),u=l>0?o[1].length-l-1:0,c=a-s,h=r?r[2]:"";return t=>(s+c*t).toFixed(u)+h},Md.color=(t,e)=>{const n=parseInt(t.slice(1),16),r=parseInt(e.slice(1),16),i=255&n,o=(255&r)-i,s=65280&n,a=(65280&r)-s,l=16711680&n,u=(16711680&r)-l;return t=>`#${(1<<24|i+o*t&255|s+a*t&65280|l+u*t&16711680).toString(16).slice(1)}`};const kd=[];function Od(e,n){const r=kd.find((t=>t.name===e));if(!(r&&(r.loadTimes+=1,r.loadTimes>1)||t.Platform.isApplyingHMR())){const t=document.createElement("style");t.setAttribute("type","text/css"),t.textContent=n;const r=document.querySelector("head");r&&r.insertBefore(t,r.firstChild),kd.push({name:e,loadTimes:1,styleElement:t})}}function Nd(t){const e=kd.findIndex((e=>e.name===t));if(e>-1){const t=kd[e];if(t.loadTimes-=1,t.loadTimes>0)return;let n=t.styleElement;n&&n.parentNode&&n.parentNode.removeChild(n),n=null,kd.splice(e,1)}}var _d,Ld,Bd=Object.freeze({__proto__:null,ensure:Od,clean:Nd});t.Angle=void 0,(_d=t.Angle||(t.Angle={})).toDeg=function(t){return 180*t/Math.PI%360},_d.toRad=function(t,e=!1){return(e?t:t%360)*Math.PI/180},_d.normalize=function(t){return t%360+(t<0?360:0)},t.GeometryUtil=void 0,(Ld=t.GeometryUtil||(t.GeometryUtil={})).round=function(t,e=0){return Number.isInteger(t)?t:+t.toFixed(e)},Ld.random=function(t,e){let n,r;if(null==e?(r=null==t?1:t,n=0):(r=e,n=null==t?0:t),r<n){const t=n;n=r,r=t}return Math.floor(Math.random()*(r-n+1)+n)},Ld.clamp=function(t,e,n){return Number.isNaN(t)?NaN:Number.isNaN(e)||Number.isNaN(n)?0:e<n?t<e?e:t>n?n:t:t<n?n:t>e?e:t},Ld.snapToGrid=function(t,e){return e*Math.round(t/e)},Ld.containsPoint=function(t,e){return null!=e&&null!=t&&e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height},Ld.squaredLength=function(t,e){const n=t.x-e.x,r=t.y-e.y;return n*n+r*r};class Id{valueOf(){return this.toJSON()}toString(){return JSON.stringify(this.toJSON())}}class jd extends Id{constructor(t,e){super(),this.x=null==t?0:t,this.y=null==e?0:e}round(e=0){return this.x=t.GeometryUtil.round(this.x,e),this.y=t.GeometryUtil.round(this.y,e),this}add(t,e){const n=jd.create(t,e);return this.x+=n.x,this.y+=n.y,this}update(t,e){const n=jd.create(t,e);return this.x=n.x,this.y=n.y,this}translate(t,e){const n=jd.create(t,e);return this.x+=n.x,this.y+=n.y,this}rotate(t,e){const n=jd.rotate(this,t,e);return this.x=n.x,this.y=n.y,this}scale(t,e,n=new jd){const r=jd.create(n);return this.x=r.x+t*(this.x-r.x),this.y=r.y+e*(this.y-r.y),this}closest(t){if(1===t.length)return jd.create(t[0]);let e=null,n=1/0;return t.forEach((t=>{const r=this.squaredDistance(t);r<n&&(e=t,n=r)})),e?jd.create(e):null}distance(t){return Math.sqrt(this.squaredDistance(t))}squaredDistance(t){const e=jd.create(t),n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistance(t){const e=jd.create(t);return Math.abs(e.x-this.x)+Math.abs(e.y-this.y)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}theta(t=new jd){const e=jd.create(t),n=-(e.y-this.y),r=e.x-this.x;let i=Math.atan2(n,r);return i<0&&(i=2*Math.PI+i),180*i/Math.PI}angleBetween(t,e){if(this.equals(t)||this.equals(e))return NaN;let n=this.theta(e)-this.theta(t);return n<0&&(n+=360),n}vectorAngle(t){return new jd(0,0).angleBetween(this,t)}toPolar(t){return this.update(jd.toPolar(this,t)),this}changeInAngle(t,e,n=new jd){return this.clone().translate(-t,-e).theta(n)-this.theta(n)}adhereToRect(e){return t.GeometryUtil.containsPoint(e,this)||(this.x=Math.min(Math.max(this.x,e.x),e.x+e.width),this.y=Math.min(Math.max(this.y,e.y),e.y+e.height)),this}bearing(e){const n=jd.create(e),r=t.Angle.toRad(this.y),i=t.Angle.toRad(n.y),o=this.x,s=n.x,a=t.Angle.toRad(s-o),l=Math.sin(a)*Math.cos(i),u=Math.cos(r)*Math.sin(i)-Math.sin(r)*Math.cos(i)*Math.cos(a);let c=t.Angle.toDeg(Math.atan2(l,u))-22.5;return c<0&&(c+=360),c=parseInt(c/45,10),["NE","E","SE","S","SW","W","NW","N"][c]}cross(t,e){if(null!=t&&null!=e){const n=jd.create(t),r=jd.create(e);return(r.x-this.x)*(n.y-this.y)-(r.y-this.y)*(n.x-this.x)}return NaN}dot(t){const e=jd.create(t);return this.x*e.x+this.y*e.y}diff(t,e){if("number"==typeof t)return new jd(this.x-t,this.y-e);const n=jd.create(t);return new jd(this.x-n.x,this.y-n.y)}lerp(t,e){const n=jd.create(t);return new jd((1-e)*this.x+e*n.x,(1-e)*this.y+e*n.y)}normalize(t=1){const e=t/this.magnitude();return this.scale(e,e)}move(e,n){const r=jd.create(e),i=t.Angle.toRad(r.theta(this));return this.translate(Math.cos(i)*n,-Math.sin(i)*n)}reflection(t){return jd.create(t).move(this,this.distance(t))}snapToGrid(e,n){return this.x=t.GeometryUtil.snapToGrid(this.x,e),this.y=t.GeometryUtil.snapToGrid(this.y,null==n?e:n),this}equals(t){const e=jd.create(t);return null!=e&&e.x===this.x&&e.y===this.y}clone(){return jd.clone(this)}toJSON(){return jd.toJSON(this)}serialize(){return`${this.x} ${this.y}`}}!function(t){t.isPoint=function(e){return null!=e&&e instanceof t}}(jd||(jd={})),function(t){t.isPointLike=function(t){return null!=t&&"object"==typeof t&&"number"==typeof t.x&&"number"==typeof t.y},t.isPointData=function(t){return null!=t&&Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]}}(jd||(jd={})),function(e){function n(t){return e.isPoint(t)?new e(t.x,t.y):Array.isArray(t)?new e(t[0],t[1]):new e(t.x,t.y)}function r(t,e){return t===e||null!=t&&null!=e&&(t.x===e.x&&t.y===e.y)}function i(t,r,i,o=new e){const s=n(t),a=n(o),l=s.x-a.x,u=s.y-a.y,c=u*r+l*i;return new e(l*r-u*i+a.x,c+a.y)}e.create=function(t,r){return null==t||"number"==typeof t?new e(t,r):n(t)},e.clone=n,e.toJSON=function(t){return e.isPoint(t)?{x:t.x,y:t.y}:Array.isArray(t)?{x:t[0],y:t[1]}:{x:t.x,y:t.y}},e.fromPolar=function(r,i,o=new e){let s=Math.abs(r*Math.cos(i)),a=Math.abs(r*Math.sin(i));const l=n(o),u=t.Angle.normalize(t.Angle.toDeg(i));return u<90?a=-a:u<180?(s=-s,a=-a):u<270&&(s=-s),new e(l.x+s,l.y+a)},e.toPolar=function(r,i=new e){const o=n(r),s=n(i),a=o.x-s.x,l=o.y-s.y;return new e(Math.sqrt(a*a+l*l),t.Angle.toRad(s.theta(o)))},e.equals=r,e.equalPoints=function(t,e){if(null==t&&null!=e||null!=t&&null==e||null!=t&&null!=e&&t.length!==e.length)return!1;if(null!=t&&null!=e)for(let n=0,i=t.length;n<i;n+=1)if(!r(t[n],e[n]))return!1;return!0},e.random=function(n,r,i,o){return new e(t.GeometryUtil.random(n,r),t.GeometryUtil.random(i,o))},e.rotate=function(e,n,r){const o=t.Angle.toRad(t.Angle.normalize(-n)),s=Math.sin(o);return i(e,Math.cos(o),s,r)},e.rotateEx=i}(jd||(jd={}));class Vd extends Id{get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get origin(){return new jd(this.x,this.y)}get topLeft(){return new jd(this.x,this.y)}get topCenter(){return new jd(this.x+this.width/2,this.y)}get topRight(){return new jd(this.x+this.width,this.y)}get center(){return new jd(this.x+this.width/2,this.y+this.height/2)}get bottomLeft(){return new jd(this.x,this.y+this.height)}get bottomCenter(){return new jd(this.x+this.width/2,this.y+this.height)}get bottomRight(){return new jd(this.x+this.width,this.y+this.height)}get corner(){return new jd(this.x+this.width,this.y+this.height)}get rightMiddle(){return new jd(this.x+this.width,this.y+this.height/2)}get leftMiddle(){return new jd(this.x,this.y+this.height/2)}get topLine(){return new Dd(this.topLeft,this.topRight)}get rightLine(){return new Dd(this.topRight,this.bottomRight)}get bottomLine(){return new Dd(this.bottomLeft,this.bottomRight)}get leftLine(){return new Dd(this.topLeft,this.bottomLeft)}constructor(t,e,n,r){super(),this.x=null==t?0:t,this.y=null==e?0:e,this.width=null==n?0:n,this.height=null==r?0:r}getOrigin(){return this.origin}getTopLeft(){return this.topLeft}getTopCenter(){return this.topCenter}getTopRight(){return this.topRight}getCenter(){return this.center}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}getBottomLeft(){return this.bottomLeft}getBottomCenter(){return this.bottomCenter}getBottomRight(){return this.bottomRight}getCorner(){return this.corner}getRightMiddle(){return this.rightMiddle}getLeftMiddle(){return this.leftMiddle}getTopLine(){return this.topLine}getRightLine(){return this.rightLine}getBottomLine(){return this.bottomLine}getLeftLine(){return this.leftLine}bbox(e){if(!e)return this.clone();const n=t.Angle.toRad(e),r=Math.abs(Math.sin(n)),i=Math.abs(Math.cos(n)),o=this.width*i+this.height*r,s=this.width*r+this.height*i;return new Vd(this.x+(this.width-o)/2,this.y+(this.height-s)/2,o,s)}round(e=0){return this.x=t.GeometryUtil.round(this.x,e),this.y=t.GeometryUtil.round(this.y,e),this.width=t.GeometryUtil.round(this.width,e),this.height=t.GeometryUtil.round(this.height,e),this}add(t,e,n,r){const i=Vd.create(t,e,n,r),o=Math.min(this.x,i.x),s=Math.min(this.y,i.y),a=Math.max(this.x+this.width,i.x+i.width),l=Math.max(this.y+this.height,i.y+i.height);return this.x=o,this.y=s,this.width=a-o,this.height=l-s,this}update(t,e,n,r){const i=Vd.create(t,e,n,r);return this.x=i.x,this.y=i.y,this.width=i.width,this.height=i.height,this}inflate(t,e){const n=t,r=null!=e?e:t;return this.x-=n,this.y-=r,this.width+=2*n,this.height+=2*r,this}snapToGrid(t,e){const n=this.origin.snapToGrid(t,e),r=this.corner.snapToGrid(t,e);return this.x=n.x,this.y=n.y,this.width=r.x-n.x,this.height=r.y-n.y,this}translate(t,e){const n=jd.create(t,e);return this.x+=n.x,this.y+=n.y,this}scale(t,e,n=new jd){const r=this.origin.scale(t,e,n);return this.x=r.x,this.y=r.y,this.width*=t,this.height*=e,this}rotate(e,n=this.getCenter()){if(0!==e){const r=t.Angle.toRad(e),i=Math.cos(r),o=Math.sin(r);let s=this.getOrigin(),a=this.getTopRight(),l=this.getBottomRight(),u=this.getBottomLeft();s=jd.rotateEx(s,i,o,n),a=jd.rotateEx(a,i,o,n),l=jd.rotateEx(l,i,o,n),u=jd.rotateEx(u,i,o,n);const c=new Vd(s.x,s.y,0,0);c.add(a.x,a.y,0,0),c.add(l.x,l.y,0,0),c.add(u.x,u.y,0,0),this.update(c)}return this}rotate90(){const t=(this.width-this.height)/2;this.x+=t,this.y-=t;const e=this.width;return this.width=this.height,this.height=e,this}moveAndExpand(t){const e=Vd.clone(t);return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this}getMaxScaleToFit(t,e=this.center){const n=Vd.clone(t),r=e.x,i=e.y;let o=1/0,s=1/0,a=1/0,l=1/0,u=1/0,c=1/0,h=1/0,p=1/0;const f=n.topLeft;f.x<r&&(o=(this.x-r)/(f.x-r)),f.y<i&&(u=(this.y-i)/(f.y-i));const d=n.bottomRight;d.x>r&&(s=(this.x+this.width-r)/(d.x-r)),d.y>i&&(c=(this.y+this.height-i)/(d.y-i));const g=n.topRight;g.x>r&&(a=(this.x+this.width-r)/(g.x-r)),g.y<i&&(h=(this.y-i)/(g.y-i));const y=n.bottomLeft;return y.x<r&&(l=(this.x-r)/(y.x-r)),y.y>i&&(p=(this.y+this.height-i)/(y.y-i)),{sx:Math.min(o,s,a,l),sy:Math.min(u,c,h,p)}}getMaxUniformScaleToFit(t,e=this.center){const n=this.getMaxScaleToFit(t,e);return Math.min(n.sx,n.sy)}containsPoint(e,n){return t.GeometryUtil.containsPoint(this,jd.create(e,n))}containsRect(t,e,n,r){const i=Vd.create(t,e,n,r),o=this.x,s=this.y,a=this.width,l=this.height,u=i.x,c=i.y,h=i.width,p=i.height;return 0!==a&&0!==l&&0!==h&&0!==p&&(u>=o&&c>=s&&u+h<=o+a&&c+p<=s+l)}intersectsWithLine(t){const e=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],n=[],r=[];return e.forEach((e=>{const i=t.intersectsWithLine(e);null!==i&&r.indexOf(i.toString())<0&&(n.push(i),r.push(i.toString()))})),n.length>0?n:null}intersectsWithLineFromCenterToPoint(t,e){const n=jd.clone(t),r=this.center;let i=null;null!=e&&0!==e&&n.rotate(e,r);const o=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],s=new Dd(r,n);for(let t=o.length-1;t>=0;t-=1){const e=o[t].intersectsWithLine(s);if(null!==e){i=e;break}}return i&&null!=e&&0!==e&&i.rotate(-e,r),i}intersectsWithRect(t,e,n,r){const i=Vd.create(t,e,n,r);if(!this.isIntersectWithRect(i))return null;const o=this.origin,s=this.corner,a=i.origin,l=i.corner,u=Math.max(o.x,a.x),c=Math.max(o.y,a.y);return new Vd(u,c,Math.min(s.x,l.x)-u,Math.min(s.y,l.y)-c)}isIntersectWithRect(t,e,n,r){const i=Vd.create(t,e,n,r),o=this.origin,s=this.corner,a=i.origin,l=i.corner;return!(l.x<=o.x||l.y<=o.y||a.x>=s.x||a.y>=s.y)}normalize(){let t=this.x,e=this.y,n=this.width,r=this.height;return this.width<0&&(t=this.x+this.width,n=-this.width),this.height<0&&(e=this.y+this.height,r=-this.height),this.x=t,this.y=e,this.width=n,this.height=r,this}union(t){const e=Vd.clone(t),n=this.origin,r=this.corner,i=e.origin,o=e.corner,s=Math.min(n.x,i.x),a=Math.min(n.y,i.y),l=Math.max(r.x,o.x),u=Math.max(r.y,o.y);return new Vd(s,a,l-s,u-a)}getNearestSideToPoint(t){const e=jd.clone(t),n=e.x-this.x,r=this.x+this.width-e.x,i=e.y-this.y;let o=n,s="left";return r<o&&(o=r,s="right"),i<o&&(o=i,s="top"),this.y+this.height-e.y<o&&(s="bottom"),s}getNearestPointToPoint(t){const e=jd.clone(t);if(this.containsPoint(e)){const t=this.getNearestSideToPoint(e);if("left"===t)return new jd(this.x,e.y);if("top"===t)return new jd(e.x,this.y);if("right"===t)return new jd(this.x+this.width,e.y);if("bottom"===t)return new jd(e.x,this.y+this.height)}return e.adhereToRect(this)}equals(t){return null!=t&&t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height}clone(){return new Vd(this.x,this.y,this.width,this.height)}toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height}}serialize(){return`${this.x} ${this.y} ${this.width} ${this.height}`}}!function(t){t.isRectangle=function(e){return null!=e&&e instanceof t}}(Vd||(Vd={})),function(t){t.isRectangleLike=function(t){return null!=t&&"object"==typeof t&&"number"==typeof t.x&&"number"==typeof t.y&&"number"==typeof t.width&&"number"==typeof t.height}}(Vd||(Vd={})),function(t){function e(e){return t.isRectangle(e)?e.clone():Array.isArray(e)?new t(e[0],e[1],e[2],e[3]):new t(e.x,e.y,e.width,e.height)}t.create=function(n,r,i,o){return null==n||"number"==typeof n?new t(n,r,i,o):e(n)},t.clone=e,t.fromEllipse=function(e){return new t(e.x-e.a,e.y-e.b,2*e.a,2*e.b)},t.fromSize=function(e){return new t(0,0,e.width,e.height)},t.fromPositionAndSize=function(e,n){return new t(e.x,e.y,n.width,n.height)}}(Vd||(Vd={}));class Dd extends Id{get center(){return new jd((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}constructor(t,e,n,r){super(),"number"==typeof t&&"number"==typeof e?(this.start=new jd(t,e),this.end=new jd(n,r)):(this.start=jd.create(t),this.end=jd.create(e))}getCenter(){return this.center}round(t=0){return this.start.round(t),this.end.round(t),this}translate(t,e){return"number"==typeof t?(this.start.translate(t,e),this.end.translate(t,e)):(this.start.translate(t),this.end.translate(t)),this}rotate(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this}scale(t,e,n){return this.start.scale(t,e,n),this.end.scale(t,e,n),this}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const t=this.start.x-this.end.x,e=this.start.y-this.end.y;return t*t+e*e}setLength(t){const e=this.length();if(!e)return this;const n=t/e;return this.scale(n,n,this.start)}parallel(t){const e=this.clone();if(!e.isDifferentiable())return e;const{start:n,end:r}=e,i=n.clone().rotate(270,r),o=r.clone().rotate(90,n);return n.move(o,t),r.move(i,t),e}vector(){return new jd(this.end.x-this.start.x,this.end.y-this.start.y)}angle(){const t=new jd(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)}bbox(){const t=Math.min(this.start.x,this.end.x),e=Math.min(this.start.y,this.end.y),n=Math.max(this.start.x,this.end.x),r=Math.max(this.start.y,this.end.y);return new Vd(t,e,n-t,r-e)}bearing(){return this.start.bearing(this.end)}closestPoint(t){return this.pointAt(this.closestPointNormalizedLength(t))}closestPointLength(t){return this.closestPointNormalizedLength(t)*this.length()}closestPointTangent(t){return this.tangentAt(this.closestPointNormalizedLength(t))}closestPointNormalizedLength(t){const e=this.vector().dot(new Dd(this.start,t).vector()),n=Math.min(1,Math.max(0,e/this.squaredLength()));return Number.isNaN(n)?0:n}pointAt(t){const e=this.start,n=this.end;return t<=0?e.clone():t>=1?n.clone():e.lerp(n,t)}pointAtLength(t){const e=this.start,n=this.end;let r=!0;t<0&&(r=!1,t=-t);const i=this.length();if(t>=i)return r?n.clone():e.clone();const o=(r?t:i-t)/i;return this.pointAt(o)}divideAt(t){const e=this.pointAt(t);return[new Dd(this.start,e),new Dd(e,this.end)]}divideAtLength(t){const e=this.pointAtLength(t);return[new Dd(this.start,e),new Dd(e,this.end)]}containsPoint(t){const e=this.start,n=this.end;if(0!==e.cross(t,n))return!1;const r=this.length();return!(new Dd(e,t).length()>r)&&!(new Dd(t,n).length()>r)}intersect(t,e){const n=t.intersectsWithLine(this,e);return n?Array.isArray(n)?n:[n]:null}intersectsWithLine(t){const e=new jd(this.end.x-this.start.x,this.end.y-this.start.y),n=new jd(t.end.x-t.start.x,t.end.y-t.start.y),r=e.x*n.y-e.y*n.x,i=new jd(t.start.x-this.start.x,t.start.y-this.start.y),o=i.x*n.y-i.y*n.x,s=i.x*e.y-i.y*e.x;if(0===r||o*r<0||s*r<0)return null;if(r>0){if(o>r||s>r)return null}else if(o<r||s<r)return null;return new jd(this.start.x+o*e.x/r,this.start.y+o*e.y/r)}isDifferentiable(){return!this.start.equals(this.end)}pointOffset(t){const e=jd.clone(t),n=this.start,r=this.end;return((r.x-n.x)*(e.y-n.y)-(r.y-n.y)*(e.x-n.x))/this.length()}pointSquaredDistance(t,e){const n=jd.create(t,e);return this.closestPoint(n).squaredDistance(n)}pointDistance(t,e){const n=jd.create(t,e);return this.closestPoint(n).distance(n)}tangentAt(t){if(!this.isDifferentiable())return null;const e=this.start,n=this.end,r=this.pointAt(t),i=new Dd(e,n);return i.translate(r.x-e.x,r.y-e.y),i}tangentAtLength(t){if(!this.isDifferentiable())return null;const e=this.start,n=this.end,r=this.pointAtLength(t),i=new Dd(e,n);return i.translate(r.x-e.x,r.y-e.y),i}relativeCcw(t,e){const n=jd.create(t,e);let r=n.x-this.start.x,i=n.y-this.start.y;const o=this.end.x-this.start.x,s=this.end.y-this.start.y;let a=r*s-i*o;return 0===a&&(a=r*o+i*s,a>0&&(r-=o,i-=s,a=r*o+i*s,a<0&&(a=0))),a<0?-1:a>0?1:0}equals(t){return null!=t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y}clone(){return new Dd(this.start,this.end)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.end.serialize()].join(" ")}}!function(t){t.isLine=function(e){return null!=e&&e instanceof t}}(Dd||(Dd={}));let Rd=class extends Id{get center(){return new jd(this.x,this.y)}constructor(t,e,n,r){super(),this.x=null==t?0:t,this.y=null==e?0:e,this.a=null==n?0:n,this.b=null==r?0:r}bbox(){return Vd.fromEllipse(this)}getCenter(){return this.center}inflate(t,e){const n=t,r=null!=e?e:t;return this.a+=2*n,this.b+=2*r,this}normalizedDistance(t,e){const n=jd.create(t,e),r=n.x-this.x,i=n.y-this.y,o=this.a,s=this.b;return r*r/(o*o)+i*i/(s*s)}containsPoint(t,e){return this.normalizedDistance(t,e)<=1}intersectsWithLine(t){const e=[],n=this.a,r=this.b,i=t.start,o=t.end,s=t.vector(),a=i.diff(new jd(this.x,this.y)),l=new jd(s.x/(n*n),s.y/(r*r)),u=new jd(a.x/(n*n),a.y/(r*r)),c=s.dot(l),h=s.dot(u),p=h*h-c*(a.dot(u)-1);if(p<0)return null;if(p>0){const t=Math.sqrt(p),n=(-h-t)/c,r=(-h+t)/c;if((n<0||n>1)&&(r<0||r>1))return null;n>=0&&n<=1&&e.push(i.lerp(o,n)),r>=0&&r<=1&&e.push(i.lerp(o,r))}else{const t=-h/c;if(!(t>=0&&t<=1))return null;e.push(i.lerp(o,t))}return e}intersectsWithLineFromCenterToPoint(t,e=0){const n=jd.clone(t);e&&n.rotate(e,this.getCenter());const r=n.x-this.x,i=n.y-this.y;let o;if(0===r)return o=this.bbox().getNearestPointToPoint(n),e?o.rotate(-e,this.getCenter()):o;const s=i/r,a=s*s,l=this.a*this.a,u=this.b*this.b;let c=Math.sqrt(1/(1/l+a/u));c=r<0?-c:c;const h=s*c;return o=new jd(this.x+c,this.y+h),e?o.rotate(-e,this.getCenter()):o}tangentTheta(t){const e=jd.clone(t),n=e.x,r=e.y,i=this.a,o=this.b,s=this.bbox().center,a=s.x,l=s.y,u=n>s.x+i/2,c=n<s.x-i/2;let h,p;return u||c?(p=n>s.x?r-30:r+30,h=i*i/(n-a)-i*i*(r-l)*(p-l)/(o*o*(n-a))+a):(h=r>s.y?n+30:n-30,p=o*o/(r-l)-o*o*(n-a)*(h-a)/(i*i*(r-l))+l),new jd(h,p).theta(e)}scale(t,e){return this.a*=t,this.b*=e,this}rotate(t,e){const n=Vd.fromEllipse(this);n.rotate(t,e);const r=Rd.fromRect(n);return this.a=r.a,this.b=r.b,this.x=r.x,this.y=r.y,this}translate(t,e){const n=jd.create(t,e);return this.x+=n.x,this.y+=n.y,this}equals(t){return null!=t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b}clone(){return new Rd(this.x,this.y,this.a,this.b)}toJSON(){return{x:this.x,y:this.y,a:this.a,b:this.b}}serialize(){return`${this.x} ${this.y} ${this.a} ${this.b}`}};!function(t){t.isEllipse=function(e){return null!=e&&e instanceof t}}(Rd||(Rd={})),function(t){function e(e){return t.isEllipse(e)?e.clone():Array.isArray(e)?new t(e[0],e[1],e[2],e[3]):new t(e.x,e.y,e.a,e.b)}t.create=function(n,r,i,o){return null==n||"number"==typeof n?new t(n,r,i,o):e(n)},t.parse=e,t.fromRect=function(e){const n=e.center;return new t(n.x,n.y,e.width/2,e.height/2)}}(Rd||(Rd={}));const zd=new RegExp("^[\\s\\dLMCZz,.]*$");function Fd(t){return"string"==typeof t&&zd.test(t)}function Gd(t,e){return(t%e+e)%e}function Ud(t,e={}){const n=[];return t&&t.length&&t.forEach((t=>{Array.isArray(t)?n.push({x:t[0],y:t[1]}):n.push({x:t.x,y:t.y})})),function(t,e,n,r,i){const o=[],s=t[t.length-1],a=null!=e&&e>0,l=e||0;if(r&&a){const e=(t=t.slice())[0],n=new jd(s.x+(e.x-s.x)/2,s.y+(e.y-s.y)/2);t.splice(0,0,n)}let u=t[0],c=1;for(n?o.push("M",u.x,u.y):o.push("L",u.x,u.y);c<(r?t.length:t.length-1);){let e=t[Gd(c,t.length)],n=u.x-e.x,r=u.y-e.y;if(a&&(0!==n||0!==r)&&(null==i||i.indexOf(c-1)<0)){let i=Math.sqrt(n*n+r*r);const s=n*Math.min(l,i/2)/i,a=r*Math.min(l,i/2)/i,u=e.x+s,h=e.y+a;o.push("L",u,h);let p=t[Gd(c+1,t.length)];for(;c<t.length-2&&0===Math.round(p.x-e.x)&&0===Math.round(p.y-e.y);)p=t[Gd(c+2,t.length)],c+=1;n=p.x-e.x,r=p.y-e.y,i=Math.max(1,Math.sqrt(n*n+r*r));const f=n*Math.min(l,i/2)/i,d=r*Math.min(l,i/2)/i,g=e.x+f,y=e.y+d;o.push("Q",e.x,e.y,g,y),e=new jd(g,y)}else o.push("L",e.x,e.y);u=e,c+=1}return r?o.push("Z"):o.push("L",s.x,s.y),o.map((t=>"string"==typeof t?t:+t.toFixed(3))).join(" ")}(n,e.round,null==e.initialMove||e.initialMove,e.close,e.exclude)}function qd(t,e,n,r,i=0,o=0,s=0,a,l){if(0===n||0===r)return[];a-=t,l-=e,n=Math.abs(n),r=Math.abs(r);const u=-a/2,c=-l/2,h=Math.cos(i*Math.PI/180),p=Math.sin(i*Math.PI/180),f=h*u+p*c,d=-1*p*u+h*c,g=f*f,y=d*d,v=n*n,m=r*r,b=g/v+y/m;let w;if(b>1)n=Math.sqrt(b)*n,r=Math.sqrt(b)*r,w=0;else{let t=1;o===s&&(t=-1),w=t*Math.sqrt((v*m-v*y-m*g)/(v*y+m*g))}const x=w*n*d/r,P=-1*w*r*f/n,A=h*x-p*P+a/2,C=p*x+h*P+l/2;let E=Math.atan2((d-P)/r,(f-x)/n)-Math.atan2(0,1),M=E>=0?E:2*Math.PI+E;E=Math.atan2((-d-P)/r,(-f-x)/n)-Math.atan2((d-P)/r,(f-x)/n);let S=E>=0?E:2*Math.PI+E;0===s&&S>0?S-=2*Math.PI:0!==s&&S<0&&(S+=2*Math.PI);const T=2*S/Math.PI,k=Math.ceil(T<0?-1*T:T),O=S/k,N=8/3*Math.sin(O/4)*Math.sin(O/4)/Math.sin(O/2),_=h*n,L=h*r,B=p*n,I=p*r;let j=Math.cos(M),V=Math.sin(M),D=-N*(_*V+I*j),R=-N*(B*V-L*j),z=0,F=0;const G=[];for(let n=0;n<k;n+=1){M+=O,j=Math.cos(M),V=Math.sin(M),z=_*j-I*V+A,F=B*j+L*V+C;const r=-N*(_*V+I*j),i=-N*(B*V-L*j),o=6*n;G[o]=Number(D+t),G[o+1]=Number(R+e),G[o+2]=Number(z-r+t),G[o+3]=Number(F-i+e),G[o+4]=Number(z+t),G[o+5]=Number(F+e),D=z+r,R=F+i}return G.map((t=>+t.toFixed(2)))}function Wd(t,e,n,r,i=0,o=0,s=0,a,l){const u=[],c=qd(t,e,n,r,i,o,s,a,l);if(null!=c)for(let t=0,e=c.length;t<e;t+=6)u.push("C",c[t],c[t+1],c[t+2],c[t+3],c[t+4],c[t+5]);return u.join(" ")}let Hd=class extends Id{get start(){return this.points[0]||null}get end(){return this.points[this.points.length-1]||null}constructor(t){if(super(),null!=t){if("string"==typeof t)return Hd.parse(t);this.points=t.map((t=>jd.create(t)))}else this.points=[]}scale(t,e,n=new jd){return this.points.forEach((r=>r.scale(t,e,n))),this}rotate(t,e){return this.points.forEach((n=>n.rotate(t,e))),this}translate(t,e){const n=jd.create(t,e);return this.points.forEach((t=>t.translate(n.x,n.y))),this}round(t=0){return this.points.forEach((e=>e.round(t))),this}bbox(){if(0===this.points.length)return new Vd;let t=1/0,e=-1/0,n=1/0,r=-1/0;const i=this.points;for(let o=0,s=i.length;o<s;o+=1){const s=i[o],a=s.x,l=s.y;a<t&&(t=a),a>e&&(e=a),l<n&&(n=l),l>r&&(r=l)}return new Vd(t,n,e-t,r-n)}closestPoint(t){const e=this.closestPointLength(t);return this.pointAtLength(e)}closestPointLength(t){const e=this.points,n=e.length;if(0===n||1===n)return 0;let r=0,i=0,o=1/0;for(let s=0,a=n-1;s<a;s+=1){const n=new Dd(e[s],e[s+1]),a=n.length(),l=n.closestPointNormalizedLength(t),u=n.pointAt(l).squaredDistance(t);u<o&&(o=u,i=r+l*a),r+=a}return i}closestPointNormalizedLength(t){const e=this.length();if(0===e)return 0;return this.closestPointLength(t)/e}closestPointTangent(t){const e=this.closestPointLength(t);return this.tangentAtLength(e)}containsPoint(t){if(0===this.points.length)return!1;const e=jd.clone(t),n=e.x,r=e.y,i=this.points,o=i.length;let s=o-1,a=0;for(let l=0;l<o;l+=1){const o=i[s],u=i[l];if(e.equals(o))return!0;const c=new Dd(o,u);if(c.containsPoint(t))return!0;if(r<=o.y&&r>u.y||r>o.y&&r<=u.y){const e=o.x-n>u.x-n?o.x-n:u.x-n;if(e>=0){const i=new jd(n+e,r),o=new Dd(t,i);c.intersectsWithLine(o)&&(a+=1)}}s=l}return a%2==1}intersectsWithLine(t){const e=[];for(let n=0,r=this.points.length-1;n<r;n+=1){const r=this.points[n],i=this.points[n+1],o=t.intersectsWithLine(new Dd(r,i));o&&e.push(o)}return e.length>0?e:null}isDifferentiable(){for(let t=0,e=this.points.length-1;t<e;t+=1){const e=this.points[t],n=this.points[t+1];if(new Dd(e,n).isDifferentiable())return!0}return!1}length(){let t=0;for(let e=0,n=this.points.length-1;e<n;e+=1){const n=this.points[e],r=this.points[e+1];t+=n.distance(r)}return t}pointAt(t){const e=this.points,n=e.length;if(0===n)return null;if(1===n)return e[0].clone();if(t<=0)return e[0].clone();if(t>=1)return e[n-1].clone();const r=this.length()*t;return this.pointAtLength(r)}pointAtLength(t){const e=this.points,n=e.length;if(0===n)return null;if(1===n)return e[0].clone();let r=!0;t<0&&(r=!1,t=-t);let i=0;for(let o=0,s=n-1;o<s;o+=1){const n=r?o:s-1-o,a=e[n],l=e[n+1],u=new Dd(a,l),c=a.distance(l);if(t<=i+c)return u.pointAtLength((r?1:-1)*(t-i));i+=c}return(r?e[n-1]:e[0]).clone()}tangentAt(t){const e=this.points.length;if(0===e||1===e)return null;t<0&&(t=0),t>1&&(t=1);const n=this.length()*t;return this.tangentAtLength(n)}tangentAtLength(t){const e=this.points,n=e.length;if(0===n||1===n)return null;let r,i=!0;t<0&&(i=!1,t=-t);let o=0;for(let s=0,a=n-1;s<a;s+=1){const n=i?s:a-1-s,l=e[n],u=e[n+1],c=new Dd(l,u),h=l.distance(u);if(c.isDifferentiable()){if(t<=o+h)return c.tangentAtLength((i?1:-1)*(t-o));r=c}o+=h}if(r){const t=i?1:0;return r.tangentAt(t)}return null}simplify(t={}){const e=this.points;if(e.length<3)return this;const n=t.threshold||0;let r=0;for(;e[r+2];){const t=r+1,i=r+2,o=e[r],s=e[t],a=e[i];new Dd(o,a).closestPoint(s).distance(s)<=n?e.splice(t,1):r+=1}return this}toHull(){const t=this.points,e=t.length;if(0===e)return new Hd;let n=t[0];for(let r=1;r<e;r+=1)(t[r].y<n.y||t[r].y===n.y&&t[r].x>n.x)&&(n=t[r]);const r=[];for(let i=0;i<e;i+=1){let e=n.theta(t[i]);0===e&&(e=360),r.push([t[i],i,e])}if(r.sort(((t,e)=>{let n=t[2]-e[2];return 0===n&&(n=e[1]-t[1]),n})),r.length>2){const t=r[r.length-1];r.unshift(t)}const i={},o=[],s=t=>`${t[0].toString()}@${t[1]}`;for(;0!==r.length;){const t=r.pop(),e=t[0];if(i[s(t)])continue;let n=!1;for(;!n;)if(o.length<2)o.push(t),n=!0;else{const a=o.pop(),l=a[0],u=o.pop(),c=u[0],h=c.cross(l,e);if(h<0)o.push(u),o.push(a),o.push(t),n=!0;else if(0===h){const t=1e-10,n=l.angleBetween(c,e);Math.abs(n-180)<t||l.equals(e)||c.equals(l)?(i[s(a)]=l,o.push(u)):Math.abs((n+1)%360-1)<t&&(o.push(u),r.push(a))}else i[s(a)]=l,o.push(u)}}let a;o.length>2&&o.pop();let l=-1;for(let t=0,e=o.length;t<e;t+=1){const e=o[t][1];(void 0===a||e<a)&&(a=e,l=t)}let u=[];if(l>0){const t=o.slice(l),e=o.slice(0,l);u=t.concat(e)}else u=o;const c=[];for(let t=0,e=u.length;t<e;t+=1)c.push(u[t][0]);return new Hd(c)}equals(t){return null!=t&&(t.points.length===this.points.length&&t.points.every(((t,e)=>t.equals(this.points[e]))))}clone(){return new Hd(this.points.map((t=>t.clone())))}toJSON(){return this.points.map((t=>t.toJSON()))}serialize(){return this.points.map((t=>`${t.serialize()}`)).join(" ")}};!function(t){t.isPolyline=function(e){return null!=e&&e instanceof t}}(Hd||(Hd={})),function(t){t.parse=function(e){const n=e.trim();if(""===n)return new t;const r=[],i=n.split(/\s*,\s*|\s+/);for(let t=0,e=i.length;t<e;t+=2)r.push({x:+i[t],y:+i[t+1]});return new t(r)}}(Hd||(Hd={}));class $d extends Id{constructor(t,e,n,r){super(),this.PRECISION=3,this.start=jd.create(t),this.controlPoint1=jd.create(e),this.controlPoint2=jd.create(n),this.end=jd.create(r)}bbox(){const t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end,i=t.x,o=t.y,s=e.x,a=e.y,l=n.x,u=n.y,c=r.x,h=r.y,p=[],f=[[],[]];let d,g,y,v,m,b,w,x,P,A,C;for(let t=0;t<2;t+=1)if(0===t?(g=6*i-12*s+6*l,d=-3*i+9*s-9*l+3*c,y=3*s-3*i):(g=6*o-12*a+6*u,d=-3*o+9*a-9*u+3*h,y=3*a-3*o),Math.abs(d)<1e-12){if(Math.abs(g)<1e-12)continue;v=-y/g,v>0&&v<1&&p.push(v)}else w=g*g-4*y*d,x=Math.sqrt(w),w<0||(m=(-g+x)/(2*d),m>0&&m<1&&p.push(m),b=(-g-x)/(2*d),b>0&&b<1&&p.push(b));let E=p.length;const M=E;for(;E;)E-=1,v=p[E],C=1-v,P=C*C*C*i+3*C*C*v*s+3*C*v*v*l+v*v*v*c,f[0][E]=P,A=C*C*C*o+3*C*C*v*a+3*C*v*v*u+v*v*v*h,f[1][E]=A;p[M]=0,p[M+1]=1,f[0][M]=i,f[1][M]=o,f[0][M+1]=c,f[1][M+1]=h,p.length=M+2,f[0].length=M+2,f[1].length=M+2;const S=Math.min.apply(null,f[0]),T=Math.min.apply(null,f[1]),k=Math.max.apply(null,f[0]),O=Math.max.apply(null,f[1]);return new Vd(S,T,k-S,O-T)}closestPoint(t,e={}){return this.pointAtT(this.closestPointT(t,e))}closestPointLength(t,e={}){const n=this.getOptions(e);return this.lengthAtT(this.closestPointT(t,n),n)}closestPointNormalizedLength(t,e={}){const n=this.getOptions(e),r=this.closestPointLength(t,n);if(!r)return 0;const i=this.length(n);return 0===i?0:r/i}closestPointT(t,e={}){const n=this.getPrecision(e),r=this.getDivisions(e),i=Math.pow(10,-n);let o=null,s=0,a=0,l=0,u=0,c=0,h=null;const p=r.length;let f=p>0?1/p:0;for(r.forEach(((e,n)=>{const r=e.start.distance(t),i=e.end.distance(t),p=r+i;(null==h||p<h)&&(o=e,s=n*f,a=(n+1)*f,l=r,u=i,h=p,c=e.endpointDistance())}));;){const e=l?Math.abs(l-u)/l:0,n=null!=u?Math.abs(l-u)/u:0;if(e<i||n<i||(!l||l<c*i||(!u||u<c*i)))return l<=u?s:a;const r=o.divide(.5);f/=2;const h=r[0].start.distance(t),p=r[0].end.distance(t),d=h+p,g=r[1].start.distance(t),y=r[1].end.distance(t);d<=g+y?(o=r[0],a-=f,l=h,u=p):(o=r[1],s+=f,l=g,u=y)}}closestPointTangent(t,e={}){return this.tangentAtT(this.closestPointT(t,e))}containsPoint(t,e={}){return this.toPolyline(e).containsPoint(t)}divideAt(t,e={}){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);const n=this.tAt(t,e);return this.divideAtT(n)}divideAtLength(t,e={}){const n=this.tAtLength(t,e);return this.divideAtT(n)}divide(t){return this.divideAtT(t)}divideAtT(t){const e=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(t<=0)return[new $d(e,e,e,e),new $d(e,n,r,i)];if(t>=1)return[new $d(e,n,r,i),new $d(i,i,i,i)];const o=this.getSkeletonPoints(t),s=o.startControlPoint1,a=o.startControlPoint2,l=o.divider,u=o.dividerControlPoint1,c=o.dividerControlPoint2;return[new $d(e,s,a,l),new $d(l,u,c,i)]}endpointDistance(){return this.start.distance(this.end)}getSkeletonPoints(t){const e=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:r.clone()};if(t>=1)return{startControlPoint1:n.clone(),startControlPoint2:r.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};const o=new Dd(e,n).pointAt(t),s=new Dd(n,r).pointAt(t),a=new Dd(r,i).pointAt(t),l=new Dd(o,s).pointAt(t),u=new Dd(s,a).pointAt(t);return{startControlPoint1:o,startControlPoint2:l,divider:new Dd(l,u).pointAt(t),dividerControlPoint1:u,dividerControlPoint2:a}}getSubdivisions(t={}){const e=this.getPrecision(t);let n=[new $d(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===e)return n;let r=this.endpointDistance();const i=Math.pow(10,-e);let o=0;for(;;){o+=1;const t=[];n.forEach((e=>{const n=e.divide(.5);t.push(n[0],n[1])}));const e=t.reduce(((t,e)=>t+e.endpointDistance()),0);if(o>1&&(0!==e?(e-r)/e:0)<i)return t;n=t,r=e}}length(t={}){return this.getDivisions(t).reduce(((t,e)=>t+e.endpointDistance()),0)}lengthAtT(t,e={}){if(t<=0)return 0;const n=void 0===e.precision?this.PRECISION:e.precision;return this.divide(t)[0].length({precision:n})}pointAt(t,e={}){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();const n=this.tAt(t,e);return this.pointAtT(n)}pointAtLength(t,e={}){const n=this.tAtLength(t,e);return this.pointAtT(n)}pointAtT(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider}isDifferentiable(){const t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(r))}tangentAt(t,e={}){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);const n=this.tAt(t,e);return this.tangentAtT(n)}tangentAtLength(t,e={}){if(!this.isDifferentiable())return null;const n=this.tAtLength(t,e);return this.tangentAtT(n)}tangentAtT(t){if(!this.isDifferentiable())return null;t<0&&(t=0),t>1&&(t=1);const e=this.getSkeletonPoints(t),n=e.startControlPoint2,r=e.dividerControlPoint1,i=e.divider,o=new Dd(n,r);return o.translate(i.x-n.x,i.y-n.y),o}getPrecision(t={}){return null==t.precision?this.PRECISION:t.precision}getDivisions(t={}){if(null!=t.subdivisions)return t.subdivisions;const e=this.getPrecision(t);return this.getSubdivisions({precision:e})}getOptions(t={}){return{precision:this.getPrecision(t),subdivisions:this.getDivisions(t)}}tAt(t,e={}){if(t<=0)return 0;if(t>=1)return 1;const n=this.getOptions(e),r=this.length(n)*t;return this.tAtLength(r,n)}tAtLength(t,e={}){let n=!0;t<0&&(n=!1,t=-t);const r=this.getPrecision(e),i=this.getDivisions(e),o={precision:r,subdivisions:i};let s,a,l=null,u=0,c=0,h=0;const p=i.length;let f=p>0?1/p:0;for(let e=0;e<p;e+=1){const r=n?e:p-1-e,o=i[e],d=o.endpointDistance();if(t<=h+d){l=o,s=r*f,a=(r+1)*f,u=n?t-h:d+h-t,c=n?d+h-t:t-h;break}h+=d}if(null==l)return n?1:0;const d=this.length(o),g=Math.pow(10,-r);for(;;){let t,e,n;if(t=0!==d?u/d:0,t<g)return s;if(t=0!==d?c/d:0,t<g)return a;const r=l.divide(.5);f/=2;const i=r[0].endpointDistance(),o=r[1].endpointDistance();u<=i?(l=r[0],a-=f,e=u,n=i-e):(l=r[1],s+=f,e=u-i,n=o-e),u=e,c=n}}toPoints(t={}){const e=this.getDivisions(t),n=[e[0].start.clone()];return e.forEach((t=>n.push(t.end.clone()))),n}toPolyline(t={}){return new Hd(this.toPoints(t))}scale(t,e,n){return this.start.scale(t,e,n),this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this}rotate(t,e){return this.start.rotate(t,e),this.controlPoint1.rotate(t,e),this.controlPoint2.rotate(t,e),this.end.rotate(t,e),this}translate(t,e){return"number"==typeof t?(this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e)):(this.start.translate(t),this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this}equals(t){return null!=t&&this.start.equals(t.start)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)&&this.end.equals(t.end)}clone(){return new $d(this.start,this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}!function(t){t.isCurve=function(e){return null!=e&&e instanceof t}}($d||($d={})),function(t){function e(t){const e=t.length,n=[],r=[];let i=2;n[0]=t[0]/i;for(let o=1;o<e;o+=1)r[o]=1/i,i=(o<e-1?4:3.5)-r[o],n[o]=(t[o]-n[o-1])/i;for(let t=1;t<e;t+=1)n[e-t-1]-=r[e-t]*n[e-t];return n}t.throughPoints=function(n){if(null==n||Array.isArray(n)&&n.length<2)throw new Error("At least 2 points are required");const r=function(t){const n=t.map((t=>jd.clone(t))),r=[],i=[],o=n.length-1;if(1===o)return r[0]=new jd((2*n[0].x+n[1].x)/3,(2*n[0].y+n[1].y)/3),i[0]=new jd(2*r[0].x-n[0].x,2*r[0].y-n[0].y),[r,i];const s=[];for(let t=1;t<o-1;t+=1)s[t]=4*n[t].x+2*n[t+1].x;s[0]=n[0].x+2*n[1].x,s[o-1]=(8*n[o-1].x+n[o].x)/2;const a=e(s);for(let t=1;t<o-1;t+=1)s[t]=4*n[t].y+2*n[t+1].y;s[0]=n[0].y+2*n[1].y,s[o-1]=(8*n[o-1].y+n[o].y)/2;const l=e(s);for(let t=0;t<o;t+=1)r.push(new jd(a[t],l[t])),t<o-1?i.push(new jd(2*n[t+1].x-a[t+1],2*n[t+1].y-l[t+1])):i.push(new jd((n[o].x+a[o-1])/2,(n[o].y+l[o-1])/2));return[r,i]}(n),i=[];for(let e=0,o=r[0].length;e<o;e+=1){const o=new jd(r[0][e].x,r[0][e].y),s=new jd(r[1][e].x,r[1][e].y);i.push(new t(n[e],o,s,n[e+1]))}return i}}($d||($d={}));class Jd extends Id{constructor(){super(...arguments),this.isVisible=!0,this.isSegment=!0,this.isSubpathStart=!1}get end(){return this.endPoint}get start(){if(null==this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}closestPointT(t,e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}lengthAtT(t,e){if(t<=0)return 0;const n=this.length();return t>=1?n:n*t}divideAtT(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}pointAtT(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}tangentAtT(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}}class Xd extends Jd{constructor(t,e){super(),Dd.isLine(t)?this.endPoint=t.end.clone().round(2):this.endPoint=jd.create(t,e).round(2)}get type(){return"L"}get line(){return new Dd(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(t){return this.line.closestPoint(t)}closestPointLength(t){return this.line.closestPointLength(t)}closestPointNormalizedLength(t){return this.line.closestPointNormalizedLength(t)}closestPointTangent(t){return this.line.closestPointTangent(t)}length(){return this.line.length()}divideAt(t){const e=this.line.divideAt(t);return[new Xd(e[0]),new Xd(e[1])]}divideAtLength(t){const e=this.line.divideAtLength(t);return[new Xd(e[0]),new Xd(e[1])]}getSubdivisions(){return[]}pointAt(t){return this.line.pointAt(t)}pointAtLength(t){return this.line.pointAtLength(t)}tangentAt(t){return this.line.tangentAt(t)}tangentAtLength(t){return this.line.tangentAtLength(t)}isDifferentiable(){return null!=this.previousSegment&&!this.start.equals(this.end)}clone(){return new Xd(this.end)}scale(t,e,n){return this.end.scale(t,e,n),this}rotate(t,e){return this.end.rotate(t,e),this}translate(t,e){return"number"==typeof t?this.end.translate(t,e):this.end.translate(t),this}equals(t){return this.type===t.type&&this.start.equals(t.start)&&this.end.equals(t.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){const t=this.end;return`${this.type} ${t.x} ${t.y}`}}!function(t){t.create=function(...e){const n=e.length,r=e[0];if(Dd.isLine(r))return new t(r);if(jd.isPointLike(r))return 1===n?new t(r):e.map((e=>new t(e)));if(2===n)return new t(+e[0],+e[1]);const i=[];for(let r=0;r<n;r+=2){const n=+e[r],o=+e[r+1];i.push(new t(n,o))}return i}}(Xd||(Xd={}));class Yd extends Jd{get end(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}get type(){return"Z"}get line(){return new Dd(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(t){return this.line.closestPoint(t)}closestPointLength(t){return this.line.closestPointLength(t)}closestPointNormalizedLength(t){return this.line.closestPointNormalizedLength(t)}closestPointTangent(t){return this.line.closestPointTangent(t)}length(){return this.line.length()}divideAt(t){const e=this.line.divideAt(t);return[e[1].isDifferentiable()?new Xd(e[0]):this.clone(),new Xd(e[1])]}divideAtLength(t){const e=this.line.divideAtLength(t);return[e[1].isDifferentiable()?new Xd(e[0]):this.clone(),new Xd(e[1])]}getSubdivisions(){return[]}pointAt(t){return this.line.pointAt(t)}pointAtLength(t){return this.line.pointAtLength(t)}tangentAt(t){return this.line.tangentAt(t)}tangentAtLength(t){return this.line.tangentAtLength(t)}isDifferentiable(){return!(!this.previousSegment||!this.subpathStartSegment)&&!this.start.equals(this.end)}scale(){return this}rotate(){return this}translate(){return this}equals(t){return this.type===t.type&&this.start.equals(t.start)&&this.end.equals(t.end)}clone(){return new Yd}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return this.type}}!function(t){t.create=function(){return new t}}(Yd||(Yd={}));class Zd extends Jd{constructor(t,e){super(),this.isVisible=!1,this.isSubpathStart=!0,Dd.isLine(t)||$d.isCurve(t)?this.endPoint=t.end.clone().round(2):this.endPoint=jd.create(t,e).round(2)}get start(){throw new Error("Illegal access. Moveto segments should not need a start property.")}get type(){return"M"}bbox(){return null}closestPoint(){return this.end.clone()}closestPointLength(){return 0}closestPointNormalizedLength(){return 0}closestPointT(){return 1}closestPointTangent(){return null}length(){return 0}lengthAtT(){return 0}divideAt(){return[this.clone(),this.clone()]}divideAtLength(){return[this.clone(),this.clone()]}getSubdivisions(){return[]}pointAt(){return this.end.clone()}pointAtLength(){return this.end.clone()}pointAtT(){return this.end.clone()}tangentAt(){return null}tangentAtLength(){return null}tangentAtT(){return null}isDifferentiable(){return!1}scale(t,e,n){return this.end.scale(t,e,n),this}rotate(t,e){return this.end.rotate(t,e),this}translate(t,e){return"number"==typeof t?this.end.translate(t,e):this.end.translate(t),this}clone(){return new Zd(this.end)}equals(t){return this.type===t.type&&this.end.equals(t.end)}toJSON(){return{type:this.type,end:this.end.toJSON()}}serialize(){const t=this.end;return`${this.type} ${t.x} ${t.y}`}}!function(t){t.create=function(...e){const n=e.length,r=e[0];if(Dd.isLine(r))return new t(r);if($d.isCurve(r))return new t(r);if(jd.isPointLike(r)){if(1===n)return new t(r);const i=[];for(let r=0;r<n;r+=1)0===r?i.push(new t(e[r])):i.push(new Xd(e[r]));return i}if(2===n)return new t(+e[0],+e[1]);const i=[];for(let r=0;r<n;r+=2){const n=+e[r],o=+e[r+1];0===r?i.push(new t(n,o)):i.push(new Xd(n,o))}return i}}(Zd||(Zd={}));class Kd extends Jd{constructor(t,e,n,r,i,o){super(),$d.isCurve(t)?(this.controlPoint1=t.controlPoint1.clone().round(2),this.controlPoint2=t.controlPoint2.clone().round(2),this.endPoint=t.end.clone().round(2)):"number"==typeof t?(this.controlPoint1=new jd(t,e).round(2),this.controlPoint2=new jd(n,r).round(2),this.endPoint=new jd(i,o).round(2)):(this.controlPoint1=jd.create(t).round(2),this.controlPoint2=jd.create(e).round(2),this.endPoint=jd.create(n).round(2))}get type(){return"C"}get curve(){return new $d(this.start,this.controlPoint1,this.controlPoint2,this.end)}bbox(){return this.curve.bbox()}closestPoint(t){return this.curve.closestPoint(t)}closestPointLength(t){return this.curve.closestPointLength(t)}closestPointNormalizedLength(t){return this.curve.closestPointNormalizedLength(t)}closestPointTangent(t){return this.curve.closestPointTangent(t)}length(){return this.curve.length()}divideAt(t,e={}){const n=this.curve.divideAt(t,e);return[new Kd(n[0]),new Kd(n[1])]}divideAtLength(t,e={}){const n=this.curve.divideAtLength(t,e);return[new Kd(n[0]),new Kd(n[1])]}divideAtT(t){const e=this.curve.divideAtT(t);return[new Kd(e[0]),new Kd(e[1])]}getSubdivisions(){return[]}pointAt(t){return this.curve.pointAt(t)}pointAtLength(t){return this.curve.pointAtLength(t)}tangentAt(t){return this.curve.tangentAt(t)}tangentAtLength(t){return this.curve.tangentAtLength(t)}isDifferentiable(){if(!this.previousSegment)return!1;const t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(r))}scale(t,e,n){return this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this}rotate(t,e){return this.controlPoint1.rotate(t,e),this.controlPoint2.rotate(t,e),this.end.rotate(t,e),this}translate(t,e){return"number"==typeof t?(this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e)):(this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this}equals(t){return this.start.equals(t.start)&&this.end.equals(t.end)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)}clone(){return new Kd(this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){const t=this.controlPoint1,e=this.controlPoint2,n=this.end;return[this.type,t.x,t.y,e.x,e.y,n.x,n.y].join(" ")}}function Qd(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}}function tg(t,e,n,r,i,o){const s=1/3,a=2/3;return[s*t+a*n,s*e+a*r,s*i+a*n,s*o+a*r,i,o]}function eg(t,e,n,r,i,o,s,a,l,u){const c=120*Math.PI/180,h=Math.PI/180*(+i||0);let p,f,d,g,y,v=[];if(u)f=u[0],d=u[1],g=u[2],y=u[3];else{p=Qd(t,e,-h),t=p.x,e=p.y,p=Qd(a,l,-h);const i=(t-(a=p.x))/2,u=(e-(l=p.y))/2;let c=i*i/(n*n)+u*u/(r*r);c>1&&(c=Math.sqrt(c),n*=c,r*=c);const v=n*n,m=r*r,b=(o===s?-1:1)*Math.sqrt(Math.abs((v*m-v*u*u-m*i*i)/(v*u*u+m*i*i)));g=b*n*u/r+(t+a)/2,y=b*-r*i/n+(e+l)/2,f=Math.asin((e-y)/r),d=Math.asin((l-y)/r),f=t<g?Math.PI-f:f,d=a<g?Math.PI-d:d,f<0&&(f=2*Math.PI+f),d<0&&(d=2*Math.PI+d),s&&f>d&&(f-=2*Math.PI),!s&&d>f&&(d-=2*Math.PI)}let m=d-f;if(Math.abs(m)>c){const t=d,e=a,o=l;d=f+c*(s&&d>f?1:-1),v=eg(a=g+n*Math.cos(d),l=y+r*Math.sin(d),n,r,i,0,s,e,o,[d,t,g,y])}m=d-f;const b=Math.cos(f),w=Math.sin(f),x=Math.cos(d),P=Math.sin(d),A=Math.tan(m/4),C=4/3*(n*A),E=4/3*(r*A),M=[t,e],S=[t+C*w,e-E*b],T=[a+C*P,l-E*x],k=[a,l];if(S[0]=2*M[0]-S[0],S[1]=2*M[1]-S[1],u)return[S,T,k].concat(v);{v=[S,T,k].concat(v).join().split(",");const t=[],e=v.length;for(let n=0;n<e;n+=1)t[n]=n%2?Qd(+v[n-1],+v[n],h).y:Qd(+v[n],+v[n+1],h).x;return t}}function ng(t){const e=function(t){if(!t)return null;const e="\t\n\v\f\r   ᠎             　\u2028\u2029",n=new RegExp(`([a-z])[${e},]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[${e}]*,?[${e}]*)+)`,"ig"),r=new RegExp(`(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[${e}]*,?[${e}]*`,"ig"),i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},o=[];return t.replace(n,((t,e,n)=>{const s=[];let a=e.toLowerCase();n.replace(r,((t,e)=>(e&&s.push(+e),t))),"m"===a&&s.length>2&&(o.push([e,...s.splice(0,2)]),a="l",e="m"===e?"l":"L");const l=i[a];for(;s.length>=l&&(o.push([e,...s.splice(0,l)]),l););return t})),o}(t);if(!e||!e.length)return[["M",0,0]];let n=0,r=0,i=0,o=0;const s=[];for(let t=0,a=e.length;t<a;t+=1){const a=[];s.push(a);const l=e[t],u=l[0];if(u!==u.toUpperCase())switch(a[0]=u.toUpperCase(),a[0]){case"A":a[1]=l[1],a[2]=l[2],a[3]=l[3],a[4]=l[4],a[5]=l[5],a[6]=+l[6]+n,a[7]=+l[7]+r;break;case"V":a[1]=+l[1]+r;break;case"H":a[1]=+l[1]+n;break;case"M":i=+l[1]+n,o=+l[2]+r;for(let t=1,e=l.length;t<e;t+=1)a[t]=+l[t]+(t%2?n:r);break;default:for(let t=1,e=l.length;t<e;t+=1)a[t]=+l[t]+(t%2?n:r)}else for(let t=0,e=l.length;t<e;t+=1)a[t]=l[t];switch(a[0]){case"Z":n=+i,r=+o;break;case"H":n=a[1];break;case"V":r=a[1];break;case"M":i=a[a.length-2],o=a[a.length-1],n=a[a.length-2],r=a[a.length-1];break;default:n=a[a.length-2],r=a[a.length-1]}}return s}function rg(t){const e=ng(t),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function r(t,e,n){let r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(t[0]in{T:1,Q:1}||(e.qx=null,e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":return 0===parseFloat(t[1])||0===parseFloat(t[2])?["L",t[6],t[7]]:["C"].concat(eg.apply(0,[e.x,e.y].concat(t.slice(1))));case"S":return"C"===n||"S"===n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),["C",r,i].concat(t.slice(1));case"T":return"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),["C"].concat(tg(e.x,e.y,e.qx,e.qy,t[1],t[2]));case"Q":return e.qx=t[1],e.qy=t[2],["C"].concat(tg(e.x,e.y,t[1],t[2],t[3],t[4]));case"H":return["L"].concat(t[1],e.y);case"V":return["L"].concat(e.x,t[1])}return t}function i(t,n){if(t[n].length>7){t[n].shift();const r=t[n];for(;r.length;)o[n]="A",n+=1,t.splice(n,0,["C"].concat(r.splice(0,6)));t.splice(n,1),a=e.length}}const o=[];let s="",a=e.length;for(let t=0;t<a;t+=1){let a="";e[t]&&(a=e[t][0]),"C"!==a&&(o[t]=a,t>0&&(s=o[t-1])),e[t]=r(e[t],n,s),"A"!==o[t]&&"C"===a&&(o[t]="C"),i(e,t);const l=e[t],u=l.length;n.x=l[u-2],n.y=l[u-1],n.bx=parseFloat(l[u-4])||n.x,n.by=parseFloat(l[u-3])||n.y}return e[0][0]&&"M"===e[0][0]||e.unshift(["M",0,0]),e}function ig(e){return rg(e).map((e=>e.map((e=>"string"==typeof e?e:t.GeometryUtil.round(e,2))))).join(",").split(",").join(" ")}!function(t){t.create=function(...e){const n=e.length,r=e[0];if($d.isCurve(r))return new t(r);if(jd.isPointLike(r)){if(3===n)return new t(e[0],e[1],e[2]);const r=[];for(let i=0;i<n;i+=3)r.push(new t(e[i],e[i+1],e[i+2]));return r}if(6===n)return new t(e[0],e[1],e[2],e[3],e[4],e[5]);const i=[];for(let r=0;r<n;r+=6)i.push(new t(e[r],e[r+1],e[r+2],e[r+3],e[r+4],e[r+5]));return i}}(Kd||(Kd={}));let og=class extends Id{constructor(t){if(super(),this.PRECISION=3,this.segments=[],Array.isArray(t))if(Dd.isLine(t[0])||$d.isCurve(t[0])){let e=null;t.forEach(((t,n)=>{0===n&&this.appendSegment(og.createSegment("M",t.start)),null==e||e.end.equals(t.start)||this.appendSegment(og.createSegment("M",t.start)),Dd.isLine(t)?this.appendSegment(og.createSegment("L",t.end)):$d.isCurve(t)&&this.appendSegment(og.createSegment("C",t.controlPoint1,t.controlPoint2,t.end)),e=t}))}else{t.forEach((t=>{t.isSegment&&this.appendSegment(t)}))}else null!=t&&(Dd.isLine(t)?(this.appendSegment(og.createSegment("M",t.start)),this.appendSegment(og.createSegment("L",t.end))):$d.isCurve(t)?(this.appendSegment(og.createSegment("M",t.start)),this.appendSegment(og.createSegment("C",t.controlPoint1,t.controlPoint2,t.end))):Hd.isPolyline(t)?t.points&&t.points.length&&t.points.forEach(((t,e)=>{const n=0===e?og.createSegment("M",t):og.createSegment("L",t);this.appendSegment(n)})):t.isSegment&&this.appendSegment(t))}get start(){const t=this.segments,e=t.length;if(0===e)return null;for(let n=0;n<e;n+=1){const e=t[n];if(e.isVisible)return e.start}return t[e-1].end}get end(){const t=this.segments,e=t.length;if(0===e)return null;for(let n=e-1;n>=0;n-=1){const e=t[n];if(e.isVisible)return e.end}return t[e-1].end}moveTo(...t){return this.appendSegment(Zd.create.call(null,...t))}lineTo(...t){return this.appendSegment(Xd.create.call(null,...t))}curveTo(...t){return this.appendSegment(Kd.create.call(null,...t))}arcTo(t,e,n,r,i,o,s){const a=this.end||new jd,l="number"==typeof o?qd(a.x,a.y,t,e,n,r,i,o,s):qd(a.x,a.y,t,e,n,r,i,o.x,o.y);if(null!=l)for(let t=0,e=l.length;t<e;t+=6)this.curveTo(l[t],l[t+1],l[t+2],l[t+3],l[t+4],l[t+5]);return this}quadTo(t,e,n,r){const i=this.end||new jd,o=["M",i.x,i.y];if("number"==typeof t)o.push("Q",t,e,n,r);else{const n=e;o.push("Q",t.x,t.y,n.x,n.y)}const s=og.parse(o.join(" "));return this.appendSegment(s.segments.slice(1)),this}close(){return this.appendSegment(Yd.create())}drawPoints(t,e={}){const n=Ud(t,e),r=og.parse(n);r&&r.segments&&this.appendSegment(r.segments)}bbox(){const t=this.segments,e=t.length;if(0===e)return null;let n;for(let r=0;r<e;r+=1){const e=t[r];if(e.isVisible){const t=e.bbox();null!=t&&(n=n?n.union(t):t)}}if(null!=n)return n;const r=t[e-1];return new Vd(r.end.x,r.end.y,0,0)}appendSegment(t){const e=this.segments.length;let n,r=0!==e?this.segments[e-1]:null;if(Array.isArray(t))for(let e=0,i=t.length;e<i;e+=1){const i=t[e];n=this.prepareSegment(i,r,null),this.segments.push(n),r=n}else null!=t&&t.isSegment&&(n=this.prepareSegment(t,r,null),this.segments.push(n));return this}insertSegment(t,e){const n=this.segments.length;if(t<0&&(t=n+t+1),t>n||t<0)throw new Error("Index out of range.");let r,i=null,o=null;if(0!==n&&(t>=1?(i=this.segments[t-1],o=i.nextSegment):(i=null,o=this.segments[0])),Array.isArray(e))for(let n=0,s=e.length;n<s;n+=1){const s=e[n];r=this.prepareSegment(s,i,o),this.segments.splice(t+n,0,r),i=r}else r=this.prepareSegment(e,i,o),this.segments.splice(t,0,r);return this}removeSegment(t){const e=this.fixIndex(t),n=this.segments.splice(e,1)[0],r=n.previousSegment,i=n.nextSegment;return r&&(r.nextSegment=i),i&&(i.previousSegment=r),n.isSubpathStart&&i&&this.updateSubpathStartSegment(i),n}replaceSegment(t,e){const n=this.fixIndex(t);let r;const i=this.segments[n];let o=i.previousSegment;const s=i.nextSegment;let a=i.isSubpathStart;if(Array.isArray(e)){this.segments.splice(t,1);for(let n=0,i=e.length;n<i;n+=1){const i=e[n];r=this.prepareSegment(i,o,s),this.segments.splice(t+n,0,r),o=r,a&&r.isSubpathStart&&(a=!1)}}else r=this.prepareSegment(e,o,s),this.segments.splice(n,1,r),a&&r.isSubpathStart&&(a=!1);a&&s&&this.updateSubpathStartSegment(s)}getSegment(t){const e=this.fixIndex(t);return this.segments[e]}fixIndex(t){const e=this.segments.length;if(0===e)throw new Error("Path has no segments.");let n=t;for(;n<0;)n=e+n;if(n>=e||n<0)throw new Error("Index out of range.");return n}segmentAt(t,e={}){const n=this.segmentIndexAt(t,e);return n?this.getSegment(n):null}segmentAtLength(t,e={}){const n=this.segmentIndexAtLength(t,e);return n?this.getSegment(n):null}segmentIndexAt(e,n={}){if(0===this.segments.length)return null;const r=t.GeometryUtil.clamp(e,0,1),i=this.getOptions(n),o=this.length(i)*r;return this.segmentIndexAtLength(o,i)}segmentIndexAtLength(t,e={}){const n=this.segments.length;if(0===n)return null;let r=!0;t<0&&(r=!1,t=-t);const i=this.getPrecision(e),o=this.getSubdivisions(e);let s=0,a=null;for(let e=0;e<n;e+=1){const l=r?e:n-1-e,u=this.segments[l],c=o[l],h=u.length({precision:i,subdivisions:c});if(u.isVisible){if(t<=s+h)return l;a=l}s+=h}return a}getSegmentSubdivisions(t={}){const e=this.getPrecision(t),n=[];for(let t=0,r=this.segments.length;t<r;t+=1){const r=this.segments[t].getSubdivisions({precision:e});n.push(r)}return n}updateSubpathStartSegment(t){let e=t.previousSegment,n=t;for(;n&&!n.isSubpathStart;)n.subpathStartSegment=null!=e?e.subpathStartSegment:null,e=n,n=n.nextSegment}prepareSegment(t,e,n){t.previousSegment=e,t.nextSegment=n,null!=e&&(e.nextSegment=t),null!=n&&(n.previousSegment=t);let r=t;return t.isSubpathStart&&(t.subpathStartSegment=t,r=n),null!=r&&this.updateSubpathStartSegment(r),t}closestPoint(t,e={}){const n=this.closestPointT(t,e);return n?this.pointAtT(n):null}closestPointLength(t,e={}){const n=this.getOptions(e),r=this.closestPointT(t,n);return r?this.lengthAtT(r,n):0}closestPointNormalizedLength(t,e={}){const n=this.getOptions(e),r=this.closestPointLength(t,n);if(0===r)return 0;const i=this.length(n);return 0===i?0:r/i}closestPointT(e,n={}){if(0===this.segments.length)return null;const r=this.getPrecision(n),i=this.getSubdivisions(n);let o,s=1/0;for(let n=0,a=this.segments.length;n<a;n+=1){const a=this.segments[n],l=i[n];if(a.isVisible){const i=a.closestPointT(e,{precision:r,subdivisions:l}),u=a.pointAtT(i),c=t.GeometryUtil.squaredLength(u,e);c<s&&(o={segmentIndex:n,value:i},s=c)}}return o||{segmentIndex:this.segments.length-1,value:1}}closestPointTangent(e,n={}){if(0===this.segments.length)return null;const r=this.getPrecision(n),i=this.getSubdivisions(n);let o,s=1/0;for(let n=0,a=this.segments.length;n<a;n+=1){const a=this.segments[n],l=i[n];if(a.isDifferentiable()){const n=a.closestPointT(e,{precision:r,subdivisions:l}),i=a.pointAtT(n),u=t.GeometryUtil.squaredLength(i,e);u<s&&(o=a.tangentAtT(n),s=u)}}return o||null}containsPoint(t,e={}){const n=this.toPolylines(e);if(!n)return!1;let r=0;for(let e=0,i=n.length;e<i;e+=1){n[e].containsPoint(t)&&(r+=1)}return r%2==1}pointAt(t,e={}){if(0===this.segments.length)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();const n=this.getOptions(e),r=this.length(n)*t;return this.pointAtLength(r,n)}pointAtLength(t,e={}){if(0===this.segments.length)return null;if(0===t)return this.start.clone();let n=!0;t<0&&(n=!1,t=-t);const r=this.getPrecision(e),i=this.getSubdivisions(e);let o,s=0;for(let e=0,a=this.segments.length;e<a;e+=1){const l=n?e:a-1-e,u=this.segments[l],c=i[l],h=u.length({precision:r,subdivisions:c});if(u.isVisible){if(t<=s+h)return u.pointAtLength((n?1:-1)*(t-s),{precision:r,subdivisions:c});o=u}s+=h}if(o)return n?o.end:o.start;return this.segments[this.segments.length-1].end.clone()}pointAtT(e){const n=this.segments,r=n.length;if(0===r)return null;const i=e.segmentIndex;if(i<0)return n[0].pointAtT(0);if(i>=r)return n[r-1].pointAtT(1);const o=t.GeometryUtil.clamp(e.value,0,1);return n[i].pointAtT(o)}divideAt(e,n={}){if(0===this.segments.length)return null;const r=t.GeometryUtil.clamp(e,0,1),i=this.getOptions(n),o=this.length(i)*r;return this.divideAtLength(o,i)}divideAtLength(t,e={}){if(0===this.segments.length)return null;let n=!0;t<0&&(n=!1,t=-t);const r=this.getPrecision(e),i=this.getSubdivisions(e);let o,s,a,l,u,c=0;for(let e=0,u=this.segments.length;e<u;e+=1){const h=n?e:u-1-e,p=this.getSegment(h),f={precision:r,subdivisions:i[h]},d=p.length(f);if(p.isDifferentiable()&&(a=p,l=h,t<=c+d)){s=h,o=p.divideAtLength((n?1:-1)*(t-c),f);break}c+=d}if(!a)return null;o||(s=l,u=n?1:0,o=a.divideAtT(u));const h=this.clone(),p=s;h.replaceSegment(p,o);const f=p;let d=p+1,g=p+2;o[0].isDifferentiable()||(h.removeSegment(f),d-=1,g-=1);const y=h.getSegment(d).start;h.insertSegment(d,og.createSegment("M",y)),g+=1,o[1].isDifferentiable()||(h.removeSegment(g-1),g-=1);const v=g-f-1;for(let t=g,e=h.segments.length;t<e;t+=1){const e=this.getSegment(t-v),n=h.getSegment(t);if("Z"===n.type&&!e.subpathStartSegment.end.equals(n.subpathStartSegment.end)){const n=og.createSegment("L",e.end);h.replaceSegment(t,n)}}return[new og(h.segments.slice(0,d)),new og(h.segments.slice(d))]}intersectsWithLine(t,e={}){const n=this.toPolylines(e);if(null==n)return null;let r=null;for(let e=0,i=n.length;e<i;e+=1){const i=n[e],o=t.intersect(i);o&&(null==r&&(r=[]),Array.isArray(o)?r.push(...o):r.push(o))}return r}isDifferentiable(){for(let t=0,e=this.segments.length;t<e;t+=1){if(this.segments[t].isDifferentiable())return!0}return!1}isValid(){const t=this.segments;return 0===t.length||"M"===t[0].type}length(t={}){if(0===this.segments.length)return 0;const e=this.getSubdivisions(t);let n=0;for(let t=0,r=this.segments.length;t<r;t+=1){const r=this.segments[t],i=e[t];n+=r.length({subdivisions:i})}return n}lengthAtT(e,n={}){const r=this.segments.length;if(0===r)return 0;let i=e.segmentIndex;if(i<0)return 0;let o=t.GeometryUtil.clamp(e.value,0,1);i>=r&&(i=r-1,o=1);const s=this.getPrecision(n),a=this.getSubdivisions(n);let l=0;for(let t=0;t<i;t+=1){const e=this.segments[t],n=a[t];l+=e.length({precision:s,subdivisions:n})}const u=this.segments[i],c=a[i];return l+=u.lengthAtT(o,{precision:s,subdivisions:c}),l}tangentAt(e,n={}){if(0===this.segments.length)return null;const r=t.GeometryUtil.clamp(e,0,1),i=this.getOptions(n),o=this.length(i)*r;return this.tangentAtLength(o,i)}tangentAtLength(t,e={}){if(0===this.segments.length)return null;let n=!0;t<0&&(n=!1,t=-t);const r=this.getPrecision(e),i=this.getSubdivisions(e);let o,s=0;for(let e=0,a=this.segments.length;e<a;e+=1){const l=n?e:a-1-e,u=this.segments[l],c=i[l],h=u.length({precision:r,subdivisions:c});if(u.isDifferentiable()){if(t<=s+h)return u.tangentAtLength((n?1:-1)*(t-s),{precision:r,subdivisions:c});o=u}s+=h}if(o){const t=n?1:0;return o.tangentAtT(t)}return null}tangentAtT(e){const n=this.segments.length;if(0===n)return null;const r=e.segmentIndex;if(r<0)return this.segments[0].tangentAtT(0);if(r>=n)return this.segments[n-1].tangentAtT(1);const i=t.GeometryUtil.clamp(e.value,0,1);return this.segments[r].tangentAtT(i)}getPrecision(t={}){return null==t.precision?this.PRECISION:t.precision}getSubdivisions(t={}){if(null==t.segmentSubdivisions){const e=this.getPrecision(t);return this.getSegmentSubdivisions({precision:e})}return t.segmentSubdivisions}getOptions(t={}){return{precision:this.getPrecision(t),segmentSubdivisions:this.getSubdivisions(t)}}toPoints(t={}){const e=this.segments,n=e.length;if(0===n)return null;const r=this.getSubdivisions(t),i=[];let o=[];for(let t=0;t<n;t+=1){const n=e[t];if(n.isVisible){const e=r[t];e.length>0?e.forEach((t=>o.push(t.start))):o.push(n.start)}else o.length>0&&(o.push(e[t-1].end),i.push(o),o=[])}return o.length>0&&(o.push(this.end),i.push(o)),i}toPolylines(t={}){const e=this.toPoints(t);return e?e.map((t=>new Hd(t))):null}scale(t,e,n){return this.segments.forEach((r=>r.scale(t,e,n))),this}rotate(t,e){return this.segments.forEach((n=>n.rotate(t,e))),this}translate(t,e){return"number"==typeof t?this.segments.forEach((n=>n.translate(t,e))):this.segments.forEach((e=>e.translate(t))),this}clone(){const t=new og;return this.segments.forEach((e=>t.appendSegment(e.clone()))),t}equals(t){if(null==t)return!1;const e=this.segments,n=t.segments,r=e.length;if(n.length!==r)return!1;for(let t=0;t<r;t+=1){const r=e[t],i=n[t];if(r.type!==i.type||!r.equals(i))return!1}return!0}toJSON(){return this.segments.map((t=>t.toJSON()))}serialize(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map((t=>t.serialize())).join(" ")}toString(){return this.serialize()}};!function(t){t.isPath=function(e){return null!=e&&e instanceof t}}(og||(og={})),function(t){function e(t,...e){if("M"===t)return Zd.create.call(null,...e);if("L"===t)return Xd.create.call(null,...e);if("C"===t)return Kd.create.call(null,...e);if("z"===t||"Z"===t)return Yd.create();throw new Error(`Invalid path segment type "${t}"`)}t.parse=function(n){if(!n)return new t;const r=new t,i=t.normalize(n).match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g);if(null!=i)for(let t=0,n=i.length;t<n;t+=1){const n=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,o=i[t].match(n);if(null!=o){const t=o[0],n=o.slice(1).map((t=>+t)),i=e.call(null,t,...n);r.appendSegment(i)}}return r},t.createSegment=e}(og||(og={})),function(t){t.normalize=ig,t.isValid=Fd,t.drawArc=Wd,t.drawPoints=Ud,t.arcToCurves=qd}(og||(og={}));var sg=function(){function e(t){this.options=r({},t),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}return Object.defineProperty(e.prototype,"names",{get:function(){return Object.keys(this.data)},enumerable:!1,configurable:!0}),e.prototype.register=function(e,n,r){var i=this;if(void 0===r&&(r=!1),"object"!=typeof e){!this.exist(e)||r||t.Platform.isApplyingHMR()||this.onDuplicated(e);var o=this.options.process,s=o?lh(o,this,e,n):n;return this.data[e]=s,s}Object.keys(e).forEach((function(t){i.register(t,e[t],n)}))},e.prototype.unregister=function(t){var e=t?this.data[t]:null;return delete this.data[t],e},e.prototype.get=function(t){return t?this.data[t]:null},e.prototype.exist=function(t){return!!t&&null!=this.data[t]},e.prototype.onDuplicated=function(t){try{throw this.options.onConflict&&lh(this.options.onConflict,this,t),new Error("".concat(ur(this.options.type)," with name '").concat(t,"' already registered."))}catch(t){throw t}},e.prototype.onNotFound=function(t,e){throw new Error(this.getSpellingSuggestion(t,e))},e.prototype.getSpellingSuggestion=function(t,e){var n=this.getSpellingSuggestionForName(t),r=e?"".concat(e," ").concat(Ha(this.options.type)):this.options.type;return"".concat(ur(r)," with name '").concat(t,"' does not exist.").concat(n?" Did you mean '".concat(n,"'?"):"")},e.prototype.getSpellingSuggestionForName=function(t){return Dh(t,Object.keys(this.data),(function(t){return t}))},e}();!function(t){t.create=function(e){return new t(e)}}(sg||(sg={}));var ag={color:"#aaaaaa",thickness:1,markup:"rect",update:function(t,e){var n=e.thickness*e.sx,r=e.thickness*e.sy;Hp(t,{width:n,height:r,rx:n,ry:r,fill:e.color})}},lg={color:"#aaaaaa",thickness:1,markup:"rect",update:function(t,e){var n=e.sx<=1?e.thickness*e.sx:e.thickness;Hp(t,{width:n,height:n,rx:n,ry:n,fill:e.color})}},ug={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update:function(t,e){var n=e.width,r=e.height,i=e.thickness;Hp(t,{d:n-i>=0&&r-i>=0?["M",n,0,"H0 M0 0 V0",r].join(" "):"M 0 0 0 0",stroke:e.color,"stroke-width":e.thickness})}},cg=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update:function(t,e){var n=e.width,r=e.height,i=e.thickness;Hp(t,{d:n-i>=0&&r-i>=0?["M",n,0,"H0 M0 0 V0",r].join(" "):"M 0 0 0 0",stroke:e.color,"stroke-width":e.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update:function(t,e){var n,r=e.factor||1,i=e.width*r,o=e.height*r,s=e.thickness;n=i-s>=0&&o-s>=0?["M",i,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",e.width=i,e.height=o,Hp(t,{d:n,stroke:e.color,"stroke-width":e.thickness})}}],hg=Object.freeze({__proto__:null,dot:ag,fixedDot:lg,mesh:ug,doubleMesh:cg}),pg=function(){function t(){this.patterns={},this.root=wf.create(Ep(),{width:"100%",height:"100%"},[Cp("defs")]).node}return t.prototype.add=function(t,e){var n=this.root.childNodes[0];n&&n.appendChild(e),this.patterns[t]=e,wf.create("rect",{width:"100%",height:"100%",fill:"url(#".concat(t,")")}).appendTo(this.root)},t.prototype.get=function(t){return this.patterns[t]},t.prototype.has=function(t){return null!=this.patterns[t]},t}();!function(t){t.presets=hg,t.registry=sg.create({type:"grid"}),t.registry.register(t.presets,!0)}(pg||(pg={}));var fg,dg=function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(2*n,0),i.scale(-1,1),i.drawImage(t,0,0,n,r),e},gg=function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=n,e.height=2*r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(0,2*r),i.scale(1,-1),i.drawImage(t,0,0,n,r),e},yg=function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=2*r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,-1,e.width,e.height),i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,1,e.width,0),i.drawImage(t,0,0,n,r),i.setTransform(1,0,0,-1,0,e.height),i.drawImage(t,0,0,n,r),e},vg=Object.freeze({__proto__:null,flipX:dg,flipY:gg,flipXY:yg,watermark:function(e,n){var r=e.width,i=e.height,o=document.createElement("canvas");o.width=3*r,o.height=3*i;for(var s=o.getContext("2d"),a=null!=n.angle?-n.angle:-20,l=t.Angle.toRad(a),u=o.width/4,c=o.height/4,h=0;h<4;h+=1)for(var p=0;p<4;p+=1)(h+p)%2>0&&(s.setTransform(1,0,0,1,(2*h-1)*u,(2*p-1)*c),s.rotate(l),s.drawImage(e,-r/2,-i/2,r,i));return o}});function mg(t,e){return null!=t?t:e}function bg(t,e){return null!=t&&Number.isFinite(t)?t:e}!function(t){t.presets=r({},vg),t.presets["flip-x"]=dg,t.presets["flip-y"]=gg,t.presets["flip-xy"]=yg,t.registry=sg.create({type:"background pattern"}),t.registry.register(t.presets,!0)}(fg||(fg={}));var wg,xg=Object.freeze({__proto__:null,outline:function(t){void 0===t&&(t={});var e=mg(t.color,"blue"),n=bg(t.width,1),r=bg(t.margin,2),i=bg(t.opacity,1),o=r,s=r+n;return'\n    <filter>\n      <feFlood flood-color="'.concat(e,'" flood-opacity="').concat(i,'" result="colored"/>\n      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="').concat(s,'" />\n      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="').concat(o,'" />\n      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>\n      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>\n      <feMerge>\n        <feMergeNode in="outline"/>\n        <feMergeNode in="SourceGraphic"/>\n      </feMerge>\n    </filter>\n  ').trim()},highlight:function(t){void 0===t&&(t={});var e=mg(t.color,"red"),n=bg(t.blur,0),r=bg(t.width,1),i=bg(t.opacity,1);return'\n      <filter>\n        <feFlood flood-color="'.concat(e,'" flood-opacity="').concat(i,'" result="colored"/>\n        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="').concat(r,'"/>\n        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>\n        <feGaussianBlur result="blured" in="composed" stdDeviation="').concat(n,'"/>\n        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>\n      </filter>\n    ').trim()},blur:function(t){void 0===t&&(t={});var e=bg(t.x,2),n=null!=t.y&&Number.isFinite(t.y)?[e,t.y]:e;return'\n    <filter>\n      <feGaussianBlur stdDeviation="'.concat(n,'"/>\n    </filter>\n  ').trim()},dropShadow:function(t){void 0===t&&(t={});var e=bg(t.dx,0),n=bg(t.dy,0),r=mg(t.color,"black"),i=bg(t.blur,4),o=bg(t.opacity,1);return"SVGFEDropShadowElement"in window?'<filter>\n         <feDropShadow stdDeviation="'.concat(i,'" dx="').concat(e,'" dy="').concat(n,'" flood-color="').concat(r,'" flood-opacity="').concat(o,'" />\n       </filter>').trim():'<filter>\n         <feGaussianBlur in="SourceAlpha" stdDeviation="'.concat(i,'" />\n         <feOffset dx="').concat(e,'" dy="').concat(n,'" result="offsetblur" />\n         <feFlood flood-color="').concat(r,'" />\n         <feComposite in2="offsetblur" operator="in" />\n         <feComponentTransfer>\n           <feFuncA type="linear" slope="').concat(o,'" />\n         </feComponentTransfer>\n         <feMerge>\n           <feMergeNode/>\n           <feMergeNode in="SourceGraphic"/>\n         </feMerge>\n       </filter>').trim()},grayScale:function(t){void 0===t&&(t={});var e=bg(t.amount,1),n=.7152-.7152*(1-e),r=.0722-.0722*(1-e),i=.2126-.2126*(1-e),o=.7152+.2848*(1-e),s=.0722-.0722*(1-e),a=.2126-.2126*(1-e),l=.0722+.9278*(1-e);return'\n    <filter>\n      <feColorMatrix type="matrix" values="'.concat(.2126+.7874*(1-e)," ").concat(n," ").concat(r," 0 0 ").concat(i," ").concat(o," ").concat(s," 0 0 ").concat(a," ").concat(n," ").concat(l,' 0 0 0 0 0 1 0"/>\n    </filter>\n  ').trim()},sepia:function(t){void 0===t&&(t={});var e=bg(t.amount,1),n=.769-.769*(1-e),r=.189-.189*(1-e),i=.349-.349*(1-e),o=.686+.314*(1-e),s=.168-.168*(1-e),a=.272-.272*(1-e),l=.534-.534*(1-e),u=.131+.869*(1-e);return'\n      <filter>\n        <feColorMatrix type="matrix" values="'.concat(.393+.607*(1-e)," ").concat(n," ").concat(r," 0 0 ").concat(i," ").concat(o," ").concat(s," 0 0 ").concat(a," ").concat(l," ").concat(u,' 0 0 0 0 0 1 0"/>\n      </filter>\n    ').trim()},saturate:function(t){void 0===t&&(t={});var e=bg(t.amount,1);return'\n      <filter>\n        <feColorMatrix type="saturate" values="'.concat(1-e,'"/>\n      </filter>\n    ').trim()},hueRotate:function(t){void 0===t&&(t={});var e=bg(t.angle,0);return'\n      <filter>\n        <feColorMatrix type="hueRotate" values="'.concat(e,'"/>\n      </filter>\n    ').trim()},invert:function(t){void 0===t&&(t={});var e=bg(t.amount,1),n=1-e;return'\n      <filter>\n        <feComponentTransfer>\n          <feFuncR type="table" tableValues="'.concat(e," ").concat(n,'"/>\n          <feFuncG type="table" tableValues="').concat(e," ").concat(n,'"/>\n          <feFuncB type="table" tableValues="').concat(e," ").concat(n,'"/>\n        </feComponentTransfer>\n      </filter>\n    ').trim()},brightness:function(t){void 0===t&&(t={});var e=bg(t.amount,1);return'\n    <filter>\n      <feComponentTransfer>\n        <feFuncR type="linear" slope="'.concat(e,'"/>\n        <feFuncG type="linear" slope="').concat(e,'"/>\n        <feFuncB type="linear" slope="').concat(e,'"/>\n      </feComponentTransfer>\n    </filter>\n  ').trim()},contrast:function(t){void 0===t&&(t={});var e=bg(t.amount,1),n=.5-e/2;return'\n    <filter>\n     <feComponentTransfer>\n        <feFuncR type="linear" slope="'.concat(e,'" intercept="').concat(n,'"/>\n        <feFuncG type="linear" slope="').concat(e,'" intercept="').concat(n,'"/>\n        <feFuncB type="linear" slope="').concat(e,'" intercept="').concat(n,'"/>\n      </feComponentTransfer>\n    </filter>\n  ').trim()}});!function(t){t.presets=xg,t.registry=sg.create({type:"filter"}),t.registry.register(t.presets,!0)}(wg||(wg={}));var Pg,Ag,Cg={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},Eg={position:Jg("x","width","origin")},Mg={position:Jg("y","height","origin")},Sg={position:Jg("x","width","corner")},Tg={position:Jg("y","height","corner")},kg={set:Xg("width","width")},Og={set:Xg("height","height")},Ng={set:Xg("rx","width")},_g={set:Xg("ry","height")},Lg={set:(Pg=Xg("r","width"),Ag=Xg("r","height"),function(t,e){var n=e.refBBox;return lh(n.height>n.width?Pg:Ag,this,t,e)})},Bg={set:function(t,e){var n=e.refBBox,r=parseFloat(t),i=Fh(t);i&&(r/=100);var o,s=Math.sqrt(n.height*n.height+n.width*n.width);return Number.isFinite(r)&&(o=i||r>=0&&r<=1?r*s:Math.max(r+s,0)),{r:o}}},Ig={set:Xg("cx","width")},jg={set:Xg("cy","height")},Vg={set:Zg({resetOffset:!0})},Dg={set:Zg({resetOffset:!1})},Rg={set:Kg({resetOffset:!0})},zg={set:Kg({resetOffset:!1})},Fg=Lg,Gg=Vg,Ug=Rg,qg=Eg,Wg=Mg,Hg=kg,$g=Og;function Jg(t,e,n){return function(r,i){var o=i.refBBox;if(null==r)return null;var s,a=parseFloat(r),l=Fh(r);if(l&&(a/=100),Number.isFinite(a)){var u=o[n];s=l||a>0&&a<1?u[t]+o[e]*a:u[t]+a}var c=new jd;return c[t]=s||0,c}}function Xg(t,e){return function(n,r){var i=r.refBBox,o=parseFloat(n),s=Fh(n);s&&(o/=100);var a={};if(Number.isFinite(o)){var l=s||o>=0&&o<=1?o*i[e]:Math.max(o+i[e],0);a[t]=l}return a}}function Yg(t,e){var n="x6-shape",r=e&&e.resetOffset;return function(e,i){var o=i.elem,s=i.refBBox,a=mf(o,n);if(!a||a.value!==e){var l=t(e);a={value:e,shape:l,shapeBBox:l.bbox()},mf(o,n,a)}var u=a.shape.clone(),c=a.shapeBBox.clone(),h=c.getOrigin(),p=s.getOrigin();c.x=p.x,c.y=p.y;var f=s.getMaxScaleToFit(c,p),d=0===c.width||0===s.width?1:f.sx,g=0===c.height||0===s.height?1:f.sy;return u.scale(d,g,h),r&&u.translate(-h.x,-h.y),u}}function Zg(t){var e=Yg((function(t){return og.parse(t)}),t);return function(t,n){return{d:e(t,n).serialize()}}}function Kg(t){var e=Yg((function(t){return new Hd(t)}),t);return function(t,n){return{points:e(t,n).serialize()}}}var Qg={qualify:Dn,set:function(t,e){var n=e.view;return"url(#".concat(n.graph.defineGradient(t),")")}},ty={qualify:Dn,set:function(t,e){var n=e.view,i=n.cell,o=r({},t);if(i.isEdge()&&"linearGradient"===o.type){var s=n,a=s.sourcePoint,l=s.targetPoint;o.id="gradient-".concat(o.type,"-").concat(i.id),o.attrs=r(r({},o.attrs),{x1:a.x,y1:a.y,x2:l.x,y2:l.y,gradientUnits:"userSpaceOnUse"}),n.graph.defs.remove(o.id)}return"url(#".concat(n.graph.defineGradient(o),")")}},ey={qualify:function(t,e){var n=e.attrs;return null==n.textWrap||!Dn(n.textWrap)},set:function(t,e){var n=e.view,i=e.elem,o=e.attrs,s="x6-text",a=mf(i,s),l=function(t){try{return JSON.parse(t)}catch(e){return t}},u={x:o.x,eol:o.eol,annotations:l(o.annotations),textPath:l(o["text-path"]||o.textPath),textVerticalAnchor:o["text-vertical-anchor"]||o.textVerticalAnchor,displayEmpty:"true"===(o["display-empty"]||o.displayEmpty),lineHeight:o["line-height"]||o.lineHeight},c=o["font-size"]||o.fontSize,h=JSON.stringify([t,u]);if(c&&i.setAttribute("font-size",c),null==a||a!==h){var p=u.textPath;if(null!=p&&"object"==typeof p){var f=p.selector;if("string"==typeof f){var d=n.find(f)[0];d instanceof SVGPathElement&&(mp(d),u.textPath=r({"xlink:href":"#".concat(d.id)},p))}}Ef(i,"".concat(t),u),mf(i,s,h)}}},ny={qualify:Dn,set:function(t,e){var n=e.view,r=e.elem,i=e.attrs,o=e.refBBox,s=t,a=s.width||0;Fh(a)?o.width*=parseFloat(a)/100:a<=0?o.width+=a:o.width=a;var l,u=s.height||0;Fh(u)?o.height*=parseFloat(u)/100:u<=0?o.height+=u:o.height=u;var c=s.text;null==c&&(c=i.text),l=null!=c?Tf("".concat(c),o,{"font-weight":i["font-weight"]||i.fontWeight,"font-size":i["font-size"]||i.fontSize,"font-family":i["font-family"]||i.fontFamily,lineHeight:i.lineHeight},{ellipsis:s.ellipsis}):"",lh(ey.set,this,l,{view:n,elem:r,attrs:i,refBBox:o,cell:n.cell})}},ry=function(t,e){return void 0!==e.attrs.text},iy={qualify:ry},oy={qualify:ry},sy={qualify:ry},ay={qualify:ry},ly={qualify:ry},uy={qualify:ry},cy={qualify:function(t,e){return e.elem instanceof SVGElement},set:function(t,e){var n=e.elem,r="x6-title",i="".concat(t),o=mf(n,r);if(null==o||o!==i){mf(n,r,i);var s=n.firstChild;if(s&&"TITLE"===s.tagName.toUpperCase()){s.textContent=i}else{var a=document.createElementNS(n.namespaceURI,"title");a.textContent=i,n.insertBefore(a,s)}}}},hy={offset:fy("x","width","right")},py={offset:fy("y","height","bottom")};function fy(t,e,n){return function(r,i){var o,s=i.refBBox,a=new jd;return o="middle"===r?s[e]/2:r===n?s[e]:"number"==typeof r&&Number.isFinite(r)?r>-1&&r<1?-s[e]*r:-r:Fh(r)?s[e]*parseFloat(r)/100:0,a[t]=-(s[t]+o),a}}var dy={qualify:Dn,set:function(t,e){df(e.elem,t)}},gy={qualify:Dn,set:function(t,e){var n=e.view;return"url(#".concat(n.graph.defineFilter(t),")")}};function yy(t,e,n){var r,i;"object"==typeof e?(r=e.x,i=e.y):(r=e,i=n);var o=og.parse(t),s=o.bbox();if(s){var a=-s.height/2-s.y,l=-s.width/2-s.x;"number"==typeof r&&(l-=r),"number"==typeof i&&(a-=i),o.translate(l,a)}return o.serialize()}function vy(t,e,n,i,o){void 0===i&&(i=3/4),void 0===o&&(o={});var s=t.size||10,a=t.width||s,l=t.height||s,u=new og,c={};if(e)u.moveTo(a,0).lineTo(0,l/2).lineTo(a,l),c.fill="none";else{if(u.moveTo(0,l/2),u.lineTo(a,0),!n){var h=Qr(i,0,1);u.lineTo(a*h,l/2)}u.lineTo(a,l),u.close()}return r(r(r({},c),o),{tagName:"path",d:yy(u.serialize(),{x:null!=t.offset?t.offset:-a/2})})}var my,by=function(t){var e=t.r,n=i(t,["r"]),o=e||5;return r(r({cx:o},n),{tagName:"circle",r:o})},wy=Object.freeze({__proto__:null,block:function(t){return vy({size:t.size,width:t.width,height:t.height,offset:t.offset},!0===t.open,!0,void 0,i(t,["size","width","height","offset","open"]))},classic:function(t){return vy({size:t.size,width:t.width,height:t.height,offset:t.offset},!1,!1,t.factor,i(t,["size","width","height","offset","factor"]))},diamond:function(t){var e=t.size,n=t.width,o=t.height,s=t.offset,a=i(t,["size","width","height","offset"]),l=e||10,u=n||l,c=o||l,h=new og;return h.moveTo(0,c/2).lineTo(u/2,0).lineTo(u,c/2).lineTo(u/2,c).close(),r(r({},a),{tagName:"path",d:yy(h.serialize(),null==s?-u/2:s)})},path:function(t){var e=t.d,n=t.offsetX,o=t.offsetY,s=i(t,["d","offsetX","offsetY"]);return r(r({},s),{tagName:"path",d:yy(e,n,o)})},cross:function(t){var e=t.size,n=t.width,o=t.height,s=t.offset,a=i(t,["size","width","height","offset"]),l=e||10,u=n||l,c=o||l,h=new og;return h.moveTo(0,0).lineTo(u,c).moveTo(0,c).lineTo(u,0),r(r({},a),{tagName:"path",fill:"none",d:yy(h.serialize(),s||-u/2)})},async:function(t){var e=t.width,n=t.height,o=t.offset,s=t.open,a=t.flip,l=i(t,["width","height","offset","open","flip"]),u=n||6,c=e||10,h=!0===s,p=!0===a,f=r(r({},l),{tagName:"path"});p&&(u=-u);var d=new og;return d.moveTo(0,u).lineTo(c,0),h?f.fill="none":(d.lineTo(c,u),d.close()),f.d=yy(d.serialize(),{x:o||-c/2,y:u/2}),f},circle:by,circlePlus:function(t){var e=t.r,n=i(t,["r"]),o=e||5,s=new og;return s.moveTo(o,0).lineTo(o,2*o),s.moveTo(0,o).lineTo(2*o,o),{children:[r(r({},by({r:o})),{fill:"none"}),r(r({},n),{tagName:"path",d:yy(s.serialize(),-o)})]}},ellipse:function(t){var e=t.rx,n=t.ry,o=i(t,["rx","ry"]),s=e||5,a=n||5;return r(r({cx:s},o),{tagName:"ellipse",rx:s,ry:a})}});function xy(t){return"string"==typeof t||Dn(t)}!function(t){t.presets=wy,t.registry=sg.create({type:"marker"}),t.registry.register(t.presets,!0)}(my||(my={})),function(t){t.normalize=yy}(my||(my={}));var Py={qualify:xy,set:function(t,e){return Ey("marker-start",t,e.view,e.attrs)}},Ay={qualify:xy,set:function(t,e){return Ey("marker-end",t,e.view,e.attrs,{transform:"rotate(180)"})}},Cy={qualify:xy,set:function(t,e){return Ey("marker-mid",t,e.view,e.attrs)}};function Ey(t,e,n,o,s){var a;void 0===s&&(s={});var l="string"==typeof e?{name:e}:e,u=l.name,c=l.args,h=i(l,["name","args"]),p=h;if(u&&"string"==typeof u){var f=my.registry.get(u);if(!f)return my.registry.onNotFound(u);p=f(r(r({},h),c))}var d=r(r(r({},function(t,e){var n={},r=t.stroke;"string"==typeof r&&(n.stroke=r,n.fill=r);var i=t.strokeOpacity;null==i&&(i=t["stroke-opacity"]);null==i&&(i=t.opacity);null!=i&&(n["stroke-opacity"]=i,n["fill-opacity"]=i);if("marker-mid"!==e){var o=parseFloat(t.strokeWidth||t["stroke-width"]);if(Number.isFinite(o)&&o>1){var s=Math.ceil(o/2);n.refX="marker-start"===e?s:-s}}return n}(o,t)),s),p);return(a={})[t]="url(#".concat(n.graph.defineMarker(d),")"),a}var My=function(t,e){return e.view.cell.isEdge()},Sy={qualify:My,set:function(t,e){var n,r,i,o,s,a=e.view,l=t.reverse||!1,u=t.stubs||0;if(Number.isFinite(u)&&0!==u)if(l){var c;f=void 0,h=a.getConnectionLength()||0;u<0?(f=(h+u)/2,c=-u):(f=u,c=h-2*u),s=null===(o=null===(i=null===(r=null===(n=null==(p=a.getConnection())?void 0:p.divideAtLength(f))||void 0===n?void 0:n[1])||void 0===r?void 0:r.divideAtLength(c))||void 0===i?void 0:i[0])||void 0===o?void 0:o.serialize()}else{var h,p,f=void 0;if(u<0)f=((h=a.getConnectionLength()||0)+u)/2;else f=u;if(p=a.getConnection()){var d=p.divideAtLength(f),g=p.divideAtLength(-f);d&&g&&(s="".concat(d[0].serialize()," ").concat(g[1].serialize()))}}return{d:s||a.getConnectionPathData()}}},Ty={qualify:My,set:By("getTangentAtLength",{rotate:!0})},ky={qualify:My,set:By("getTangentAtLength",{rotate:!1})},Oy={qualify:My,set:By("getTangentAtRatio",{rotate:!0})},Ny={qualify:My,set:By("getTangentAtRatio",{rotate:!1})},_y=Ty,Ly=Oy;function By(t,e){var n={x:1,y:0};return function(r,i){var o,s,a=i.view,l=a[t](Number(r));return l?(s=e.rotate?l.vector().vectorAngle(n):0,o=l.start):(o=a.path.start,s=0),0===s?{transform:"translate(".concat(o.x,",").concat(o.y,"')")}:{transform:"translate(".concat(o.x,",").concat(o.y,"') rotate(").concat(s,")")}}}var Iy,jy=Object.freeze({__proto__:null,ref:{},refX:Eg,refY:Mg,refDx:Sg,refDy:Tg,refWidth:kg,refHeight:Og,refRx:Ng,refRy:_g,refRInscribed:Lg,refRCircumscribed:Bg,refCx:Ig,refCy:jg,refDResetOffset:Vg,refDKeepOffset:Dg,refPointsResetOffset:Rg,refPointsKeepOffset:zg,refR:Fg,refD:Gg,refPoints:Ug,refX2:qg,refY2:Wg,refWidth2:Hg,refHeight2:$g,fill:Qg,stroke:ty,text:ey,textWrap:ny,lineHeight:iy,textVerticalAnchor:oy,textPath:sy,annotations:ay,eol:ly,displayEmpty:uy,title:cy,xAlign:hy,yAlign:py,resetOffset:{offset:function(t,e){var n=e.refBBox;return t?{x:-n.x,y:-n.y}:{x:0,y:0}}},style:dy,html:{set:function(t,e){e.elem.innerHTML="".concat(t)}},filter:gy,port:{set:function(t){return null!=t&&"object"==typeof t&&t.id?t.id:t}},sourceMarker:Py,targetMarker:Ay,vertexMarker:Cy,connection:Sy,atConnectionLengthKeepGradient:Ty,atConnectionLengthIgnoreGradient:ky,atConnectionRatioKeepGradient:Oy,atConnectionRatioIgnoreGradient:Ny,atConnectionLength:_y,atConnectionRatio:Ly});!function(t){t.isValidDefinition=function(t,e,n){if(null!=t){if("string"==typeof t)return!0;if("function"!=typeof t.qualify||lh(t.qualify,this,e,n))return!0}return!1}}(Iy||(Iy={})),function(t){t.presets=r(r({},Cg),jy),t.registry=sg.create({type:"attribute definition"}),t.registry.register(t.presets,!0)}(Iy||(Iy={}));var Vy={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,prefix:function(t){return"".concat(Vy.prefixCls,"-").concat(t)}},Dy=Vy.prefix("highlighted"),Ry={highlight:function(t,e,n){fp(e,n&&n.className||Dy)},unhighlight:function(t,e,n){dp(e,n&&n.className||Dy)}},zy=Vy.prefix("highlight-opacity"),Fy={highlight:function(t,e){fp(e,zy)},unhighlight:function(t,e){dp(e,zy)}};t.Util=void 0,function(t){var e=Cp("svg");function n(t,e){var n=$f(t.x,t.y).matrixTransform(e);return new jd(n.x,n.y)}function r(t,n){var r=e.createSVGPoint();r.x=t.x,r.y=t.y;var i=r.matrixTransform(n);r.x=t.x+t.width,r.y=t.y;var o=r.matrixTransform(n);r.x=t.x+t.width,r.y=t.y+t.height;var s=r.matrixTransform(n);r.x=t.x,r.y=t.y+t.height;var a=r.matrixTransform(n),l=Math.min(i.x,o.x,s.x,a.x),u=Math.max(i.x,o.x,s.x,a.x),c=Math.min(i.y,o.y,s.y,a.y),h=Math.max(i.y,o.y,s.y,a.y);return new Vd(l,c,u-l,h-c)}function i(t,e){var n;if(void 0===e&&(e={}),!t.ownerSVGElement||!bp(t)){if(zp(t)){var s=o(t),a=s.left,l=s.top,u=s.width,c=s.height;return new Vd(a,l,u,c)}return new Vd(0,0,0,0)}var h=e.target;if(!e.recursive){try{n=t.getBBox()}catch(e){n={x:t.clientLeft,y:t.clientTop,width:t.clientWidth,height:t.clientHeight}}return h?r(n,ld(t,h)):Vd.create(n)}var p=t.childNodes,f=p.length;if(0===f)return i(t,{target:h});h||(h=t);for(var d=0;d<f;d+=1){var g=p[d],y=void 0;y=0===g.childNodes.length?i(g,{target:h}):i(g,{target:h,recursive:!0}),n=n?n.union(y):y}return n}function o(t){var e=0,n=0,r=0,i=0;if(t){for(var o=t;o;)e+=o.offsetLeft,n+=o.offsetTop,(o=o.offsetParent)&&(e+=parseInt(lf(o,"borderLeft"),10),n+=parseInt(lf(o,"borderTop"),10));r=t.offsetWidth,i=t.offsetHeight}return{left:e,top:n,width:r,height:i}}function s(t){var e=function(e){var n=t.getAttribute(e),r=n?parseFloat(n):0;return Number.isNaN(r)?0:r};switch(t instanceof SVGElement&&t.nodeName.toLowerCase()){case"rect":return new Vd(e("x"),e("y"),e("width"),e("height"));case"circle":return new Rd(e("cx"),e("cy"),e("r"),e("r"));case"ellipse":return new Rd(e("cx"),e("cy"),e("rx"),e("ry"));case"polyline":var n=jf(t);return new Hd(n);case"polygon":return(n=jf(t)).length>1&&n.push(n[0]),new Hd(n);case"path":var r=t.getAttribute("d");return og.isValid(r)||(r=og.normalize(r)),og.parse(r);case"line":return new Dd(e("x1"),e("y1"),e("x2"),e("y2"))}return i(t)}function a(t){if(null==t)return null;var e=t;do{var n=e.tagName;if("string"!=typeof n)return null;if(n=n.toUpperCase(),pp(e,"x6-port"))e=e.nextElementSibling;else if("G"===n)e=e.firstElementChild;else{if("TITLE"!==n)break;e=e.nextElementSibling}}while(e);return e}t.transformPoint=n,t.transformLine=function(t,e){return new Dd(n(t.start,e),n(t.end,e))},t.transformPolyline=function(t,e){var r=t instanceof Hd?t.points:t;return Array.isArray(r)||(r=[]),new Hd(r.map((function(t){return n(t,e)})))},t.transformRectangle=r,t.bbox=function(t,e,n){var i,o=t.ownerSVGElement;if(!o)return new Vd(0,0,0,0);try{i=t.getBBox()}catch(e){i={x:t.clientLeft,y:t.clientTop,width:t.clientWidth,height:t.clientHeight}}return e?Vd.create(i):r(i,ld(t,n||o))},t.getBBox=i,t.getBoundingOffsetRect=o,t.toGeometryShape=s,t.translateAndAutoOrient=function(t,e,n,r){var o=jd.create(e),s=jd.create(n);r||(r=t instanceof SVGSVGElement?t:t.ownerSVGElement);var a=ad(t);t.setAttribute("transform","");var l=i(t,{target:r}).scale(a.sx,a.sy),u=Xf();u.setTranslate(-l.x-l.width/2,-l.y-l.height/2);var c=Xf(),h=o.angleBetween(s,o.clone().translate(1,0));h&&c.setRotate(h,0,0);var p=Xf(),f=o.clone().move(s,l.width/2);p.setTranslate(2*o.x-f.x,2*o.y-f.y);var d=ld(t,r),g=Xf();g.setMatrix(p.matrix.multiply(c.matrix.multiply(u.matrix.multiply(d.scale(a.sx,a.sy))))),t.setAttribute("transform",Zf(g.matrix))},t.findShapeNode=a,t.getBBoxV2=function(t){var e=a(t);if(!bp(e)){if(zp(t)){var n=o(t),r=n.left,i=n.top,l=n.width,u=n.height;return new Vd(r,i,l,u)}return new Vd(0,0,0,0)}return s(e).bbox()||Vd.create()}}(t.Util||(t.Util={}));var Gy,Uy={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},qy={highlight:function(e,n,i){var o=Gy.getHighlighterId(n,i);if(!Gy.hasCache(o)){i=Ko({},i,Uy);var s,a,l=wf.create(n);try{s=l.toPathData()}catch(e){a=t.Util.bbox(l.node,!0),s=zf(r(r({},i),a))}var u=Cp("path");if(Hp(u,r({d:s,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},i.attrs?Jp(i.attrs):null)),e.isEdgeElement(n))Hp(u,"d",e.getConnectionPathData());else{var c=l.getTransformToElement(e.container),h=i.padding;if(h){null==a&&(a=t.Util.bbox(l.node,!0));var p=a.x+a.width/2,f=a.y+a.height/2;a=t.Util.transformRectangle(a,c);var d=Math.max(a.width,1),g=Math.max(a.height,1),y=(d+h)/d,v=(g+h)/g,m=Jf({a:y,b:0,c:0,d:v,e:p-y*p,f:f-v*f});c=c.multiply(m)}id(u,c)}fp(u,Vy.prefix("highlight-stroke"));var b=e.cell,w=function(){return Gy.removeHighlighter(o)};b.on("removed",w),b.model&&b.model.on("reseted",w),e.container.appendChild(u),Gy.setCache(o,u)}},unhighlight:function(t,e,n){Gy.removeHighlighter(Gy.getHighlighterId(e,n))}};!function(t){t.getHighlighterId=function(t,e){return mp(t),t.id+JSON.stringify(e)};var e={};t.setCache=function(t,n){e[t]=n},t.hasCache=function(t){return null!=e[t]},t.removeHighlighter=function(t){var n=e[t];n&&(Lp(n),delete e[t])}}(Gy||(Gy={}));var Wy,Hy=Object.freeze({__proto__:null,className:Ry,opacity:Fy,stroke:qy});function $y(t,e){return void 0===e&&(e={}),new jd(Gh(e.x,t.width),Gh(e.y,t.height))}function Jy(t,e,n){return r({angle:e,position:t.toJSON()},n)}!function(t){t.check=function(t,e){if("function"!=typeof e.highlight)throw new Error("Highlighter '".concat(t,"' is missing required `highlight()` method"));if("function"!=typeof e.unhighlight)throw new Error("Highlighter '".concat(t,"' is missing required `unhighlight()` method"))}}(Wy||(Wy={})),function(t){t.presets=Hy,t.registry=sg.create({type:"highlighter"}),t.registry.register(t.presets,!0)}(Wy||(Wy={}));function Xy(t,e,n,r){var i=e.getCenter(),o=e.getTopCenter(),s=e.width/e.height,a=Rd.fromRect(e),l=t.length;return t.map((function(t,e){var u=n+r(e,l),c=o.clone().rotate(-u,i).scale(s,1,i),h=t.compensateRotate?-a.tangentTheta(c):0;return(t.dx||t.dy)&&c.translate(t.dx||0,t.dy||0),t.dr&&c.move(i,t.dr),Jy(c.round(),h,t)}))}function Yy(t,e,n,r){var o=new Dd(e,n),s=t.length;return t.map((function(t,e){var n=t.strict,a=i(t,["strict"]),l=n||r.strict?(e+1)/(s+1):(e+.5)/s,u=o.pointAt(l);return(a.dx||a.dy)&&u.translate(a.dx||0,a.dy||0),Jy(u.round(),0,a)}))}var Zy,Ky=Object.freeze({__proto__:null,absolute:function(t,e){return t.map((function(t){var n=t.x,r=t.y,i=t.angle;return Jy($y(e,{x:n,y:r}),i||0)}))},ellipse:function(t,e,n){var r=n.start||0,i=n.step||20;return Xy(t,e,r,(function(t,e){return(t+.5-e/2)*i}))},ellipseSpread:function(t,e,n){var r=n.start||0,i=n.step||360/t.length;return Xy(t,e,r,(function(t){return t*i}))},line:function(t,e,n){return Yy(t,$y(e,n.start||e.getOrigin()),$y(e,n.end||e.getCorner()),n)},left:function(t,e,n){return Yy(t,e.getTopLeft(),e.getBottomLeft(),n)},right:function(t,e,n){return Yy(t,e.getTopRight(),e.getBottomRight(),n)},top:function(t,e,n){return Yy(t,e.getTopLeft(),e.getTopRight(),n)},bottom:function(t,e,n){return Yy(t,e.getBottomLeft(),e.getBottomRight(),n)}});!function(t){t.presets=Ky,t.registry=sg.create({type:"port layout"}),t.registry.register(t.presets,!0)}(Zy||(Zy={}));var Qy={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function tv(t,e){var n=e||{},r=n.x,i=n.y,o=n.angle,s=n.attrs;return Ko({},{angle:o,attrs:s,position:{x:r,y:i}},t,Qy)}function ev(t,e,n,r){var i,o,s,a,l=null!=r.offset?r.offset:15,u=e.getCenter().theta(t),c=rv(e),h=0;return u<c[1]||u>c[2]?(i=".3em",o=l,s=0,a="start"):u<c[0]?(i="0",o=0,s=-l,n?(h=-90,a="start"):a="middle"):u<c[3]?(i=".3em",o=-l,s=0,a="end"):(i=".6em",o=0,s=l,n?(h=90,a="start"):a="middle"),tv({position:{x:Math.round(o),y:Math.round(s)},angle:h,attrs:{".":{y:i,"text-anchor":a}}},r)}function nv(t,e,n,r){var i,o,s,a,l=null!=r.offset?r.offset:15,u=e.getCenter().theta(t),c=rv(e),h=0;return u<c[1]||u>c[2]?(i=".3em",o=-l,s=0,a="end"):u<c[0]?(i=".6em",o=0,s=l,n?(h=90,a="start"):a="middle"):u<c[3]?(i=".3em",o=l,s=0,a="start"):(i="0em",o=0,s=-l,n?(h=-90,a="start"):a="middle"),tv({position:{x:Math.round(o),y:Math.round(s)},angle:h,attrs:{".":{y:i,"text-anchor":a}}},r)}function rv(t){var e=t.getCenter(),n=e.theta(t.getTopLeft()),r=e.theta(t.getBottomLeft()),i=e.theta(t.getBottomRight());return[n,e.theta(t.getTopRight()),i,r]}function iv(t,e,n){var r,i=null!=n.offset?n.offset:20,o=new jd(0,0),s=-t.theta(o),a=".3em",l=s;return(s+90)%180==0?(r=e?"end":"middle",e||-270!==s||(a="0em")):s>-270&&s<-90?(r="start",l=s-180):r="end",tv({position:t.clone().move(o,i).diff(t).round().round().toJSON(),angle:e?l:0,attrs:{".":{y:a,"text-anchor":r}}},n)}var ov,sv,av,lv=Object.freeze({__proto__:null,manual:function(t,e,n){return tv({position:e.getTopLeft()},n)},left:function(t,e,n){return tv({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},n)},right:function(t,e,n){return tv({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},n)},top:function(t,e,n){return tv({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},n)},bottom:function(t,e,n){return tv({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},n)},outside:function(t,e,n){return ev(t,e,!1,n)},outsideOriented:function(t,e,n){return ev(t,e,!0,n)},inside:function(t,e,n){return nv(t,e,!1,n)},insideOriented:function(t,e,n){return nv(t,e,!0,n)},radial:function(t,e,n){return iv(t.diff(e.getCenter()),!1,n)},radialOriented:function(t,e,n){return iv(t.diff(e.getCenter()),!0,n)}});!function(t){t.presets=lv,t.registry=sg.create({type:"port label layout"}),t.registry.register(t.presets,!0)}(ov||(ov={})),t.View=function(t){function e(){var n=t.call(this)||this;return n.cid=av.uniqueId(),e.views[n.cid]=n,n}return n(e,t),Object.defineProperty(e.prototype,"priority",{get:function(){return 2},enumerable:!1,configurable:!0}),e.prototype.confirmUpdate=function(t,e){return 0},e.prototype.empty=function(t){return void 0===t&&(t=this.container),Bp(t),this},e.prototype.unmount=function(t){return void 0===t&&(t=this.container),Lp(t),this},e.prototype.remove=function(t){return void 0===t&&(t=this.container),t===this.container&&(this.removeEventListeners(document),this.onRemove(),delete e.views[this.cid]),this.unmount(t),this},e.prototype.onRemove=function(){},e.prototype.setClass=function(t,e){void 0===e&&(e=this.container),e.classList.value=Array.isArray(t)?t.join(" "):t},e.prototype.addClass=function(t,e){return void 0===e&&(e=this.container),fp(e,Array.isArray(t)?t.join(" "):t),this},e.prototype.removeClass=function(t,e){return void 0===e&&(e=this.container),dp(e,Array.isArray(t)?t.join(" "):t),this},e.prototype.setStyle=function(t,e){return void 0===e&&(e=this.container),df(e,t),this},e.prototype.setAttrs=function(t,e){return void 0===e&&(e=this.container),null!=t&&null!=e&&Hp(e,t),this},e.prototype.findAttr=function(t,e){void 0===e&&(e=this.container);for(var n=e;n&&1===n.nodeType;){var r=n.getAttribute(t);if(null!=r)return r;if(n===this.container)return null;n=n.parentNode}return null},e.prototype.find=function(t,n,r){return void 0===n&&(n=this.container),void 0===r&&(r=this.selectors),e.find(t,n,r).elems},e.prototype.findOne=function(t,e,n){void 0===e&&(e=this.container),void 0===n&&(n=this.selectors);var r=this.find(t,e,n);return r.length>0?r[0]:null},e.prototype.findByAttr=function(t,e){void 0===e&&(e=this.container);for(var n=e;n&&n.getAttribute;){var r=n.getAttribute(t);if((null!=r||n===this.container)&&"false"!==r)return n;n=n.parentNode}return null},e.prototype.getSelector=function(t,e){var n;if(t===this.container)return"string"==typeof e&&(n="> ".concat(e)),n;if(t){var r=Tp(t)+1;n="".concat(t.tagName.toLowerCase(),":nth-child(").concat(r,")"),e&&(n+=" > ".concat(e)),n=this.getSelector(t.parentNode,n)}return n},e.prototype.prefixClassName=function(t){return Vy.prefix(t)},e.prototype.delegateEvents=function(t,e){var n=this;if(null==t)return this;e||this.undelegateEvents();var r=/^(\S+)\s*(.*)$/;return Object.keys(t).forEach((function(e){var i=e.match(r);if(null!=i){var o=n.getEventHandler(t[e]);"function"==typeof o&&n.delegateEvent(i[1],i[2],o)}})),this},e.prototype.undelegateEvents=function(){return yd.off(this.container,this.getEventNamespace()),this},e.prototype.delegateDocumentEvents=function(t,e){return this.addEventListeners(document,t,e),this},e.prototype.undelegateDocumentEvents=function(){return this.removeEventListeners(document),this},e.prototype.delegateEvent=function(t,e,n){return yd.on(this.container,t+this.getEventNamespace(),e,n),this},e.prototype.undelegateEvent=function(t,e,n){var r=t+this.getEventNamespace();return null==e?yd.off(this.container,r):"string"==typeof e?yd.off(this.container,r,e,n):yd.off(this.container,r,e),this},e.prototype.addEventListeners=function(t,e,n){var r=this;if(null==e)return this;var i=this.getEventNamespace();return Object.keys(e).forEach((function(o){var s=r.getEventHandler(e[o]);"function"==typeof s&&yd.on(t,o+i,n,s)})),this},e.prototype.removeEventListeners=function(t){return null!=t&&yd.off(t,this.getEventNamespace()),this},e.prototype.getEventNamespace=function(){return".".concat(Vy.prefixCls,"-event-").concat(this.cid)},e.prototype.getEventHandler=function(t){var e,n=this;if("string"==typeof t){var r=this[t];"function"==typeof r&&(e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.call.apply(r,s([n],t,!1))})}else e=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.call.apply(t,s([n],e,!1))};return e},e.prototype.getEventTarget=function(t,e){void 0===e&&(e={});var n=t.target,r=t.type,i=t.clientX,o=void 0===i?0:i,s=t.clientY,a=void 0===s?0:s;return e.fromPoint||"touchmove"===r||"touchend"===r?document.elementFromPoint(o,a):n},e.prototype.stopPropagation=function(t){return this.setEventData(t,{propagationStopped:!0}),this},e.prototype.isPropagationStopped=function(t){return!0===this.getEventData(t).propagationStopped},e.prototype.getEventData=function(t){return this.eventData(t)},e.prototype.setEventData=function(t,e){return this.eventData(t,e)},e.prototype.eventData=function(t,e){if(null==t)throw new TypeError("Event object required");var n=t.data,i="__".concat(this.cid,"__");return null==e?null==n?{}:n[i]||{}:(null==n&&(n=t.data={}),null==n[i]?n[i]=r({},e):n[i]=r(r({},n[i]),e),n[i])},e.prototype.normalizeEvent=function(t){return e.normalizeEvent(t)},e}(Mh),(sv=t.View||(t.View={})).createElement=function(t,e){return e?Cp(t||"g"):Ap(t||"div")},sv.find=function(t,e,n){if(!t||"."===t)return{elems:[e]};if(n){var r=n[t];if(r)return{elems:Array.isArray(r)?r:[r]}}if(Vy.useCSSSelector){var i=t.includes(">")?":scope ".concat(t):t;return{isCSSSelector:!0,elems:Array.prototype.slice.call(e.querySelectorAll(i))}}return{elems:[]}},sv.normalizeEvent=function(t){var e=t,n=t.originalEvent,r=n&&n.changedTouches&&n.changedTouches[0];if(r){for(var i in t)void 0===r[i]&&(r[i]=t[i]);e=r}var o=e.target;if(o){var s=o.correspondingUseElement;s&&(e.target=s)}return e},function(t){t.views={},t.getView=function(e){return t.views[e]||null}}(t.View||(t.View={})),function(t){var e=0;t.uniqueId=function(){var t="v".concat(e);return e+=1,t}}(av||(av={}));var uv=function(){function e(t){this.view=t,this.clean()}return e.prototype.clean=function(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new Td,this.pathCache={}},e.prototype.get=function(t){return this.elemCache.has(t)||this.elemCache.set(t,{}),this.elemCache.get(t)},e.prototype.getData=function(t){var e=this.get(t);return e.data||(e.data={}),e.data},e.prototype.getMatrix=function(t){var e=this.get(t);if(null==e.matrix){var n=this.view.container;e.matrix=ud(t,n)}return Jf(e.matrix)},e.prototype.getShape=function(e){var n=this.get(e);return null==n.shape&&(n.shape=t.Util.toGeometryShape(e)),n.shape.clone()},e.prototype.getBoundingRect=function(e){var n=this.get(e);return null==n.boundingRect&&(n.boundingRect=t.Util.getBBoxV2(e)),n.boundingRect.clone()},e}();t.Markup=void 0,function(t){function e(t){return null!=t&&"string"==typeof t}function n(t,e){void 0===e&&(e={ns:wp.svg});for(var n=document.createDocumentFragment(),r={},i={},o=[{markup:Array.isArray(t)?t:[t],parent:n,ns:e.ns}],s=function(){var t=o.pop(),e=t.ns||wp.svg,n=t.markup,s=t.parent;n.forEach((function(t){var n=t.tagName;if(!n)throw new TypeError("Invalid tagName");t.ns&&(e=t.ns);var a=e?Ap(n,e):Pp(n),l=t.attrs;l&&Hp(a,Jp(l));var u=t.style;u&&df(a,u);var c=t.className;null!=c&&a.setAttribute("class",Array.isArray(c)?c.join(" "):c),t.textContent&&(a.textContent=t.textContent);var h=t.selector;if(null!=h){if(i[h])throw new TypeError("Selector must be unique");i[h]=a}if(t.groupSelector){var p=t.groupSelector;Array.isArray(p)||(p=[p]),p.forEach((function(t){r[t]||(r[t]=[]),r[t].push(a)}))}s.appendChild(a);var f=t.children;Array.isArray(f)&&o.push({ns:e,markup:f,parent:a})}))};o.length>0;)s();return Object.keys(r).forEach((function(t){if(i[t])throw new Error("Ambiguous group selector");i[t]=r[t]})),{fragment:n,selectors:i,groups:r}}function r(t){return t instanceof SVGElement?Cp("g"):Pp("div")}t.isJSONMarkup=function(t){return null!=t&&!e(t)},t.isStringMarkup=e,t.clone=function(t){return null==t||e(t)?t:Yi(t)},t.sanitize=function(t){return"".concat(t).trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")},t.parseJSONMarkup=n,t.renderMarkup=function(t){if(e(t)){var i=wf.createVectors(t),o=i.length;if(1===o)return{elem:i[0].node};if(o>1){var s=r(i[0].node);return i.forEach((function(t){s.appendChild(t.node)})),{elem:s}}return{}}var a=n(t),l=a.fragment,u=null;return l.childNodes.length>1?(u=r(l.firstChild)).appendChild(l):u=l.firstChild,{elem:u,selectors:a.selectors}},t.parseLabelStringMarkup=function(t){for(var e=wf.createVectors(t),n=document.createDocumentFragment(),r=0,i=e.length;r<i;r+=1){var o=e[r].node;n.appendChild(o)}return{fragment:n,selectors:{}}}}(t.Markup||(t.Markup={})),(t.Markup||(t.Markup={})).getSelector=function t(e,n,r){if(null!=e){var i=void 0,o=e.tagName.toLowerCase();if(e===n)return i="string"==typeof r?"> ".concat(o," > ").concat(r):"> ".concat(o);var s=e.parentNode;if(s&&s.childNodes.length>1){var a=Tp(e)+1;i="".concat(o,":nth-child(").concat(a,")")}else i=o;return r&&(i+=" > ".concat(r)),t(e.parentNode,n,i)}return r},function(t){t.getPortContainerMarkup=function(){return"g"},t.getPortMarkup=function(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}},t.getPortLabelMarkup=function(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}}(t.Markup||(t.Markup={})),function(t){t.getEdgeMarkup=function(){return[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}]}}(t.Markup||(t.Markup={})),function(t){t.getForeignObjectMarkup=function(t){return void 0===t&&(t=!1),{tagName:"foreignObject",selector:"fo",children:[{ns:wp.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:wp.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:t?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}}(t.Markup||(t.Markup={}));var cv,hv,pv=function(){function e(t){this.view=t}return Object.defineProperty(e.prototype,"cell",{get:function(){return this.view.cell},enumerable:!1,configurable:!0}),e.prototype.getDefinition=function(t){return this.cell.getAttrDefinition(t)},e.prototype.processAttrs=function(t,e){var n,r,i,o,s=this,a=[];return Object.keys(e).forEach((function(r){var i=e[r],o=s.getDefinition(r),l=lh(Iy.isValidDefinition,s.view,o,i,{elem:t,attrs:e,cell:s.cell,view:s.view});if(o&&l)"string"==typeof o?(null==n&&(n={}),n[o]=i):null!==i&&a.push({name:r,definition:o});else{null==n&&(n={});var u=Fp.includes(r)?r:kh(r);n[u]=i}})),a.forEach((function(t){var n=t.name,s=t.definition,a=e[n];"function"==typeof s.set&&(null==r&&(r={}),r[n]=a),"function"==typeof s.offset&&(null==i&&(i={}),i[n]=a),"function"==typeof s.position&&(null==o&&(o={}),o[n]=a)})),{raw:e,normal:n,set:r,offset:i,position:o}},e.prototype.mergeProcessedAttrs=function(t,e){t.set=r(r({},t.set),e.set),t.position=r(r({},t.position),e.position),t.offset=r(r({},t.offset),e.offset);var n=t.normal&&t.normal.transform;null!=n&&e.normal&&(e.normal.transform=n),t.normal=e.normal},e.prototype.findAttrs=function(e,n,r,i){var o=[],s=new Td;return Object.keys(e).forEach((function(a){var l=e[a];if(Dn(l)){var u=t.View.find(a,n,i),c=u.isCSSSelector,h=u.elems;r[a]=h;for(var p=0,f=h.length;p<f;p+=1){var d=h[p],g=i&&i[a]===d,y=s.get(d);if(y){y.array||(o.push(d),y.array=!0,y.attrs=[y.attrs],y.priority=[y.priority]);var v=y.attrs,m=y.priority;if(g)v.unshift(l),m.unshift(-1);else{var b=Iu(m,c?-1:f);v.splice(b,0,l),m.splice(b,0,f)}}else s.set(d,{elem:d,attrs:l,priority:g?-1:f,array:!1})}}})),o.forEach((function(t){var e=s.get(t),n=e.attrs;e.attrs=n.reduceRight((function(t,e){return tl(t,e)}),{})})),s},e.prototype.updateRelativeAttrs=function(e,n,i){var o=this,s=n.raw||{},a=n.normal||{},l=n.set,u=n.position,c=n.offset,h=function(){return{elem:e,cell:o.cell,view:o.view,attrs:s,refBBox:i.clone()}};if(null!=l&&Object.keys(l).forEach((function(t){var e=l[t],n=o.getDefinition(t);if(null!=n){var i=lh(n.set,o.view,e,h());"object"==typeof i?a=r(r({},a),i):null!=i&&(a[t]=i)}})),e instanceof HTMLElement)this.view.setAttrs(a,e);else{var p=a.transform,f=Yf(p?"".concat(p):null),d=new jd(f.e,f.f);p&&(delete a.transform,f.e=0,f.f=0);var g=!1;null!=u&&Object.keys(u).forEach((function(t){var e=u[t],n=o.getDefinition(t);if(null!=n){var r=lh(n.position,o.view,e,h());null!=r&&(g=!0,d.translate(jd.create(r)))}})),this.view.setAttrs(a,e);var y=!1;if(null!=c){var v=this.view.getBoundingRectOfElement(e);if(v.width>0&&v.height>0){var m=t.Util.transformRectangle(v,f);Object.keys(c).forEach((function(t){var n=c[t],r=o.getDefinition(t);if(null!=r){var i=lh(r.offset,o.view,n,{elem:e,cell:o.cell,view:o.view,attrs:s,refBBox:m});null!=i&&(y=!0,d.translate(jd.create(i)))}}))}}(null!=p||g||y)&&(d.round(1),f.e=d.x,f.f=d.y,e.setAttribute("transform",Zf(f)))}},e.prototype.update=function(e,n,r){var i=this,o={},s=this.findAttrs(r.attrs||n,e,o,r.selectors),a=r.attrs?this.findAttrs(n,e,o,r.selectors):s,l=[];s.each((function(t){var n=t.elem,s=t.attrs,u=i.processAttrs(n,s);if(null==u.set&&null==u.position&&null==u.offset)i.view.setAttrs(u.normal,n);else{var c=a.get(n),h=c?c.attrs:null,p=h&&null==s.ref?h.ref:s.ref,f=void 0;if(p){if(!(f=(o[p]||i.view.find(p,e,r.selectors))[0]))throw new Error('"'.concat(p,'" reference does not exist.'))}else f=null;var d={node:n,refNode:f,attributes:h,processedAttributes:u},g=l.findIndex((function(t){return t.refNode===n}));g>-1?l.splice(g,0,d):l.push(d)}}));var u,c=new Td;l.forEach((function(n){var o,s,a=n.node,l=n.refNode,h=null!=l&&null!=r.rotatableNode&&_p(r.rotatableNode,l);if(l&&(o=c.get(l)),!o){var p=h?r.rotatableNode:e;o=l?t.Util.getBBox(l,{target:p}):r.rootBBox,l&&c.set(l,o)}r.attrs&&n.attributes?(s=i.processAttrs(a,n.attributes),i.mergeProcessedAttrs(s,n.processedAttributes)):s=n.processedAttributes;var f=o;h&&null!=r.rotatableNode&&!r.rotatableNode.contains(a)&&(u||(u=Yf(Hp(r.rotatableNode,"transform"))),f=t.Util.transformRectangle(o,u)),i.updateRelativeAttrs(a,s,f)}))},e}(),fv=function(){function t(t,e,n){void 0===n&&(n=[]),this.view=t;var r={},i={},o=0;Object.keys(e).forEach((function(t){var n=e[t];Array.isArray(n)||(n=[n]),n.forEach((function(e){var n=r[e];n||(o+=1,n=r[e]=1<<o),i[t]|=n}))}));var s=n;if(Array.isArray(s)||(s=[s]),s.forEach((function(t){r[t]||(o+=1,r[t]=1<<o)})),o>25)throw new Error("Maximum number of flags exceeded.");this.flags=r,this.attrs=i,this.bootstrap=n}return Object.defineProperty(t.prototype,"cell",{get:function(){return this.view.cell},enumerable:!1,configurable:!0}),t.prototype.getFlag=function(t){var e=this.flags;return null==e?0:Array.isArray(t)?t.reduce((function(t,n){return t|e[n]}),0):0|e[t]},t.prototype.hasAction=function(t,e){return t&this.getFlag(e)},t.prototype.removeAction=function(t,e){return t^t&this.getFlag(e)},t.prototype.getBootstrapFlag=function(){return this.getFlag(this.bootstrap)},t.prototype.getChangedFlag=function(){var t=this,e=0;return this.attrs?(Object.keys(this.attrs).forEach((function(n){t.cell.hasChanged(n)&&(e|=t.attrs[n])})),e):e},t}();t.CellView=function(e){function o(t,n){void 0===n&&(n={});var r=e.call(this)||this;return r.cell=t,r.options=r.ensureOptions(n),r.graph=r.options.graph,r.attr=new pv(r),r.flag=new fv(r,r.options.actions,r.options.bootstrap),r.cache=new uv(r),r.setContainer(r.ensureContainer()),r.setup(),r.init(),r}return n(o,e),o.getDefaults=function(){return this.defaults},o.config=function(t){this.defaults=this.getOptions(t)},o.getOptions=function(t){var e=function(t,e){return null!=e?wc(s(s([],Array.isArray(t)?t:[t],!0),Array.isArray(e)?e:[e],!0)):Array.isArray(t)?s([],t,!0):[t]},n=Yi(this.getDefaults()),o=t.bootstrap,a=t.actions,l=t.events,u=t.documentEvents,c=i(t,["bootstrap","actions","events","documentEvents"]);return o&&(n.bootstrap=e(n.bootstrap,o)),a&&Object.keys(a).forEach((function(t){var r=a[t],i=n.actions[t];r&&i?n.actions[t]=e(i,r):r&&(n.actions[t]=e(r))})),l&&(n.events=r(r({},n.events),l)),t.documentEvents&&(n.documentEvents=r(r({},n.documentEvents),u)),tl(n,c)},Object.defineProperty(o.prototype,Symbol.toStringTag,{get:function(){return o.toStringTag},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.onRemove=function(){this.removeTools()},Object.defineProperty(o.prototype,"priority",{get:function(){return this.options.priority},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"rootSelector",{get:function(){return this.options.rootSelector},enumerable:!1,configurable:!0}),o.prototype.getConstructor=function(){return this.constructor},o.prototype.ensureOptions=function(t){return this.getConstructor().getOptions(t)},o.prototype.getContainerTagName=function(){return this.options.isSvgElement?"g":"div"},o.prototype.getContainerStyle=function(){},o.prototype.getContainerAttrs=function(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}},o.prototype.getContainerClassName=function(){return this.prefixClassName("cell")},o.prototype.ensureContainer=function(){return t.View.createElement(this.getContainerTagName(),this.options.isSvgElement)},o.prototype.setContainer=function(t){if(this.container!==t){this.undelegateEvents(),this.container=t,null!=this.options.events&&this.delegateEvents(this.options.events);var e=this.getContainerAttrs();null!=e&&this.setAttrs(e,t);var n=this.getContainerStyle();null!=n&&this.setStyle(n,t);var r=this.getContainerClassName();null!=r&&this.addClass(r,t)}return this},o.prototype.isNodeView=function(){return!1},o.prototype.isEdgeView=function(){return!1},o.prototype.render=function(){return this},o.prototype.confirmUpdate=function(t,e){return 0},o.prototype.getBootstrapFlag=function(){return this.flag.getBootstrapFlag()},o.prototype.getFlag=function(t){return this.flag.getFlag(t)},o.prototype.hasAction=function(t,e){return this.flag.hasAction(t,e)},o.prototype.removeAction=function(t,e){return this.flag.removeAction(t,e)},o.prototype.handleAction=function(t,e,n,r){if(this.hasAction(t,e)){n();var i=[e];return r&&("string"==typeof r?i.push(r):i.push.apply(i,r)),this.removeAction(t,i)}return t},o.prototype.setup=function(){var t=this;this.cell.on("changed",(function(e){var n=e.options;return t.onAttrsChange(n)}))},o.prototype.onAttrsChange=function(t){var e=this.flag.getChangedFlag();!t.updated&&e&&(t.dirty&&this.hasAction(e,"update")&&(e|=this.getFlag("render")),t.toolId&&(t.async=!1),null!=this.graph&&this.graph.renderer.requestViewUpdate(this,e,t))},o.prototype.parseJSONMarkup=function(e,n){var r=t.Markup.parseJSONMarkup(e),i=r.selectors,o=this.rootSelector;if(n&&o){if(i[o])throw new Error("Invalid root selector");i[o]=n}return r},o.prototype.can=function(t){var e=this.graph.options.interacting;if("function"==typeof e&&(e=lh(e,this.graph,this)),"object"==typeof e){var n=e[t];return"function"==typeof n&&(n=lh(n,this.graph,this)),!1!==n}return"boolean"==typeof e&&e},o.prototype.cleanCache=function(){return this.cache.clean(),this},o.prototype.getCache=function(t){return this.cache.get(t)},o.prototype.getDataOfElement=function(t){return this.cache.getData(t)},o.prototype.getMatrixOfElement=function(t){return this.cache.getMatrix(t)},o.prototype.getShapeOfElement=function(t){return this.cache.getShape(t)},o.prototype.getBoundingRectOfElement=function(t){return this.cache.getBoundingRect(t)},o.prototype.getBBoxOfElement=function(e){var n=this.getBoundingRectOfElement(e),r=this.getMatrixOfElement(e),i=this.getRootRotatedMatrix(),o=this.getRootTranslatedMatrix();return t.Util.transformRectangle(n,o.multiply(i).multiply(r))},o.prototype.getUnrotatedBBoxOfElement=function(e){var n=this.getBoundingRectOfElement(e),r=this.getMatrixOfElement(e),i=this.getRootTranslatedMatrix();return t.Util.transformRectangle(n,i.multiply(r))},o.prototype.getBBox=function(t){var e;if(void 0===t&&(t={}),t.useCellGeometry){var n=this.cell,r=n.isNode()?n.getAngle():0;e=n.getBBox().bbox(r)}else e=this.getBBoxOfElement(this.container);return this.graph.coord.localToGraphRect(e)},o.prototype.getRootTranslatedMatrix=function(){var t=this.cell,e=t.isNode()?t.getPosition():{x:0,y:0};return Jf().translate(e.x,e.y)},o.prototype.getRootRotatedMatrix=function(){var t=Jf(),e=this.cell,n=e.isNode()?e.getAngle():0;if(n){var r=e.getBBox(),i=r.width/2,o=r.height/2;t=t.translate(i,o).rotate(n).translate(-i,-o)}return t},o.prototype.findMagnet=function(t){return void 0===t&&(t=this.container),this.findByAttr("magnet",t)},o.prototype.updateAttrs=function(t,e,n){void 0===n&&(n={}),null==n.rootBBox&&(n.rootBBox=new Vd),null==n.selectors&&(n.selectors=this.selectors),this.attr.update(t,e,n)},o.prototype.isEdgeElement=function(t){return this.cell.isEdge()&&(null==t||t===this.container)},o.prototype.prepareHighlight=function(t,e){void 0===e&&(e={});var n=t||this.container;return e.partial=n===this.container,n},o.prototype.highlight=function(t,e){void 0===e&&(e={});var n=this.prepareHighlight(t,e);return this.notify("cell:highlight",{magnet:n,options:e,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:n,options:e,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:n,options:e,view:this,node:this.cell,cell:this.cell}),this},o.prototype.unhighlight=function(t,e){void 0===e&&(e={});var n=this.prepareHighlight(t,e);return this.notify("cell:unhighlight",{magnet:n,options:e,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:n,options:e,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:n,options:e,view:this,edge:this.cell,cell:this.cell}),this},o.prototype.notifyUnhighlight=function(t,e){},o.prototype.getEdgeTerminal=function(t,e,n,r,i){var o=this.cell,s=this.findAttr("port",t),a=t.getAttribute("data-selector"),l={cell:o.id};return null!=a&&(l.magnet=a),null!=s?(l.port=s,o.isNode()&&(o.hasPort(s)||null!=a||(l.selector=this.getSelector(t)))):null==a&&this.container!==t&&(l.selector=this.getSelector(t)),l},o.prototype.getMagnetFromEdgeTerminal=function(t){var e,n=this.cell,r=this.container,i=t.port,o=t.magnet;return null!=i&&n.isNode()&&n.hasPort(i)?e=this.findPortElem(i,o)||r:(o||(o=t.selector),o||null==i||(o='[port="'.concat(i,'"]')),e=this.findOne(o,r,this.selectors)),e},o.prototype.hasTools=function(t){var e=this.tools;return null!=e&&(null==t||e.name===t)},o.prototype.addTools=function(e){if(!this.can("toolsAddable"))return this;if(this.removeTools(),e){var n=t.ToolsView.isToolsView(e)?e:new t.ToolsView(e);this.tools=n,n.config({view:this}),n.mount()}return this},o.prototype.updateTools=function(t){return void 0===t&&(t={}),this.tools&&this.tools.update(t),this},o.prototype.removeTools=function(){return this.tools&&(this.tools.remove(),this.tools=null),this},o.prototype.hideTools=function(){return this.tools&&this.tools.hide(),this},o.prototype.showTools=function(){return this.tools&&this.tools.show(),this},o.prototype.renderTools=function(){var t=this.cell.getTools();return this.addTools(t),this},o.prototype.notify=function(t,e){return this.trigger(t,e),this.graph.trigger(t,e),this},o.prototype.getEventArgs=function(t,e,n){var r=this,i=r.cell;return null==e||null==n?{e:t,view:r,cell:i}:{e:t,x:e,y:n,view:r,cell:i}},o.prototype.onClick=function(t,e,n){this.notify("cell:click",this.getEventArgs(t,e,n))},o.prototype.onDblClick=function(t,e,n){this.notify("cell:dblclick",this.getEventArgs(t,e,n))},o.prototype.onContextMenu=function(t,e,n){this.notify("cell:contextmenu",this.getEventArgs(t,e,n))},o.prototype.onMouseDown=function(t,e,n){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(t,e,n))},o.prototype.onMouseUp=function(t,e,n){this.notify("cell:mouseup",this.getEventArgs(t,e,n)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)},o.prototype.onMouseMove=function(t,e,n){this.notify("cell:mousemove",this.getEventArgs(t,e,n))},o.prototype.onMouseOver=function(t){this.notify("cell:mouseover",this.getEventArgs(t))},o.prototype.onMouseOut=function(t){this.notify("cell:mouseout",this.getEventArgs(t))},o.prototype.onMouseEnter=function(t){this.notify("cell:mouseenter",this.getEventArgs(t))},o.prototype.onMouseLeave=function(t){this.notify("cell:mouseleave",this.getEventArgs(t))},o.prototype.onMouseWheel=function(t,e,n,i){this.notify("cell:mousewheel",r({delta:i},this.getEventArgs(t,e,n)))},o.prototype.onCustomEvent=function(t,e,n,i){this.notify("cell:customevent",r({name:e},this.getEventArgs(t,n,i))),this.notify(e,r({},this.getEventArgs(t,n,i)))},o.prototype.onMagnetMouseDown=function(t,e,n,r){},o.prototype.onMagnetDblClick=function(t,e,n,r){},o.prototype.onMagnetContextMenu=function(t,e,n,r){},o.prototype.onLabelMouseDown=function(t,e,n){},o.prototype.checkMouseleave=function(t){var e=this.getEventTarget(t,{fromPoint:!0}),n=this.graph.findViewByElem(e);n!==this&&(this.onMouseLeave(t),n&&n.onMouseEnter(t))},o.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},o}(t.View),(cv=t.CellView||(t.CellView={})).Flag=fv,cv.Attr=pv,function(t){t.toStringTag="X6.".concat(t.name),t.isCellView=function(e){if(null==e)return!1;if(e instanceof t)return!0;var n=e[Symbol.toStringTag],r=e;return(null==n||n===t.toStringTag)&&"function"==typeof r.isNodeView&&"function"==typeof r.isEdgeView&&"function"==typeof r.confirmUpdate}}(t.CellView||(t.CellView={})),function(t){t.priority=function(t){return function(e){e.config({priority:t})}},t.bootstrap=function(t){return function(e){e.config({bootstrap:t})}}}(t.CellView||(t.CellView={})),function(t){t.registry=sg.create({type:"view"})}(t.CellView||(t.CellView={})),t.ToolsView=function(e){function i(t){void 0===t&&(t={});var n=e.call(this)||this;return n.svgContainer=n.createContainer(!0,t),n.htmlContainer=n.createContainer(!1,t),n.config(t),n}return n(i,e),Object.defineProperty(i.prototype,"name",{get:function(){return this.options.name},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"graph",{get:function(){return this.cellView.graph},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cell",{get:function(){return this.cellView.cell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,Symbol.toStringTag,{get:function(){return i.toStringTag},enumerable:!1,configurable:!0}),i.prototype.createContainer=function(e,n){var r=e?t.View.createElement("g",!0):t.View.createElement("div",!1);return fp(r,this.prefixClassName("cell-tools")),n.className&&fp(r,n.className),r},i.prototype.config=function(e){if(this.options=r(r({},this.options),e),!t.CellView.isCellView(e.view)||e.view===this.cellView)return this;this.cellView=e.view,this.cell.isEdge()?(fp(this.svgContainer,this.prefixClassName("edge-tools")),fp(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(fp(this.svgContainer,this.prefixClassName("node-tools")),fp(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));var n=this.options.items;if(!Array.isArray(n))return this;this.tools=[];var o=[];n.forEach((function(t){i.ToolItem.isToolItem(t)?"vertices"===t.name?o.unshift(t):o.push(t):"vertices"===("object"==typeof t?t.name:t)?o.unshift(t):o.push(t)}));for(var s=0;s<o.length;s+=1){var a=o[s],l=void 0;if(i.ToolItem.isToolItem(a))l=a;else{var u="object"==typeof a?a.name:a,c="object"==typeof a&&a.args||{};if(u)if(this.cell.isNode()){if(!(h=Ov.registry.get(u)))return Ov.registry.onNotFound(u);l=new h(c)}else if(this.cell.isEdge()){var h;if(!(h=Nv.registry.get(u)))return Nv.registry.onNotFound(u);l=new h(c)}}if(l)l.config(this.cellView,this),l.render(),(!1!==l.options.isSVGElement?this.svgContainer:this.htmlContainer).appendChild(l.container),this.tools.push(l)}return this},i.prototype.update=function(t){void 0===t&&(t={});var e=this.tools;return e&&e.forEach((function(e){t.toolId!==e.cid&&e.isVisible()&&e.update()})),this},i.prototype.focus=function(t){var e=this.tools;return e&&e.forEach((function(e){t===e?e.show():e.hide()})),this},i.prototype.blur=function(t){var e=this.tools;return e&&e.forEach((function(e){e===t||e.isVisible()||(e.show(),e.update())})),this},i.prototype.hide=function(){return this.focus(null)},i.prototype.show=function(){return this.blur(null)},i.prototype.remove=function(){var t=this.tools;return t&&(t.forEach((function(t){return t.remove()})),this.tools=null),Lp(this.svgContainer),Lp(this.htmlContainer),e.prototype.remove.call(this)},i.prototype.mount=function(){var t=this.tools,e=this.cellView;if(e&&t){var n=t.some((function(t){return!1!==t.options.isSVGElement})),r=t.some((function(t){return!1===t.options.isSVGElement}));if(n)(this.options.local?e.container:e.graph.view.decorator).appendChild(this.svgContainer);r&&this.graph.container.appendChild(this.htmlContainer)}return this},i}(t.View),(hv=t.ToolsView||(t.ToolsView={})).toStringTag="X6.".concat(hv.name),hv.isToolsView=function(t){if(null==t)return!1;if(t instanceof hv)return!0;var e=t[Symbol.toStringTag],n=t;return(null==e||e===hv.toStringTag)&&null!=n.graph&&null!=n.cell&&"function"==typeof n.config&&"function"==typeof n.update&&"function"==typeof n.focus&&"function"==typeof n.blur&&"function"==typeof n.show&&"function"==typeof n.hide},function(e){var r=function(e){function r(n){void 0===n&&(n={});var r=e.call(this)||this;return r.visible=!0,r.options=r.getOptions(n),r.container=t.View.createElement(r.options.tagName||"g",!1!==r.options.isSVGElement),fp(r.container,r.prefixClassName("cell-tool")),"string"==typeof r.options.className&&fp(r.container,r.options.className),r.init(),r}return n(r,e),r.getDefaults=function(){return this.defaults},r.config=function(t){this.defaults=this.getOptions(t)},r.getOptions=function(t){return tl(Yi(this.getDefaults()),t)},Object.defineProperty(r.prototype,"graph",{get:function(){return this.cellView.graph},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"cell",{get:function(){return this.cellView.cell},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this.options.name},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,Symbol.toStringTag,{get:function(){return r.toStringTag},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.getOptions=function(t){return this.constructor.getOptions(t)},r.prototype.delegateEvents=function(){return this.options.events&&e.prototype.delegateEvents.call(this,this.options.events),this},r.prototype.config=function(t,e){return this.cellView=t,this.parent=e,this.stamp(this.container),this.cell.isEdge()?fp(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&fp(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this},r.prototype.render=function(){this.empty();var e=this.options.markup;if(e){var n=t.Markup.parseJSONMarkup(e);this.container.appendChild(n.fragment),this.childNodes=n.selectors}return this.onRender(),this},r.prototype.onRender=function(){},r.prototype.update=function(){return this},r.prototype.stamp=function(t){t&&t.setAttribute("data-cell-id",this.cellView.cell.id)},r.prototype.show=function(){return this.container.style.display="",this.visible=!0,this},r.prototype.hide=function(){return this.container.style.display="none",this.visible=!1,this},r.prototype.isVisible=function(){return this.visible},r.prototype.focus=function(){var t=this.options.focusOpacity;return null!=t&&Number.isFinite(t)&&(this.container.style.opacity="".concat(t)),this.parent.focus(this),this},r.prototype.blur=function(){return this.container.style.opacity="",this.parent.blur(this),this},r.prototype.guard=function(t){return null==this.graph||null==this.cellView||this.graph.view.guard(t,this.cellView)},r.defaults={isSVGElement:!0,tagName:"g"},r}(t.View);e.ToolItem=r,function(t){var e=0;t.define=function(t){var n,r=bh((n=t.name)?Oh(n):"CustomTool".concat(e+=1),this);return r.config(t),r}}(r=e.ToolItem||(e.ToolItem={})),function(t){t.toStringTag="X6.".concat(t.name),t.isToolItem=function(e){if(null==e)return!1;if(e instanceof t)return!0;var n=e[Symbol.toStringTag],r=e;return(null==n||n===t.toStringTag)&&null!=r.graph&&null!=r.cell&&"function"==typeof r.config&&"function"==typeof r.update&&"function"==typeof r.focus&&"function"==typeof r.blur&&"function"==typeof r.show&&"function"==typeof r.hide&&"function"==typeof r.isVisible}}(r=e.ToolItem||(e.ToolItem={}))}(t.ToolsView||(t.ToolsView={}));function dv(t,e){return 0===e?"0%":"".concat(Math.round(t/e*100),"%")}function gv(t){return function(e,n,r,i){return n.isEdgeElement(r)?function(t,e,n,r,i){var o=n.getConnection();if(!o)return e;var s=o.closestPointLength(i);if(t){var a=o.length();e.anchor={name:"ratio",args:{ratio:s/a}}}else e.anchor={name:"length",args:{length:s}};return e}(t,e,n,0,i):function(t,e,n,r,i){var o=n.cell,s=o.getAngle(),a=n.getUnrotatedBBoxOfElement(r),l=o.getBBox().getCenter(),u=jd.create(i).rotate(s,l),c=u.x-a.x,h=u.y-a.y;t&&(c=dv(c,a.width),h=dv(h,a.height));return e.anchor={name:"topLeft",args:{dx:c,dy:h,rotate:!0}},e}(t,e,n,r,i)}}var yv,vv=gv(!0),mv=gv(!1),bv=Object.freeze({__proto__:null,noop:function(t){return t},pinRelative:vv,pinAbsolute:mv});function wv(t,e,n,r){return lh(yv.presets.pinRelative,this.graph,{},e,n,t,this.cell,r,{}).anchor}function xv(t,e){return e?t.cell.getBBox():t.cell.isEdge()?t.getConnection().bbox():t.getUnrotatedBBoxOfElement(t.container)}!function(t){t.presets=bv,t.registry=sg.create({type:"connection strategy"}),t.registry.register(t.presets,!0)}(yv||(yv={}));var Pv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onRender=function(){fp(this.container,this.prefixClassName("cell-tool-button")),this.update()},e.prototype.update=function(){return this.updatePosition(),this},e.prototype.updatePosition=function(){var t=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();id(this.container,t,{absolute:!0})},e.prototype.getNodeMatrix=function(){var t=this.cellView,e=this.options,n=e.x,r=void 0===n?0:n,i=e.y,o=void 0===i?0:i,s=e.offset,a=e.useCellGeometry,l=e.rotate,u=xv(t,a),c=t.cell.getAngle();l||(u=u.bbox(c));var h=0,p=0;"number"==typeof s?(h=s,p=s):"object"==typeof s&&(h=s.x,p=s.y),r=Gh(r,u.width),o=Gh(o,u.height);var f=Jf().translate(u.x+u.width/2,u.y+u.height/2);return l&&(f=f.rotate(c)),f=f.translate(r+h-u.width/2,o+p-u.height/2)},e.prototype.getEdgeMatrix=function(){var t,e,n,r=this.cellView,i=this.options,o=i.offset,s=void 0===o?0:o,a=i.distance,l=void 0===a?0:a,u=i.rotate,c=Gh(l,1);(t=c>=0&&c<=1?r.getTangentAtRatio(c):r.getTangentAtLength(c))?(e=t.start,n=t.vector().vectorAngle(new jd(1,0))||0):(e=r.getConnection().start,n=0);var h=Jf().translate(e.x,e.y).rotate(n);return h="object"==typeof s?h.translate(s.x||0,s.y||0):h.translate(0,s),u||(h=h.rotate(-n)),h},e.prototype.onMouseDown=function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.options.onClick;"function"==typeof e&&lh(e,this.cellView,{e:t,view:this.cellView,cell:this.cellView.cell,btn:this})}},e}(t.ToolsView.ToolItem);!function(t){t.config({name:"button",useCellGeometry:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})}(Pv||(Pv={})),function(t){t.Remove=t.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,useCellGeometry:!0,onClick:function(t){var e=t.view,n=t.btn;n.parent.remove(),e.cell.remove({ui:!0,toolId:n.cid})}})}(Pv||(Pv={}));var Av=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onRender=function(){if(fp(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){var t=this.options.attrs,e=t.class,n=i(t,["class"]);Hp(this.container,Jp(n)),e&&fp(this.container,e)}this.update()},e.prototype.update=function(){var t=this.cellView,e=this.options,n=e.useCellGeometry,r=e.rotate,i=Uh(e.padding),o=xv(t,n).moveAndExpand({x:-i.left,y:-i.top,width:i.left+i.right,height:i.top+i.bottom}),s=t.cell;if(s.isNode()){var a=s.getAngle();if(a)if(r){var l=s.getBBox().getCenter();sd(this.container,a,l.x,l.y,{absolute:!0})}else o=o.bbox(a)}return Hp(this.container,o.toJSON()),this},e}(t.ToolsView.ToolItem);!function(t){t.config({name:"boundary",tagName:"rect",padding:10,useCellGeometry:!0,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})}(Av||(Av={}));var Cv=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handles=[],e}return n(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.cellView.cell.getVertices()},enumerable:!1,configurable:!0}),e.prototype.onRender=function(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this},e.prototype.update=function(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this},e.prototype.resetHandles=function(){var t=this,e=this.handles;this.handles=[],e&&e.forEach((function(e){t.stopHandleListening(e),e.remove()}))},e.prototype.renderHandles=function(){for(var t=this,e=this.vertices,n=0,r=e.length;n<r;n+=1){var i=e[n],o=this.options.createHandle,s=this.options.processHandle,a=o({index:n,graph:this.graph,guard:function(e){return t.guard(e)},attrs:this.options.attrs||{}});s&&s(a),a.updatePosition(i.x,i.y),this.stamp(a.container),this.container.appendChild(a.container),this.handles.push(a),this.startHandleListening(a)}},e.prototype.updateHandles=function(){for(var t=this.vertices,e=0,n=t.length;e<n;e+=1){var r=t[e],i=this.handles[e];i&&i.updatePosition(r.x,r.y)}},e.prototype.updatePath=function(){var t=this.childNodes.connection;t&&t.setAttribute("d",this.cellView.getConnectionPathData())},e.prototype.startHandleListening=function(t){var e=this.cellView;e.can("vertexMovable")&&(t.on("change",this.onHandleChange,this),t.on("changing",this.onHandleChanging,this),t.on("changed",this.onHandleChanged,this)),e.can("vertexDeletable")&&t.on("remove",this.onHandleRemove,this)},e.prototype.stopHandleListening=function(t){var e=this.cellView;e.can("vertexMovable")&&(t.off("change",this.onHandleChange,this),t.off("changing",this.onHandleChanging,this),t.off("changed",this.onHandleChanged,this)),e.can("vertexDeletable")&&t.off("remove",this.onHandleRemove,this)},e.prototype.getNeighborPoints=function(t){var e=this.cellView,n=this.vertices,r=t>0?n[t-1]:e.sourceAnchor,i=t<n.length-1?n[t+1]:e.targetAnchor;return{prev:jd.create(r),next:jd.create(i)}},e.prototype.getMouseEventArgs=function(t){var e=this.normalizeEvent(t),n=this.graph.snapToGrid(e.clientX,e.clientY);return{e:e,x:n.x,y:n.y}},e.prototype.onHandleChange=function(t){var e=t.e;this.focus();var n=this.cellView;if(n.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){var r=this.getMouseEventArgs(e),i=r.e,o=r.x,s=r.y;n.notifyMouseDown(i,o,s)}},e.prototype.onHandleChanging=function(t){var e=t.handle,n=t.e,r=this.cellView,i=e.options.index,o=this.getMouseEventArgs(n),s=o.e,a=o.x,l=o.y,u={x:a,y:l};this.snapVertex(u,i),r.cell.setVertexAt(i,u,{ui:!0,toolId:this.cid}),e.updatePosition(u.x,u.y),this.options.stopPropagation||r.notifyMouseMove(s,a,l)},e.prototype.onHandleChanged=function(t){var e=t.e,n=this.options,r=this.cellView;if(n.addable&&this.updatePath(),n.removeRedundancies){r.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),r.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),this.eventData(e).vertexAdded&&r.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid});var i=this.getMouseEventArgs(e),o=i.e,s=i.x,a=i.y;this.options.stopPropagation||r.notifyMouseUp(o,s,a),r.checkMouseleave(o),n.onChanged&&n.onChanged({edge:r.cell,edgeView:r})}},e.prototype.snapVertex=function(t,e){var n=this.options.snapRadius||0;if(n>0){var r=this.getNeighborPoints(e),i=r.prev,o=r.next;Math.abs(t.x-i.x)<n?t.x=i.x:Math.abs(t.x-o.x)<n&&(t.x=o.x),Math.abs(t.y-i.y)<n?t.y=r.prev.y:Math.abs(t.y-o.y)<n&&(t.y=o.y)}},e.prototype.onHandleRemove=function(t){var e=t.handle,n=t.e;if(this.options.removable){var r=e.options.index,i=this.cellView;i.cell.removeVertexAt(r,{ui:!0}),this.options.addable&&this.updatePath(),i.checkMouseleave(this.normalizeEvent(n))}},e.prototype.onPathMouseDown=function(t){var e=this.cellView;if(!this.guard(t)&&this.options.addable&&e.can("vertexAddable")){t.stopPropagation(),t.preventDefault();var n=this.normalizeEvent(t),r=this.graph.snapToGrid(n.clientX,n.clientY).toJSON();e.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});var i=e.getVertexIndex(r.x,r.y);this.snapVertex(r,i),e.cell.insertVertex(r,i,{ui:!0,toolId:this.cid}),this.render();var o=this.handles[i];this.eventData(n,{vertexAdded:!0}),o.onMouseDown(n)}},e.prototype.onRemove=function(){this.resetHandles()},e}(t.ToolsView.ToolItem);!function(e){var i=function(i){function o(t){var e=i.call(this)||this;return e.options=t,e.render(),e.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"}),e}return n(o,i),Object.defineProperty(o.prototype,"graph",{get:function(){return this.options.graph},enumerable:!1,configurable:!0}),o.prototype.render=function(){this.container=t.View.createElement("circle",!0);var n=this.options.attrs;if("function"==typeof n){var i=e.getDefaults();this.setAttrs(r(r({},i.attrs),n(this)))}else this.setAttrs(n);this.addClass(this.prefixClassName("edge-tool-vertex"))},o.prototype.updatePosition=function(t,e){this.setAttrs({cx:t,cy:e})},o.prototype.onMouseDown=function(t){this.options.guard(t)||(t.stopPropagation(),t.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},t.data),this.emit("change",{e:t,handle:this}))},o.prototype.onMouseMove=function(t){this.emit("changing",{e:t,handle:this})},o.prototype.onMouseUp=function(t){this.emit("changed",{e:t,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()},o.prototype.onDoubleClick=function(t){this.emit("remove",{e:t,handle:this})},o}(t.View);e.Handle=i}(Cv||(Cv={})),function(t){var e,n=Vy.prefix("edge-tool-vertex-path");t.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:function(e){return new t.Handle(e)},markup:[{tagName:"path",selector:"connection",className:n,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:(e={},e["mousedown .".concat(n)]="onPathMouseDown",e["touchstart .".concat(n)]="onPathMouseDown",e)})}(Cv||(Cv={}));var Ev=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handles=[],e}return n(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.cellView.cell.getVertices()},enumerable:!1,configurable:!0}),e.prototype.update=function(){return this.render(),this},e.prototype.onRender=function(){fp(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();var t=this.cellView,e=s([],this.vertices,!0);e.unshift(t.sourcePoint),e.push(t.targetPoint);for(var n=0,r=e.length;n<r-1;n+=1){var i=e[n],o=e[n+1],a=this.renderHandle(i,o,n);this.stamp(a.container),this.handles.push(a)}return this},e.prototype.renderHandle=function(t,e,n){var r=this,i=this.options.createHandle({index:n,graph:this.graph,guard:function(t){return r.guard(t)},attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(i),this.updateHandle(i,t,e),this.container.appendChild(i.container),this.startHandleListening(i),i},e.prototype.startHandleListening=function(t){t.on("change",this.onHandleChange,this),t.on("changing",this.onHandleChanging,this),t.on("changed",this.onHandleChanged,this)},e.prototype.stopHandleListening=function(t){t.off("change",this.onHandleChange,this),t.off("changing",this.onHandleChanging,this),t.off("changed",this.onHandleChanged,this)},e.prototype.resetHandles=function(){var t=this,e=this.handles;this.handles=[],e&&e.forEach((function(e){t.stopHandleListening(e),e.remove()}))},e.prototype.shiftHandleIndexes=function(t){for(var e=this.handles,n=0,r=e.length;n<r;n+=1)e[n].options.index+=t},e.prototype.resetAnchor=function(t,e){var n=this.cellView.cell,r={ui:!0,toolId:this.cid};e?n.prop([t,"anchor"],e,r):n.removeProp([t,"anchor"],r)},e.prototype.snapHandle=function(t,e,n){var r=t.options.axis,i=t.options.index,o=this.cellView.cell.getVertices(),s=o[i-2]||n.sourceAnchor,a=o[i+1]||n.targetAnchor,l=this.options.snapRadius;return Math.abs(e[r]-s[r])<l?e[r]=s[r]:Math.abs(e[r]-a[r])<l&&(e[r]=a[r]),e},e.prototype.onHandleChanging=function(t){var e=t.handle,n=t.e,r=this.graph,i=this.options,o=this.cellView,s=i.anchor,a=e.options.axis,l=e.options.index-1,u=this.getEventData(n),c=this.normalizeEvent(n),h=r.snapToGrid(c.clientX,c.clientY),p=this.snapHandle(e,h.clone(),u),f=Yi(this.vertices),d=f[l],g=f[l+1],y=o.sourceView,v=o.sourceBBox,m=!1,b=!1;if(d?0===l?v.containsPoint(d)?(f.shift(),this.shiftHandleIndexes(-1),m=!0):(d[a]=p[a],b=!0):d[a]=p[a]:((d=o.sourceAnchor.toJSON())[a]=p[a],v.containsPoint(d)?m=!0:(f.unshift(d),this.shiftHandleIndexes(1),b=!0)),"function"==typeof s&&y){if(m){var w=u.sourceAnchor.clone();w[a]=p[a];var x=lh(s,o,w,y,o.sourceMagnet||y.container,"source",o,this);this.resetAnchor("source",x)}b&&this.resetAnchor("source",u.sourceAnchorDef)}var P=o.targetView,A=o.targetBBox,C=!1,E=!1;if(g?l===f.length-2?A.containsPoint(g)?(f.pop(),C=!0):(g[a]=p[a],E=!0):g[a]=p[a]:((g=o.targetAnchor.toJSON())[a]=p[a],A.containsPoint(g)?C=!0:(f.push(g),E=!0)),"function"==typeof s&&P){if(C){var M=u.targetAnchor.clone();M[a]=p[a];var S=lh(s,o,M,P,o.targetMagnet||P.container,"target",o,this);this.resetAnchor("target",S)}E&&this.resetAnchor("target",u.targetAnchorDef)}jd.equalPoints(f,this.vertices)||this.cellView.cell.setVertices(f,{ui:!0,toolId:this.cid}),this.updateHandle(e,d,g,0),i.stopPropagation||o.notifyMouseMove(c,h.x,h.y)},e.prototype.onHandleChange=function(t){var e=t.handle,n=t.e,r=this.options,i=this.handles,o=this.cellView,s=e.options.index;if(Array.isArray(i)){for(var a=0,l=i.length;a<l;a+=1)a!==s&&i[a].hide();if(this.focus(),this.setEventData(n,{sourceAnchor:o.sourceAnchor.clone(),targetAnchor:o.targetAnchor.clone(),sourceAnchorDef:Yi(this.cell.prop(["source","anchor"])),targetAnchorDef:Yi(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!r.stopPropagation){var u=this.normalizeEvent(n),c=this.graph.snapToGrid(u.clientX,u.clientY);o.notifyMouseDown(u,c.x,c.y)}}},e.prototype.onHandleChanged=function(t){var e=t.e,n=this.options,r=this.cellView;n.removeRedundancies&&r.removeRedundantLinearVertices({ui:!0,toolId:this.cid});var i=this.normalizeEvent(e),o=this.graph.snapToGrid(i.clientX,i.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),n.stopPropagation||r.notifyMouseUp(i,o.x,o.y),r.checkMouseleave(i),n.onChanged&&n.onChanged({edge:r.cell,edgeView:r})},e.prototype.updateHandle=function(t,e,n,r){void 0===r&&(r=0);var i=this.options.precision||0,o=Math.abs(e.x-n.x)<i,s=Math.abs(e.y-n.y)<i;if(o||s){var a=new Dd(e,n);if(a.length()<this.options.threshold)t.hide();else{var l=a.getCenter(),u=o?"x":"y";l[u]+=r||0;var c=a.vector().vectorAngle(new jd(1,0));t.updatePosition(l.x,l.y,c,this.cellView),t.show(),t.options.axis=u}}else t.hide()},e.prototype.onRemove=function(){this.resetHandles()},e}(t.ToolsView.ToolItem);!function(e){var i=function(i){function o(t){var e=i.call(this)||this;return e.options=t,e.render(),e.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),e}return n(o,i),o.prototype.render=function(){this.container=t.View.createElement("rect",!0);var n=this.options.attrs;if("function"==typeof n){var i=e.getDefaults();this.setAttrs(r(r({},i.attrs),n(this)))}else this.setAttrs(n);this.addClass(this.prefixClassName("edge-tool-segment"))},o.prototype.updatePosition=function(t,e,n,r){var i=r.getClosestPoint(new jd(t,e))||new jd(t,e),o=Jf().translate(i.x,i.y);if(i.equals({x:t,y:e}))o=o.rotate(n);else{var s=new Dd(t,e,i.x,i.y).vector().vectorAngle(new jd(1,0));0!==s&&(s+=90),o=o.rotate(s)}this.setAttrs({transform:Zf(o),cursor:n%180==0?"row-resize":"col-resize"})},o.prototype.onMouseDown=function(t){this.options.guard(t)||(this.trigger("change",{e:t,handle:this}),t.stopPropagation(),t.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},t.data))},o.prototype.onMouseMove=function(t){this.emit("changing",{e:t,handle:this})},o.prototype.onMouseUp=function(t){this.emit("changed",{e:t,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()},o.prototype.show=function(){this.container.style.display=""},o.prototype.hide=function(){this.container.style.display="none"},o}(t.View);e.Handle=i}(Ev||(Ev={})),function(t){t.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:function(e){return new t.Handle(e)},anchor:wv})}(Ev||(Ev={}));var Mv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.options.type},enumerable:!1,configurable:!0}),e.prototype.onRender=function(){fp(this.container,this.prefixClassName("edge-tool-".concat(this.type,"-anchor"))),this.toggleArea(!1),this.update()},e.prototype.update=function(){var t=this.type;return this.cellView.getTerminalView(t)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this},e.prototype.updateAnchor=function(){var t=this.childNodes;if(t){var e=t.anchor;if(e){var n=this.type,r=this.cellView,i=this.options,o=r.getTerminalAnchor(n),s=r.cell.prop([n,"anchor"]);e.setAttribute("transform","translate(".concat(o.x,", ").concat(o.y,")"));var a=s?i.customAnchorAttrs:i.defaultAnchorAttrs;a&&Object.keys(a).forEach((function(t){e.setAttribute(t,a[t])}))}}},e.prototype.updateArea=function(){var t=this.childNodes;if(t){var e=t.area;if(e){var n=this.type,r=this.cellView,i=r.getTerminalView(n);if(i){var o=i.cell,s=r.getTerminalMagnet(n),a=this.options.areaPadding||0;Number.isFinite(a)||(a=0);var l=void 0,u=void 0,c=void 0;i.isEdgeElement(s)?(u=0,c=(l=i.getBBox()).getCenter()):(l=i.getUnrotatedBBoxOfElement(s),u=o.getAngle(),c=l.getCenter(),u&&c.rotate(-u,o.getBBox().getCenter())),l.inflate(a),Hp(e,{x:-l.width/2,y:-l.height/2,width:l.width,height:l.height,transform:"translate(".concat(c.x,", ").concat(c.y,") rotate(").concat(u,")")})}}}},e.prototype.toggleArea=function(t){if(this.childNodes){var e=this.childNodes.area;e&&(e.style.display=t?"":"none")}},e.prototype.onMouseDown=function(t){this.guard(t)||(t.stopPropagation(),t.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))},e.prototype.resetAnchor=function(t){var e=this.type,n=this.cell;t?n.prop([e,"anchor"],t,{rewrite:!0,ui:!0,toolId:this.cid}):n.removeProp([e,"anchor"],{ui:!0,toolId:this.cid})},e.prototype.onMouseMove=function(t){var e=this.type,n=this.cellView,r=n.getTerminalView(e);if(null!=r){var i,o=this.normalizeEvent(t),s=r.cell,a=n.getTerminalMagnet(e),l=this.graph.coord.clientToLocalPoint(o.clientX,o.clientY),u=this.options.snap;if("function"==typeof u){var c=lh(u,n,l,r,a,e,n,this);l=jd.create(c)}if(this.options.restrictArea)if(r.isEdgeElement(a)){var h=r.getClosestPoint(l);h&&(l=h)}else{var p=r.getUnrotatedBBoxOfElement(a),f=s.getAngle(),d=s.getBBox().getCenter(),g=l.clone().rotate(f,d);p.containsPoint(g)||(l=p.getNearestPointToPoint(g).rotate(-f,d))}var y=this.options.anchor;"function"==typeof y&&(i=lh(y,n,l,r,a,e,n,this)),this.resetAnchor(i),this.update()}},e.prototype.onMouseUp=function(t){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);var e=this.cellView;this.options.removeRedundancies&&e.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})},e.prototype.onDblClick=function(){var t=this.options.resetAnchor;t&&this.resetAnchor(!0===t?void 0:t),this.update()},e}(t.ToolsView.ToolItem);!function(t){t.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:wv,snap:function(t,e,n,r,i,o){var s=o.options.snapRadius||0,a="source"===r,l=a?0:-1,u=this.cell.getVertexAt(l)||this.getTerminalAnchor(a?"target":"source");return u&&(Math.abs(u.x-t.x)<s&&(t.x=u.x),Math.abs(u.y-t.y)<s&&(t.y=u.y)),t}})}(Mv||(Mv={}));var Sv=Mv.define({name:"source-anchor",type:"source"}),Tv=Mv.define({name:"target-anchor",type:"target"}),kv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.options.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ratio",{get:function(){return this.options.ratio},enumerable:!1,configurable:!0}),e.prototype.init=function(){if(this.options.attrs){var t=this.options.attrs,e=t.class,n=i(t,["class"]);this.setAttrs(n,this.container),e&&fp(this.container,e)}},e.prototype.onRender=function(){fp(this.container,this.prefixClassName("edge-tool-".concat(this.type,"-arrowhead"))),this.update()},e.prototype.update=function(){var t=this.ratio,e=this.cellView,n=e.getTangentAtRatio(t),r=n?n.start:e.getPointAtRatio(t),i=n&&n.vector().vectorAngle(new jd(1,0))||0;if(!r)return this;var o=Jf().translate(r.x,r.y).rotate(i);return id(this.container,o,{absolute:!0}),this},e.prototype.onMouseDown=function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.cellView;if(e.can("arrowheadMovable")){e.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});var n=this.graph.snapToGrid(t.clientX,t.clientY),i=e.prepareArrowheadDragging(this.type,{x:n.x,y:n.y,options:r(r({},this.options),{toolId:this.cid})});this.cellView.setEventData(t,i),this.delegateDocumentEvents(this.options.documentEvents,t.data),e.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}},e.prototype.onMouseMove=function(t){var e=this.normalizeEvent(t),n=this.graph.snapToGrid(e.clientX,e.clientY);this.cellView.onMouseMove(e,n.x,n.y),this.update()},e.prototype.onMouseUp=function(t){this.undelegateDocumentEvents();var e=this.normalizeEvent(t),n=this.cellView,r=this.graph.snapToGrid(e.clientX,e.clientY);n.onMouseUp(e,r.x,r.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",n.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})},e}(t.ToolsView.ToolItem);!function(t){t.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})}(kv||(kv={}));var Ov,Nv,_v=kv.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),Lv=kv.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),Bv=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelIndex=-1,t.distance=.5,t}return n(r,e),r.prototype.render=function(){return this.createElement(),this.updateEditor(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents),this},r.prototype.createElement=function(){var e=this.cell,n=[this.prefixClassName("".concat(e.isEdge()?"edge":"node","-tool-editor")),this.prefixClassName("cell-tool-editor")];this.editor=t.ToolsView.createElement("div",!1),this.addClass(n,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)},r.prototype.updateEditor=function(){var e=this,n=e.graph,r=e.cell,i=e.editor,o=i.style,s=new jd,a=20;if(r.isNode())s=r.getBBox().center,a=r.size().width-4;else if(r.isEdge()){var l=this.options.event,u=l.target,c=u.parentElement;if(c&&pp(c,this.prefixClassName("edge-label"))){var h=c.getAttribute("data-index")||"0";this.labelIndex=parseInt(h,10);var p=Kf(c.getAttribute("transform")).translation;s=new jd(p.tx,p.ty),a=t.Util.getBBox(u).width}else{if(!this.options.labelAddable)return this;s=n.clientToLocal(jd.create(l.clientX,l.clientY));var f=this.cellView.path.closestPointLength(s);this.distance=f}}s=n.localToGraph(s),o.left="".concat(s.x,"px"),o.top="".concat(s.y,"px"),o.minWidth="".concat(a,"px");var d=n.scale();o.transform="scale(".concat(d.sx,", ").concat(d.sy,") translate(-50%, -50%)");var g=this.options.attrs;o.fontSize="".concat(g.fontSize,"px"),o.fontFamily=g.fontFamily,o.color=g.color,o.backgroundColor=g.backgroundColor;var y,v=this.options.getText;return"function"==typeof v&&(y=lh(v,this.cellView,{cell:this.cell,index:this.labelIndex})),i.innerText=y||"",this.setCellText(""),this},r.prototype.onDocumentMouseDown=function(t){if(t.target!==this.editor){var e=this.cell,n=this.editor.innerText.replace(/\n$/,"")||"";this.setCellText(n),e.removeTool(e.isEdge()?"edge-editor":"node-editor"),this.undelegateDocumentEvents()}},r.prototype.onDblClick=function(t){t.stopPropagation()},r.prototype.onMouseDown=function(t){t.stopPropagation()},r.prototype.autoFocus=function(){var t=this;setTimeout((function(){t.editor.focus(),t.selectText()}))},r.prototype.selectText=function(){if(window.getSelection){var t=document.createRange(),e=window.getSelection();t.selectNodeContents(this.editor),e.removeAllRanges(),e.addRange(t)}},r.prototype.setCellText=function(t){var e=this.options.setText;"function"==typeof e&&lh(e,this.cellView,{cell:this.cell,value:t,index:this.labelIndex,distance:this.distance})},r}(t.ToolsView.ToolItem);!function(t){t.config({tagName:"div",isSVGElement:!1,events:{dblclick:"onDblClick",mousedown:"onMouseDown"},documentEvents:{mousedown:"onDocumentMouseDown"}})}(Bv||(Bv={})),function(t){t.NodeEditor=t.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:function(t){return t.cell.attr("text/text")},setText:function(t){var e=t.cell,n=t.value;e.attr("text/text",n)}}),t.EdgeEditor=t.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText:function(t){var e=t.cell,n=t.index;return-1===n?"":e.prop("labels/".concat(n,"/attrs/label/text"))},setText:function(t){var e=t.cell,n=t.value,r=t.index,i=t.distance,o=e;-1===r?o.appendLabel({position:{distance:i},attrs:{label:{text:n}}}):n?o.prop("labels/".concat(r,"/attrs/label/text"),n):"number"==typeof r&&o.removeLabelAt(r)}})}(Bv||(Bv={})),function(e){e.presets={boundary:Av,button:Pv,"button-remove":Pv.Remove,"node-editor":Bv.NodeEditor},e.registry=sg.create({type:"node tool",process:function(e,n){if("function"==typeof n)return n;var r=t.ToolsView.ToolItem,o=n.inherit,s=i(n,["inherit"]);if(o){var a=this.get(o);null==a?this.onNotFound(o,"inherited"):r=a}return null==s.name&&(s.name=e),r.define.call(r,s)}}),e.registry.register(e.presets,!0)}(Ov||(Ov={})),function(e){e.presets={boundary:Av,vertices:Cv,segments:Ev,button:Pv,"button-remove":Pv.Remove,"source-anchor":Sv,"target-anchor":Tv,"source-arrowhead":_v,"target-arrowhead":Lv,"edge-editor":Bv.EdgeEditor},e.registry=sg.create({type:"edge tool",process:function(e,n){if("function"==typeof n)return n;var r=t.ToolsView.ToolItem,o=n.inherit,s=i(n,["inherit"]);if(o){var a=this.get(o);null==a?this.onNotFound(o,"inherited"):r=a}return null==s.name&&(s.name=e),r.define.call(r,s)}}),e.registry.register(e.presets,!0)}(Nv||(Nv={}));var Iv=qv("center"),jv=qv("topCenter"),Vv=qv("bottomCenter"),Dv=qv("leftMiddle"),Rv=qv("rightMiddle"),zv=qv("topLeft"),Fv=qv("topRight"),Gv=qv("bottomLeft"),Uv=qv("bottomRight");function qv(t){return function(e,n,r,i){void 0===i&&(i={});var o=i.rotate?e.getUnrotatedBBoxOfElement(n):e.getBBoxOfElement(n),s=o[t];s.x+=Gh(i.dx,o.width),s.y+=Gh(i.dy,o.height);var a=e.cell;return i.rotate?s.rotate(-a.getAngle(),a.getBBox().getCenter()):s}}function Wv(t){return function(e,n,r,i){if(r instanceof Element){var o=this.graph.findViewByElem(r),s=void 0;if(o)if(o.isEdgeElement(r)){var a=null!=i.fixedAt?i.fixedAt:"50%";s=Hv(o,a)}else s=o.getBBoxOfElement(r).getCenter();else s=new jd;return t.call(this,e,n,s,i)}return t.apply(this,arguments)}}function Hv(t,e){var n=Fh(e),r="string"==typeof e?parseFloat(e):e;return n?t.getPointAtRatio(r/100):t.getPointAtLength(r)}var $v,Jv=Wv((function(e,n,r,i){var o=e.cell.getAngle(),s=e.getBBoxOfElement(n),a=s.getCenter(),l=s.getTopLeft(),u=s.getBottomRight(),c=i.padding;if(Number.isFinite(c)||(c=0),l.y+c<=r.y&&r.y<=u.y-c){var h=r.y-a.y;a.x+=0===o||180===o?0:1*h/Math.tan(t.Angle.toRad(o)),a.y+=h}else if(l.x+c<=r.x&&r.x<=u.x-c){var p=r.x-a.x;a.y+=90===o||270===o?0:p*Math.tan(t.Angle.toRad(o)),a.x+=p}return a})),Xv=Wv((function(t,e,n,r){var i,o,s=0,a=t.cell;r.rotate?(i=t.getUnrotatedBBoxOfElement(e),o=a.getBBox().getCenter(),s=a.getAngle()):i=t.getBBoxOfElement(e);var l=r.padding;null!=l&&Number.isFinite(l)&&i.inflate(l),r.rotate&&n.rotate(s,o);var u,c=i.getNearestSideToPoint(n);switch(c){case"left":u=i.getLeftMiddle();break;case"right":u=i.getRightMiddle();break;case"top":u=i.getTopCenter();break;case"bottom":u=i.getBottomCenter()}var h=r.direction;return"H"===h?"top"!==c&&"bottom"!==c||(u=n.x<=i.x+i.width?i.getLeftMiddle():i.getRightMiddle()):"V"===h&&(u=n.y<=i.y+i.height?i.getTopCenter():i.getBottomCenter()),r.rotate?u.rotate(-s,o):u})),Yv=Object.freeze({__proto__:null,center:Iv,top:jv,bottom:Vv,left:Dv,right:Rv,topLeft:zv,topRight:Fv,bottomLeft:Gv,bottomRight:Uv,orth:Jv,nodeCenter:function(t,e,n,r,i){var o=t.cell.getConnectionPoint(this.cell,i);return(r.dx||r.dy)&&o.translate(r.dx||0,r.dy||0),o},midSide:Xv});!function(t){t.presets=Yv,t.registry=sg.create({type:"node endpoint"}),t.registry.register(t.presets,!0)}($v||($v={}));var Zv,Kv=function(t,e,n,r){var i=t.getClosestPoint(n);return null!=i?i:new jd},Qv=Wv(Kv),tm=Wv((function(t,e,n,r){var i=1e6,o=t.getConnection(),s=t.getConnectionSubdivisions(),a=new Dd(n.clone().translate(0,i),n.clone().translate(0,-i)),l=new Dd(n.clone().translate(i,0),n.clone().translate(-i,0)),u=a.intersect(o,{segmentSubdivisions:s}),c=l.intersect(o,{segmentSubdivisions:s}),h=[];return u&&h.push.apply(h,u),c&&h.push.apply(h,c),h.length>0?n.closest(h):null!=r.fallbackAt?Hv(t,r.fallbackAt):lh(Kv,this,t,e,n,r)})),em=Object.freeze({__proto__:null,closest:Qv,ratio:function(t,e,n,r){var i=null!=r.ratio?r.ratio:.5;return i>1&&(i/=100),t.getPointAtRatio(i)},length:function(t,e,n,r){var i=null!=r.length?r.length:20;return t.getPointAtLength(i)},orth:tm});function nm(t,e,n){var r;if("object"==typeof n){if(Number.isFinite(n.y)){var i=new Dd(e,t).parallel(n.y);e=i.start,t=i.end}r=n.x}else r=n;if(null==r||!Number.isFinite(r))return t;var o=t.distance(e);return 0===r&&o>0?t:t.move(e,-Math.min(r,o-1))}function rm(t){var e=t.getAttribute("stroke-width");return null===e?0:parseFloat(e)||0}!function(t){t.presets=em,t.registry=sg.create({type:"edge endpoint"}),t.registry.register(t.presets,!0)}(Zv||(Zv={}));var im=function(t,e,n,r){var i=e.getBBoxOfElement(n);r.stroked&&i.inflate(rm(n)/2);var o=t.intersect(i);return nm(o&&o.length?t.start.closest(o):t.end,t.start,r.offset)};var om,sm=Object.freeze({__proto__:null,bbox:im,rect:function(t,e,n,r,i){var o=e.cell,s=o.isNode()?o.getAngle():0;if(0===s)return lh(im,this,t,e,n,r,i);var a=e.getUnrotatedBBoxOfElement(n);r.stroked&&a.inflate(rm(n)/2);var l=a.getCenter(),u=t.clone().rotate(s,l),c=u.setLength(1e6).intersect(a);return nm(c&&c.length?u.start.closest(c).rotate(-s,l):t.end,t.start,r.offset)},boundary:function(e,n,i,o){var s,a,l=e.end,u=o.selector;if(s="string"==typeof u?n.findOne(u):Array.isArray(u)?Ph(i,u):function(t){if(null==t)return null;var e=t;do{var n=e.tagName;if("string"!=typeof n)return null;if("G"===(n=n.toUpperCase()))e=e.firstElementChild;else{if("TITLE"!==n)break;e=e.nextElementSibling}}while(e);return e}(i),!bp(s)){if(s===i||!bp(i))return l;s=i}var c,h=n.getShapeOfElement(s),p=n.getMatrixOfElement(s),f=n.getRootTranslatedMatrix(),d=n.getRootRotatedMatrix(),g=f.multiply(d).multiply(p),y=g.inverse(),v=t.Util.transformLine(e,y),m=v.start.clone(),b=n.getDataOfElement(s);if(!1===o.insideout){null==b.shapeBBox&&(b.shapeBBox=h.bbox());var w=b.shapeBBox;if(null!=w&&w.containsPoint(m))return l}if(!0===o.extrapolate&&v.setLength(1e6),og.isPath(h)){var x=o.precision||2;null==b.segmentSubdivisions&&(b.segmentSubdivisions=h.getSegmentSubdivisions({precision:x})),c={precision:x,segmentSubdivisions:b.segmentSubdivisions},a=v.intersect(h,c)}else a=v.intersect(h);a?Array.isArray(a)&&(a=m.closest(a)):!0===o.sticky&&(a=Vd.isRectangle(h)?h.getNearestPointToPoint(m):Rd.isEllipse(h)?h.intersectsWithLineFromCenterToPoint(m):h.closestPoint(m,c));var P=a?t.Util.transformPoint(a,g):l,A=o.offset||0;return!1!==o.stroked&&("object"==typeof A?(null==(A=r({},A)).x&&(A.x=0),A.x+=rm(s)/2):A+=rm(s)/2),nm(P,e.start,A)},anchor:function(t,e,n,r){var i=r.alignOffset,o=r.align;return o&&function(t,e,n){void 0===n&&(n=0);var r,i,o,s,a=t.start,l=t.end;switch(e){case"left":s="x",r=l,i=a,o=-1;break;case"right":s="x",r=a,i=l,o=1;break;case"top":s="y",r=l,i=a,o=-1;break;case"bottom":s="y",r=a,i=l,o=1;break;default:return}a[s]<l[s]?r[s]=i[s]:i[s]=r[s],Number.isFinite(n)&&(r[s]+=o*n,i[s]+=o*n)}(t,o,i),nm(t.end,t.start,r.offset)}});!function(t){t.presets=sm,t.registry=sg.create({type:"connection point"}),t.registry.register(t.presets,!0)}(om||(om={}));function am(t){return new Vd(t.x,t.y,0,0)}function lm(t){void 0===t&&(t={});var e=Uh(t.padding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function um(t,e){return void 0===e&&(e={}),t.sourceBBox.clone().moveAndExpand(lm(e))}function cm(t,e){return void 0===e&&(e={}),t.targetBBox.clone().moveAndExpand(lm(e))}var hm,pm=function(t,e,n){var r=um(n,e),i=cm(n,e),o=function(t,e){return void 0===e&&(e={}),t.sourceAnchor?t.sourceAnchor:um(t,e).getCenter()}(n,e),s=function(t,e){return void 0===e&&(e={}),t.targetAnchor?t.targetAnchor:cm(t,e).getCenter()}(n,e);r=r.union(am(o)),i=i.union(am(s));var a=t.map((function(t){return jd.create(t)}));a.unshift(o),a.push(s);for(var l=null,u=[],c=0,h=a.length-1;c<h;c+=1){var p=null,f=a[c],d=a[c+1],g=null!=hm.getBearing(f,d);if(0===c)c+1===h?r.intersectsWithRect(i.clone().inflate(1))?p=hm.insideNode(f,d,r,i):g||(p=hm.nodeToNode(f,d,r,i)):r.containsPoint(d)?p=hm.insideNode(f,d,r,am(d).moveAndExpand(lm(e))):g||(p=hm.nodeToVertex(f,d,r));else if(c+1===h){var y=g&&hm.getBearing(d,f)===l;i.containsPoint(f)||y?p=hm.insideNode(f,d,am(f).moveAndExpand(lm(e)),i,l):g||(p=hm.vertexToNode(f,d,i,l))}else g||(p=hm.vertexToVertex(f,d,l));p?(u.push.apply(u,p.points),l=p.direction):l=hm.getBearing(f,d),c+1<h&&u.push(d)}return u};!function(e){var n={N:"S",S:"N",E:"W",W:"E"},r={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function i(t,e,n){var r=new jd(t.x,e.y);return n.containsPoint(r)&&(r=new jd(e.x,t.y)),r}function o(t,e){return t["W"===e||"E"===e?"width":"height"]}function s(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function a(t,e,r){var i=new jd(t.x,e.y),o=new jd(e.x,t.y),a=s(t,i),l=s(t,o),u=r?n[r]:null,c=a===r||a!==u&&(l===u||l!==r)?i:o;return{points:[c],direction:s(c,e)}}function l(t,e,n){var r=i(t,e,n);return{points:[r],direction:s(r,e)}}e.getBBoxSize=o,e.getBearing=s,e.vertexToVertex=a,e.nodeToVertex=l,e.vertexToNode=function(t,e,n,r){var a,l=[new jd(t.x,e.y),new jd(e.x,t.y)],u=l.filter((function(t){return!n.containsPoint(t)})),c=u.filter((function(e){return s(e,t)!==r}));if(c.length>0)return{points:[a=(a=c.filter((function(e){return s(t,e)===r})).pop())||c[0]],direction:s(a,e)};a=is(l,u)[0];var h=jd.create(e).move(a,-o(n,r)/2);return{points:[i(h,t,n),h],direction:s(h,e)}},e.nodeToNode=function(t,e,n,r){var i=l(e,t,r),u=i.points[0];if(n.containsPoint(u)){var c=(i=l(t,e,n)).points[0];if(r.containsPoint(c)){var h=jd.create(t).move(c,-o(n,s(t,c))/2),p=jd.create(e).move(u,-o(r,s(e,u))/2),f=new Dd(h,p).getCenter(),d=l(t,f,n),g=a(f,e,d.direction);i.points=[d.points[0],g.points[0]],i.direction=g.direction}}return i},e.insideNode=function(e,n,o,a,l){var u,c,h,p,f=o.union(a).inflate(1),d=f.getCenter(),g=d.distance(n)>d.distance(e),y=g?n:e,v=g?e:n;return l?(u=jd.fromPolar(f.width+f.height,r[l],y),u=f.getNearestPointToPoint(u).move(u,-1)):u=f.getNearestPointToPoint(y).move(y,1),c=i(u,v,f),u.round().equals(c.round())?(c=jd.fromPolar(f.width+f.height,t.Angle.toRad(u.theta(y))+Math.PI/2,v),h=i(u,c=f.getNearestPointToPoint(c).move(v,1).round(),f),p=g?[c,h,u]:[u,h,c]):p=g?[c,u]:[u,c],{points:p,direction:s(g?u:c,n)}}}(hm||(hm={}));var fm={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeNodes:[],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return dm(this.step,this)},directions:function(){var t=dm(this.step,this),e=dm(this.cost,this);return[{cost:e,offsetX:t,offsetY:0},{cost:e,offsetX:-t,offsetY:0},{cost:e,offsetX:0,offsetY:t},{cost:e,offsetX:0,offsetY:-t}]},penalties:function(){var t=dm(this.step,this);return{0:0,45:t/2,90:t/2}},paddingBox:function(){var t=dm(this.step,this);return{x:-t,y:-t,width:2*t,height:2*t}},fallbackRouter:pm,draggingRouter:null,snapToGrid:!0};function dm(t,e){return"function"==typeof t?t.call(e):t}var gm=function(){function t(){this.items=[],this.hash={},this.values={}}return t.prototype.add=function(t,e){var n=this;this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=1,this.values[t]=e;var r=ju(this.items,t,(function(t){return n.values[t]}));this.items.splice(r,0,t)},t.prototype.pop=function(){var t=this.items.shift();return t&&(this.hash[t]=2),t},t.prototype.isOpen=function(t){return 1===this.hash[t]},t.prototype.isClose=function(t){return 2===this.hash[t]},t.prototype.isEmpty=function(){return 0===this.items.length},t}(),ym=function(){function t(t){this.options=t,this.mapGridSize=100,this.map={}}return t.prototype.build=function(t,e){var n=this.options,r=n.excludeTerminals.reduce((function(n,r){var i=e[r];if(i){var o=t.getCell(i.cell);o&&n.push(o)}return n}),[]),i=[],o=t.getCell(e.getSourceCellId());o&&(i=vc(i,o.getAncestors().map((function(t){return t.id}))));var s=t.getCell(e.getTargetCellId());s&&(i=vc(i,s.getAncestors().map((function(t){return t.id}))));var a=this.mapGridSize;return t.getNodes().reduce((function(t,e){var o=r.some((function(t){return t.id===e.id})),s=n.excludeNodes.some((function(t){return"string"==typeof t?e.id===t:t===e})),l=i.includes(e.id);if(!(o||s||l))for(var u=e.getBBox().moveAndExpand(n.paddingBox),c=u.getOrigin().snapToGrid(a),h=u.getCorner().snapToGrid(a),p=c.x;p<=h.x;p+=a)for(var f=c.y;f<=h.y;f+=a){var d=new jd(p,f).toString();null==t[d]&&(t[d]=[]),t[d].push(u)}return t}),this.map),this},t.prototype.isAccessible=function(t){var e=t.clone().snapToGrid(this.mapGridSize).toString(),n=this.map[e];return!n||n.every((function(e){return!e.containsPoint(t)}))},t}();function vm(t,e){var n=t.sourceBBox.clone();return e&&e.paddingBox?n.moveAndExpand(e.paddingBox):n}function mm(t,e){var n=t.targetBBox.clone();return e&&e.paddingBox?n.moveAndExpand(e.paddingBox):n}function bm(t,e){return t.sourceAnchor?t.sourceAnchor:vm(t,e).getCenter()}function wm(e,n,r,i,o){var s=360/r,a=e.theta(function(t,e,n,r){var i=r.step,o=e.x-t.x,s=e.y-t.y,a=o/n.x,l=s/n.y,u=a*i,c=l*i;return new jd(t.x+u,t.y+c)}(e,n,i,o)),l=t.Angle.normalize(a+s/2);return s*Math.floor(l/s)}function xm(t,e){var n=Math.abs(t-e);return n>180?360-n:n}function Pm(t,e){if(!t)return e;var n=Math.abs(t),r=Math.round(n/e);return r?e+(n-r*e)/r:n}function Am(t,e){return t.round(e)}function Cm(e,n,r){return Am(function(e,n){var r=n.source,i=t.GeometryUtil.snapToGrid(e.x-r.x,n.x)+r.x,o=t.GeometryUtil.snapToGrid(e.y-r.y,n.y)+r.y;return new jd(i,o)}(e.clone(),n),r)}function Em(t){return t.toString()}function Mm(t){return new jd(0===t.x?0:Math.abs(t.x)/t.x,0===t.y?0:Math.abs(t.y)/t.y)}function Sm(t,e){for(var n=1/0,r=0,i=e.length;r<i;r+=1){var o=t.manhattanDistance(e[r]);o<n&&(n=o)}return n}function Tm(t,e,n,r,i){var o=i.precision,s=i.directionMap,a=t.diff(e.getCenter()),l=Object.keys(s).reduce((function(i,l){if(n.includes(l)){for(var u=s[l],c=new jd(t.x+u.x*(Math.abs(a.x)+e.width),t.y+u.y*(Math.abs(a.y)+e.height)),h=new Dd(t,c).intersect(e)||[],p=void 0,f=null,d=0;d<h.length;d+=1){var g=h[d],y=t.squaredDistance(g);(null==p||y>p)&&(p=y,f=g)}if(f){var v=Cm(f,r,o);e.containsPoint(v)&&(v=Cm(v.translate(u.x*r.x,u.y*r.y),r,o)),i.push(v)}}return i}),[]);return e.containsPoint(t)||l.push(Cm(t,r,o)),l}function km(t,e,n,r,i){for(var o,s=[],a=Mm(i.diff(n)),l=Em(n),u=t[l];u;){var c=Mm((o=e[l]).diff(u));c.equals(a)||(s.unshift(o),a=c),u=t[l=Em(u)]}var h=e[l];return Mm(h.diff(r)).equals(a)||s.unshift(h),s}function Om(t,e,n,r,i){var o,s,a=i.precision;o=Vd.isRectangle(e)?Am(bm(t,i).clone(),a):Am(e.clone(),a),s=Vd.isRectangle(n)?Am(function(t,e){return t.targetAnchor?t.targetAnchor:mm(t,e).getCenter()}(t,i).clone(),a):Am(n.clone(),a);var l,u,c=function(t,e,n){return{source:e.clone(),x:Pm(n.x-e.x,t),y:Pm(n.y-e.y,t)}}(i.step,o,s),h=o,p=s;if(l=Vd.isRectangle(e)?Tm(h,e,i.startDirections,c,i):[h],u=Vd.isRectangle(n)?Tm(s,n,i.endDirections,c,i):[p],l=l.filter((function(t){return r.isAccessible(t)})),u=u.filter((function(t){return r.isAccessible(t)})),l.length>0&&u.length>0){for(var f=new gm,d={},g={},y={},v=0,m=l.length;v<m;v+=1){var b=l[v],w=Em(b);f.add(w,Sm(b,u)),d[w]=b,y[w]=0}for(var x=i.previousDirectionAngle,P=void 0===x,A=void 0,C=void 0,E=function(t,e){var n=e.step;return e.directions.forEach((function(e){e.gridOffsetX=e.offsetX/n*t.x,e.gridOffsetY=e.offsetY/n*t.y})),e.directions}(c,i),M=E.length,S=u.reduce((function(t,e){var n=Em(e);return t.push(n),t}),[]),T=jd.equalPoints(l,u),k=i.maxLoopCount;!f.isEmpty()&&k>0;){var O=f.pop(),N=d[O],_=g[O],L=y[O],B=N.equals(h),I=null==_,j=void 0;if(j=I?P?B?null:wm(h,N,M,c,i):x:wm(_,N,M,c,i),!(I&&T)&&S.indexOf(O)>=0)return i.previousDirectionAngle=j,km(g,d,N,h,p);for(v=0;v<M;v+=1){var V=(A=E[v]).angle;if(C=xm(j,V),P&&B||!(C>i.maxDirectionChange)){var D=Cm(N.clone().translate(A.gridOffsetX||0,A.gridOffsetY||0),c,a),R=Em(D);if(!f.isClose(R)&&r.isAccessible(D)){if(S.indexOf(R)>=0)if(!D.equals(p))if(xm(V,wm(D,p,M,c,i))>i.maxDirectionChange)continue;var z=L+A.cost+(B?0:i.penalties[C]);(!f.isOpen(R)||z<y[R])&&(d[R]=D,g[R]=N,y[R]=z,f.add(R,z+Sm(D,u)))}}}k-=1}}return i.fallbackRoute?lh(i.fallbackRoute,this,h,p,i):null}var Nm=function(e,n,r){for(var i,o,s=function(e){var n=Object.keys(e).reduce((function(t,n){return t[n]="fallbackRouter"===n||"draggingRouter"===n||"fallbackRoute"===n?e[n]:dm(e[n],e),t}),{});if(n.padding){var r=Uh(n.padding);n.paddingBox={x:-r.left,y:-r.top,width:r.left+r.right,height:r.top+r.bottom}}return n.directions.forEach((function(e){var n=new jd(0,0),r=new jd(e.offsetX,e.offsetY);e.angle=t.Angle.normalize(n.theta(r))})),n}(n),a=vm(r,s),l=mm(r,s),u=bm(r,s),c=new ym(s).build(r.graph.model,r.cell),h=e.map((function(t){return jd.create(t)})),p=[],f=u,d=0,g=h.length;d<=g;d+=1){var y=null;if(i=o||a,null==(o=h[d])){o=l;var v=r.cell;if((null==v.getSourceCellId()||null==v.getTargetCellId())&&"function"==typeof s.draggingRouter){var m=i===a?u:i,b=o.getOrigin();y=lh(s.draggingRouter,r,m,b,s)}}if(null==y&&(y=Om(r,i,o,c,s)),null===y)return console.warn("Unable to execute manhattan algorithm, use orth instead"),lh(s.fallbackRouter,this,e,s,r);var w=y[0];w&&w.equals(f)&&y.shift(),f=y[y.length-1]||f,p.push.apply(p,y)}return s.snapToGrid?function(t,e){if(void 0===e&&(e=10),t.length<=1)return t;for(var n=0,r=t.length;n<r-1;n+=1){var i=t[n],o=t[n+1];if(i.x===o.x){var s=e*Math.round(i.x/e);i.x!==s&&(i.x=s,o.x=s)}else if(i.y===o.y){var a=e*Math.round(i.y/e);i.y!==a&&(i.y=a,o.y=a)}}return t}(p,r.graph.grid.getGridSize()):p},_m=function(t,e,n){return lh(Nm,this,t,r(r({},fm),e),n)},Lm={maxDirectionChange:45,directions:function(){var t=dm(this.step,this),e=dm(this.cost,this),n=Math.ceil(Math.sqrt(t*t<<1));return[{cost:e,offsetX:t,offsetY:0},{cost:n,offsetX:t,offsetY:t},{cost:e,offsetX:0,offsetY:t},{cost:n,offsetX:-t,offsetY:t},{cost:e,offsetX:-t,offsetY:0},{cost:n,offsetX:-t,offsetY:-t},{cost:e,offsetX:0,offsetY:-t},{cost:n,offsetX:t,offsetY:-t}]},fallbackRoute:function(e,n,r){var i=e.theta(n),o=[],s={x:n.x,y:e.y},a={x:e.x,y:n.y};if(i%180>90){var l=s;s=a,a=l}var u=i%90<45?s:a,c=new Dd(e,u),h=90*Math.ceil(i/90),p=jd.fromPolar(c.squaredLength(),t.Angle.toRad(h+135),u),f=new Dd(n,p),d=c.intersectsWithLine(f),g=d||n,y=d?g:e,v=360/r.directions.length,m=y.theta(n),b=t.Angle.normalize(m+v/2),w=v*Math.floor(b/v);return r.previousDirectionAngle=w,g&&o.push(g.round()),o.push(n),o}};function Bm(t,e){if(null!=e&&!1!==e){var n="boolean"==typeof e?0:e;if(n>0){var i=jd.create(t[1]).move(t[2],n),o=jd.create(t[1]).move(t[0],n);return s(s([i.toJSON()],t,!0),[o.toJSON()],!1)}var a=t[1];return s(s([r({},a)],t,!0),[r({},a)],!1)}return t}var Im,jm=Object.freeze({__proto__:null,normal:function(t){return s([],t,!0)},oneSide:function(t,e,n){var r,i,o,a=e.side||"bottom",l=Uh(e.padding||40),u=n.sourceBBox,c=n.targetBBox,h=u.getCenter(),p=c.getCenter();switch(a){case"top":o=-1,r="y",i="height";break;case"left":o=-1,r="x",i="width";break;case"right":o=1,r="x",i="width";break;default:o=1,r="y",i="height"}return h[r]+=o*(u[i]/2+l[a]),p[r]+=o*(c[i]/2+l[a]),o*(h[r]-p[r])>0?p[r]=h[r]:h[r]=p[r],s(s([h.toJSON()],t,!0),[p.toJSON()],!1)},orth:pm,metro:function(t,e,n){return lh(_m,this,t,r(r({},Lm),e),n)},manhattan:_m,er:function(t,e,n){var r,i,o,a=e.offset||32,l=null==e.min?16:e.min,u=0,c=e.direction,h=n.sourceBBox,p=n.targetBBox,f=h.getCenter(),d=p.getCenter();if("number"==typeof a&&(u=a),null==c){var g=p.left-h.right,y=p.top-h.bottom;g>=0&&y>=0?c=g>=y?"L":"T":g<=0&&y>=0?c=(g=h.left-p.right)>=0&&g>=y?"R":"T":g>=0&&y<=0?c=(y=h.top-p.bottom)>=0?g>=y?"L":"B":"L":(g=h.left-p.right,y=h.top-p.bottom,c=g>=0&&y>=0?g>=y?"R":"B":g<=0&&y>=0?"B":g>=0&&y<=0||Math.abs(g)>Math.abs(y)?"R":"B")}"H"===c?c=d.x-f.x>=0?"L":"R":"V"===c&&(c=d.y-f.y>=0?"T":"B"),"center"===a&&("L"===c?u=(p.left-h.right)/2:"R"===c?u=(h.left-p.right)/2:"T"===c?u=(p.top-h.bottom)/2:"B"===c&&(u=(h.top-p.bottom)/2));var v="L"===c||"R"===c;if(v){if(d.y===f.y)return s([],t,!0);o="L"===c?1:-1,r="x",i="width"}else{if(d.x===f.x)return s([],t,!0);o="T"===c?1:-1,r="y",i="height"}var m=f.clone(),b=d.clone();if(m[r]+=o*(h[i]/2+u),b[r]-=o*(p[i]/2+u),v){var w=m.x,x=b.x,P=h.width/2+l,A=p.width/2+l;d.x>f.x?x<=w&&(m.x=Math.max(x,f.x+P),b.x=Math.min(w,d.x-A)):x>=w&&(m.x=Math.min(x,f.x-P),b.x=Math.max(w,d.x+A))}else{var C=m.y,E=b.y;P=h.height/2+l,A=p.height/2+l;d.y>f.y?E<=C&&(m.y=Math.max(E,f.y+P),b.y=Math.min(C,d.y-A)):E>=C&&(m.y=Math.min(E,f.y-P),b.y=Math.max(C,d.y+A))}return s(s([m.toJSON()],t,!0),[b.toJSON()],!1)},loop:function(e,n,r){var i=n.width||50,o=(n.height||80)/2,s=n.angle||"auto",a=r.sourceAnchor,l=r.targetAnchor,u=r.sourceBBox,c=r.targetBBox;if(a.equals(l)){var h=function(e){var n=t.Angle.toRad(e),r=Math.sin(n),s=Math.cos(n),l=new jd(a.x+s*i,a.y+r*i),u=new jd(l.x-s*o,l.y-r*o),c=u.clone().rotate(-90,l),h=u.clone().rotate(90,l);return[c.toJSON(),l.toJSON(),h.toJSON()]},p=function(t){var e=a.clone().move(t,-1),n=new Dd(e,t);return!u.containsPoint(t)&&!u.intersectsWithLine(n)},f=[0,90,180,270,45,135,225,315];if("number"==typeof s)return Bm(h(s),n.merge);if((w=u.getCenter()).equals(a))return Bm(h(0),n.merge);var d=w.angleBetween(a,w.clone().translate(1,0)),g=h(d);if(p(g[1]))return Bm(g,n.merge);for(var y=1,v=f.length;y<v;y+=1)if(p((g=h(d+f[y]))[1]))return Bm(g,n.merge);return Bm(g,n.merge)}var m=new Dd(a,l),b=m.parallel(-i),w=b.getCenter(),x=b.start.clone().move(b.end,o),P=b.end.clone().move(b.start,o),A=m.parallel(-1),C=new Dd(A.start,w),E=new Dd(A.end,w);if((u.containsPoint(w)||c.containsPoint(w)||u.intersectsWithLine(C)||u.intersectsWithLine(E)||c.intersectsWithLine(C)||c.intersectsWithLine(E))&&(w=(b=m.parallel(i)).getCenter(),x=b.start.clone().move(b.end,o),P=b.end.clone().move(b.start,o)),n.merge){var M=new Dd(a,l),S=new Dd(w,M.center).setLength(Number.MAX_SAFE_INTEGER),T=u.intersectsWithLine(S),k=c.intersectsWithLine(S),O=T?Array.isArray(T)?T:[T]:[];k&&(Array.isArray(k)?O.push.apply(O,k):O.push(k));var N=M.center.closest(O);N?(r.sourceAnchor=N.clone(),r.targetAnchor=N.clone()):(r.sourceAnchor=M.center.clone(),r.targetAnchor=M.center.clone())}return Bm([x.toJSON(),w.toJSON(),P.toJSON()],n.merge)}});!function(t){t.presets=jm,t.registry=sg.create({type:"router"}),t.registry.register(t.presets,!0)}(Im||(Im={}));var Vm,Dm,Rm=1/3,zm=2/3;function Fm(t,e,n){void 0===n&&(n=[]);var r=s(s([t],n,!0),[e],!1),i=[];return r.forEach((function(t,e){var n=r[e+1];null!=n&&i.push(new Dd(t,n))})),i}function Gm(t,e){return new Dd(t,e).squaredLength()}function Um(t,e,n,r){var i,o=new og;return i=og.createSegment("M",t[0].start),o.appendSegment(i),t.forEach((function(s,a){if(Vm.includes(s)){var l=void 0,u=void 0,c=void 0,h=void 0;if("arc"===n){l=-90,((u=s.start.diff(s.end)).x<0||0===u.x&&u.y<0)&&(l+=180);var p=s.getCenter(),f=new Dd(p,s.end).rotate(l,p),d=void 0;c=(d=new Dd(s.start,p)).pointAt(2/3).rotate(l,s.start),h=f.pointAt(1/3).rotate(-l,f.end),i=og.createSegment("C",c,h,f.end),o.appendSegment(i),d=new Dd(p,s.end),c=f.pointAt(1/3).rotate(l,f.end),h=d.pointAt(1/3).rotate(-l,s.end),i=og.createSegment("C",c,h,s.end),o.appendSegment(i)}else if("gap"===n)i=og.createSegment("M",s.end),o.appendSegment(i);else if("cubic"===n){l=s.start.theta(s.end);var g=.6*e,y=1.35*e;((u=s.start.diff(s.end)).x<0||0===u.x&&u.y<0)&&(y*=-1),c=new jd(s.start.x+g,s.start.y+y).rotate(l,s.start),h=new jd(s.end.x-g,s.end.y+y).rotate(l,s.end),i=og.createSegment("C",c,h,s.end),o.appendSegment(i)}}else{var v=t[a+1];0===r||!v||Vm.includes(v)?(i=og.createSegment("L",s.end),o.appendSegment(i)):function(t,e,n,r,i){var o,s=n.distance(r)/2,a=n.distance(i)/2,l=-Math.min(t,s),u=-Math.min(t,a),c=n.clone().move(r,l).round(),h=n.clone().move(i,u).round(),p=new jd(Rm*c.x+zm*n.x,zm*n.y+Rm*c.y),f=new jd(Rm*h.x+zm*n.x,zm*n.y+Rm*h.y);o=og.createSegment("L",c),e.appendSegment(o),o=og.createSegment("C",p,f,h),e.appendSegment(o)}(r,o,s.end,s.start,v.end)}})),o}var qm,Wm=Object.freeze({__proto__:null,normal:function(t,e,n,r){void 0===r&&(r={});var i=s(s([t],n,!0),[e],!1),o=new Hd(i),a=new og(o);return r.raw?a:a.serialize()},loop:function(t,e,n,r){void 0===r&&(r={});var i=3===n.length?0:1,o=jd.create(n[0+i]),s=jd.create(n[2+i]),a=jd.create(n[1+i]);if(!jd.equals(t,e)){var l=new jd((t.x+e.x)/2,(t.y+e.y)/2),u=l.angleBetween(jd.create(t).rotate(90,l),a);u>1&&(o.rotate(180-u,l),s.rotate(180-u,l),a.rotate(180-u,l))}var c="\n     M ".concat(t.x," ").concat(t.y,"\n     Q ").concat(o.x," ").concat(o.y," ").concat(a.x," ").concat(a.y,"\n     Q ").concat(s.x," ").concat(s.y," ").concat(e.x," ").concat(e.y,"\n  ");return r.raw?og.parse(c):c},rounded:function(t,e,n,r){void 0===r&&(r={});var i=new og;i.appendSegment(og.createSegment("M",t));for(var o,s,a=1/3,l=2/3,u=r.radius||10,c=0,h=n.length;c<h;c+=1){var p=jd.create(n[c]),f=n[c-1]||t,d=n[c+1]||e;o=s||p.distance(f)/2,s=p.distance(d)/2;var g=-Math.min(u,o),y=-Math.min(u,s),v=p.clone().move(f,g).round(),m=p.clone().move(d,y).round(),b=new jd(a*v.x+l*p.x,l*p.y+a*v.y),w=new jd(a*m.x+l*p.x,l*p.y+a*m.y);i.appendSegment(og.createSegment("L",v)),i.appendSegment(og.createSegment("C",b,w,m))}return i.appendSegment(og.createSegment("L",e)),r.raw?i:i.serialize()},smooth:function(t,e,n,r){var i;void 0===r&&(r={});var o=r.direction;if(n&&0!==n.length){var a=s(s([t],n,!0),[e],!1),l=$d.throughPoints(a);i=new og(l)}else if((i=new og).appendSegment(og.createSegment("M",t)),o||(o=Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)?"H":"V"),"H"===o){var u=(t.x+e.x)/2;i.appendSegment(og.createSegment("C",u,t.y,u,e.y,e.x,e.y))}else{var c=(t.y+e.y)/2;i.appendSegment(og.createSegment("C",t.x,c,e.x,c,e.x,e.y))}return r.raw?i:i.serialize()},jumpover:function(t,e,n,r){var i=this;void 0===r&&(r={}),Vm=[],Dm=[],function(t){var e=t.graph._jumpOverUpdateList;if(null==e&&(e=t.graph._jumpOverUpdateList=[],t.graph.on("cell:mouseup",(function(){for(var e=t.graph._jumpOverUpdateList,n=0;n<e.length;n+=1)e[n].update()})),t.graph.on("model:reseted",(function(){e=t.graph._jumpOverUpdateList=[]}))),e.indexOf(t)<0){e.push(t);var n=function(){return e.splice(e.indexOf(t),1)};t.cell.once("change:connector",n),t.cell.once("removed",n)}}(this);var o=r.size||5,s=r.type||"arc",a=r.radius||0,l=r.ignoreConnectors||["smooth"],u=this.graph,c=u.model.getEdges();if(1===c.length)return Um(Fm(t,e,n),o,s,a);var h=this.cell,p=c.indexOf(h),f=u.options.connecting.connector||{},d=c.filter((function(t,e){var n=t.getConnector()||f;return!l.includes(n.name)&&(!(e>p)||"jumpover"!==n.name)})),g=d.map((function(t){return u.findViewByCell(t)})),y=Fm(t,e,n),v=g.map((function(t){return null==t?[]:t===i?y:Fm(t.sourcePoint,t.targetPoint,t.routePoints)})),m=[];y.forEach((function(t){var e=d.reduce((function(e,n,r){if(n!==h){var i=function(t,e){var n=[];return e.forEach((function(e){var r=t.intersectsWithLine(e);r&&n.push(r)})),n}(t,v[r]);e.push.apply(e,i)}return e}),[]).sort((function(e,n){return Gm(t.start,e)-Gm(t.start,n)}));e.length>0?m.push.apply(m,function(t,e,n){return e.reduce((function(r,i,o){if(Dm.includes(i))return r;var s=r.pop()||t,a=jd.create(i).move(s.start,-n),l=jd.create(i).move(s.start,+n),u=e[o+1];if(null!=u){var c=l.distance(u);c<=n&&(l=u.move(s.start,c),Dm.push(u))}else if(a.distance(s.end)<2*n+1)return r.push(s),r;if(l.distance(s.start)<2*n+1)return r.push(s),r;var h=new Dd(a,l);return Vm.push(h),r.push(new Dd(s.start,a),h,new Dd(l,s.end)),r}),[])}(t,e,o)):m.push(t)}));var b=Um(m,o,s,a);return Vm=[],Dm=[],r.raw?b:b.serialize()}});!function(t){t.presets=Wm,t.registry=sg.create({type:"connector"}),t.registry.register(t.presets,!0)}(qm||(qm={}));var Hm,$m=Object.freeze({__proto__:null,get Grid(){return pg},get Background(){return fg},get Filter(){return wg},get Attr(){return Iy},get Highlighter(){return Wy},get PortLayout(){return Zy},get PortLabelLayout(){return ov},get NodeTool(){return Ov},get EdgeTool(){return Nv},get Marker(){return my},get NodeAnchor(){return $v},get EdgeAnchor(){return Zv},get ConnectionPoint(){return om},get Router(){return Im},get Connector(){return qm},get Registry(){return sg}}),Jm=function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;return n.pending=!1,n.changing=!1,n.data={},n.mutate(Yi(e)),n.changed={},n}return n(e,t),e.prototype.mutate=function(t,e){var n=this;void 0===e&&(e={});var r=!0===e.unset,i=!0===e.silent,o=[],s=this.changing;this.changing=!0,s||(this.previous=Yi(this.data),this.changed={});var a=this.data,l=this.previous,u=this.changed;if(Object.keys(t).forEach((function(e){var n=e,i=t[n];_a(a[n],i)||o.push(n),_a(l[n],i)?delete u[n]:u[n]=i,r?delete a[n]:a[n]=i})),!i&&o.length>0&&(this.pending=!0,this.pendingOptions=e,o.forEach((function(t){n.emit("change:*",{key:t,options:e,store:n,current:a[t],previous:l[t]})}))),s)return this;if(!i)for(;this.pending;)this.pending=!1,this.emit("changed",{current:a,previous:l,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this},e.prototype.get=function(t,e){if(null==t)return this.data;var n=this.data[t];return null==n?e:n},e.prototype.getPrevious=function(t){if(this.previous){var e=this.previous[t];return null==e?void 0:e}},e.prototype.set=function(t,e,n){var r;return null!=t&&("object"==typeof t?this.mutate(t,e):this.mutate(((r={})[t]=e,r),n)),this},e.prototype.remove=function(t,e){var n,i=void 0,o={};if("string"==typeof t)o[t]=i,n=e;else if(Array.isArray(t))t.forEach((function(t){return o[t]=i})),n=e;else{for(var s in this.data)o[s]=i;n=t}return this.mutate(o,r(r({},n),{unset:!0})),this},e.prototype.getByPath=function(t){return Ph(this.data,t,"/")},e.prototype.setByPath=function(t,e,n){void 0===n&&(n={});var r="/",i=Array.isArray(t)?s([],t,!0):t.split(r),o=Array.isArray(t)?t.join(r):t,a=i[0],l=i.length;if(n.propertyPath=o,n.propertyValue=e,n.propertyPathArray=i,1===l)this.set(a,e,n);else{for(var u={},c=u,h=a,p=1;p<l;p+=1){var f=i[p],d=Number.isFinite(Number(f));c=c[h]=d?[]:{},h=f}Ah(u,i,e,r);var g=Yi(this.data);n.rewrite&&Ch(g,t,r);var y=tl(g,u);this.set(a,y[a],n)}return this},e.prototype.removeByPath=function(t,e){var n=Array.isArray(t)?t:t.split("/"),r=n[0];if(1===n.length)this.remove(r,e);else{var i=n.slice(1),o=Yi(this.get(r));o&&Ch(o,i),this.set(r,o,e)}return this},e.prototype.hasChanged=function(t){return null==t?Object.keys(this.changed).length>0:t in this.changed},e.prototype.getChanges=function(t){if(null==t)return this.hasChanged()?Yi(this.changed):null;var e,n=this.changing?this.previous:this.data,r={};for(var i in t){var o=t[i];_a(n[i],o)||(r[i]=o,e=!0)}return e?Yi(r):null},e.prototype.toJSON=function(){return Yi(this.data)},e.prototype.clone=function(){return new(0,this.constructor)(this.data)},e.prototype.dispose=function(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})},o([Mh.dispose()],e.prototype,"dispose",null),e}(Mh),Xm=function(){function e(t){this.cell=t,this.ids={},this.cache={}}return e.prototype.get=function(){return Object.keys(this.ids)},e.prototype.start=function(t,n,i,o){var s=this;void 0===i&&(i={}),void 0===o&&(o="/");var a=this.cell.getPropByPath(t),l=qo(i,e.defaultOptions),u=this.getTiming(l.timing),c=this.getInterp(l.interp,a,n),h=0,p=Array.isArray(t)?t.join(o):t,f=Array.isArray(t)?t:t.split(o),d=function(){var t=(new Date).getTime();0===h&&(h=t);var e=(t-h)/l.duration;e<1?s.ids[p]=requestAnimationFrame(d):e=1;var n=c(u(e));s.cell.setPropByPath(f,n),i.progress&&i.progress(r({progress:e,currentValue:n},s.getArgs(p))),1===e&&(s.cell.notify("transition:complete",s.getArgs(p)),i.complete&&i.complete(s.getArgs(p)),s.cell.notify("transition:finish",s.getArgs(p)),i.finish&&i.finish(s.getArgs(p)),s.clean(p))};return setTimeout((function(){s.stop(t,void 0,o),s.cache[p]={startValue:a,targetValue:n,options:l},s.ids[p]=requestAnimationFrame(d),s.cell.notify("transition:start",s.getArgs(p)),i.start&&i.start(s.getArgs(p))}),i.delay),this.stop.bind(this,t,o,i)},e.prototype.stop=function(t,e,n){var i=this;void 0===e&&(e={}),void 0===n&&(n="/");var o=Array.isArray(t)?t:t.split(n);return Object.keys(this.ids).filter((function(t){return _a(o,t.split(n).slice(0,o.length))})).forEach((function(t){cancelAnimationFrame(i.ids[t]);var n=i.cache[t],o=i.getArgs(t),s=r(r({},n.options),e),a=s.jumpedToEnd;a&&null!=n.targetValue&&(i.cell.setPropByPath(t,n.targetValue),i.cell.notify("transition:end",r({},o)),i.cell.notify("transition:complete",r({},o)),s.complete&&s.complete(r({},o)));var l=r({jumpedToEnd:a},o);i.cell.notify("transition:stop",r({},l)),s.stop&&s.stop(r({},l)),i.cell.notify("transition:finish",r({},o)),s.finish&&s.finish(r({},o)),i.clean(t)})),this},e.prototype.clean=function(t){delete this.ids[t],delete this.cache[t]},e.prototype.getTiming=function(e){return"string"==typeof e?t.Timing[e]:e},e.prototype.getInterp=function(e,n,r){return e?e(n,r):"number"==typeof r?t.Interp.number(n,r):"string"==typeof r?"#"===r[0]?t.Interp.color(n,r):t.Interp.unit(n,r):t.Interp.object(n,r)},e.prototype.getArgs=function(t){var e=this.cache[t];return{path:t,startValue:e.startValue,targetValue:e.targetValue,cell:this.cell}},e}();!function(t){t.defaultOptions={delay:10,duration:100,timing:"linear"}}(Xm||(Xm={})),t.Cell=function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this,r=n.constructor.getDefaults(!0),i=tl({},n.preprocess(r),n.preprocess(e));return n.id=i.id||Vh(),n.store=new Jm(i),n.animation=new Xm(n),n.setup(),n.init(),n.postprocess(e),n}return n(e,t),e.config=function(t){var e,n=this,o=t.markup,s=t.propHooks,a=t.attrHooks,l=i(t,["markup","propHooks","attrHooks"]);null!=o&&(this.markup=o),s&&(this.propHooks=this.propHooks.slice(),Array.isArray(s)?(e=this.propHooks).push.apply(e,s):"function"==typeof s?this.propHooks.push(s):Object.keys(s).forEach((function(t){var e=s[t];"function"==typeof e&&n.propHooks.push(e)}))),a&&(this.attrHooks=r(r({},this.attrHooks),a)),this.defaults=tl({},this.defaults,l)},e.getMarkup=function(){return this.markup},e.getDefaults=function(t){return t?this.defaults:Yi(this.defaults)},e.getAttrHooks=function(){return this.attrHooks},e.applyPropHooks=function(t,e){return this.propHooks.reduce((function(e,n){return n?lh(n,t,e):e}),e)},Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return e.toStringTag},enumerable:!1,configurable:!0}),e.prototype.init=function(){},Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(t){this._model!==t&&(this._model=t)},enumerable:!1,configurable:!0}),e.prototype.preprocess=function(t,e){var n=t.id,r=this.constructor.applyPropHooks(this,t);return null==n&&!0!==e&&(r.id=Vh()),r},e.prototype.postprocess=function(t){},e.prototype.setup=function(){var t=this;this.store.on("change:*",(function(e){var n=e.key,r=e.current,i=e.previous,o=e.options;t.notify("change:*",{key:n,options:o,current:r,previous:i,cell:t}),t.notify("change:".concat(n),{options:o,current:r,previous:i,cell:t});var s=n;"source"!==s&&"target"!==s||t.notify("change:terminal",{type:s,current:r,previous:i,options:o,cell:t})})),this.store.on("changed",(function(e){var n=e.options;return t.notify("changed",{options:n,cell:t})}))},e.prototype.notify=function(t,e){this.trigger(t,e);var n=this.model;return n&&(n.notify("cell:".concat(t),e),this.isNode()?n.notify("node:".concat(t),r(r({},e),{node:this})):this.isEdge()&&n.notify("edge:".concat(t),r(r({},e),{edge:this}))),this},e.prototype.isNode=function(){return!1},e.prototype.isEdge=function(){return!1},e.prototype.isSameStore=function(t){return this.store===t.store},Object.defineProperty(e.prototype,"view",{get:function(){return this.store.get("view")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){return this.store.get("shape","")},enumerable:!1,configurable:!0}),e.prototype.getProp=function(t,e){return null==t?this.store.get():this.store.get(t,e)},e.prototype.setProp=function(t,e,n){if("string"==typeof t)this.store.set(t,e,n);else{var r=this.preprocess(t,!0);this.store.set(tl({},this.getProp(),r),e),this.postprocess(t)}return this},e.prototype.removeProp=function(t,e){return"string"==typeof t||Array.isArray(t)?this.store.removeByPath(t,e):this.store.remove(e),this},e.prototype.hasChanged=function(t){return null==t?this.store.hasChanged():this.store.hasChanged(t)},e.prototype.getPropByPath=function(t){return this.store.getByPath(t)},e.prototype.setPropByPath=function(t,e,n){var r=this;return void 0===n&&(n={}),this.model&&("children"===t?this._children=e?e.map((function(t){return r.model.getCell(t)})).filter((function(t){return null!=t})):null:"parent"===t&&(this._parent=e?this.model.getCell(e):null)),this.store.setByPath(t,e,n),this},e.prototype.removePropByPath=function(t,e){void 0===e&&(e={});var n=Array.isArray(t)?t:t.split("/");return"attrs"===n[0]&&(e.dirty=!0),this.store.removeByPath(n,e),this},e.prototype.prop=function(t,e,n){return null==t?this.getProp():"string"==typeof t||Array.isArray(t)?1===arguments.length?this.getPropByPath(t):null==e?this.removePropByPath(t,n||{}):this.setPropByPath(t,e,n||{}):this.setProp(t,e||{})},e.prototype.previous=function(t){return this.store.getPrevious(t)},Object.defineProperty(e.prototype,"zIndex",{get:function(){return this.getZIndex()},set:function(t){null==t?this.removeZIndex():this.setZIndex(t)},enumerable:!1,configurable:!0}),e.prototype.getZIndex=function(){return this.store.get("zIndex")},e.prototype.setZIndex=function(t,e){return void 0===e&&(e={}),this.store.set("zIndex",t,e),this},e.prototype.removeZIndex=function(t){return void 0===t&&(t={}),this.store.remove("zIndex",t),this},e.prototype.toFront=function(t){void 0===t&&(t={});var e=this.model;if(e){var n,r=e.getMaxZIndex();t.deep?(n=this.getDescendants({deep:!0,breadthFirst:!0})).unshift(this):n=[this],r=r-n.length+1;var i=e.total(),o=e.indexOf(this)!==i-n.length;o||(o=n.some((function(t,e){return t.getZIndex()!==r+e}))),o&&this.batchUpdate("to-front",(function(){r+=n.length,n.forEach((function(e,n){e.setZIndex(r+n,t)}))}))}return this},e.prototype.toBack=function(t){void 0===t&&(t={});var e=this.model;if(e){var n,r=e.getMinZIndex();t.deep?(n=this.getDescendants({deep:!0,breadthFirst:!0})).unshift(this):n=[this];var i=0!==e.indexOf(this);i||(i=n.some((function(t,e){return t.getZIndex()!==r+e}))),i&&this.batchUpdate("to-back",(function(){r-=n.length,n.forEach((function(e,n){e.setZIndex(r+n,t)}))}))}return this},Object.defineProperty(e.prototype,"markup",{get:function(){return this.getMarkup()},set:function(t){null==t?this.removeMarkup():this.setMarkup(t)},enumerable:!1,configurable:!0}),e.prototype.getMarkup=function(){var t=this.store.get("markup");null==t&&(t=this.constructor.getMarkup());return t},e.prototype.setMarkup=function(t,e){return void 0===e&&(e={}),this.store.set("markup",t,e),this},e.prototype.removeMarkup=function(t){return void 0===t&&(t={}),this.store.remove("markup",t),this},Object.defineProperty(e.prototype,"attrs",{get:function(){return this.getAttrs()},set:function(t){null==t?this.removeAttrs():this.setAttrs(t)},enumerable:!1,configurable:!0}),e.prototype.getAttrs=function(){var t=this.store.get("attrs");return t?r({},t):{}},e.prototype.setAttrs=function(t,e){var n=this;if(void 0===e&&(e={}),null==t)this.removeAttrs(e);else{var i=function(t){return n.store.set("attrs",t,e)};if(!0===e.overwrite)i(t);else{var o=this.getAttrs();!1===e.deep?i(r(r({},o),t)):i(tl({},o,t))}}return this},e.prototype.replaceAttrs=function(t,e){return void 0===e&&(e={}),this.setAttrs(t,r(r({},e),{overwrite:!0}))},e.prototype.updateAttrs=function(t,e){return void 0===e&&(e={}),this.setAttrs(t,r(r({},e),{deep:!1}))},e.prototype.removeAttrs=function(t){return void 0===t&&(t={}),this.store.remove("attrs",t),this},e.prototype.getAttrDefinition=function(t){if(!t)return null;var e=this.constructor.getAttrHooks()||{},n=e[t]||Iy.registry.get(t);if(!n){var r=qr(t);n=e[r]||Iy.registry.get(r)}return n||null},e.prototype.getAttrByPath=function(t){return null==t||""===t?this.getAttrs():this.getPropByPath(this.prefixAttrPath(t))},e.prototype.setAttrByPath=function(t,e,n){return void 0===n&&(n={}),this.setPropByPath(this.prefixAttrPath(t),e,n),this},e.prototype.removeAttrByPath=function(t,e){return void 0===e&&(e={}),this.removePropByPath(this.prefixAttrPath(t),e),this},e.prototype.prefixAttrPath=function(t){return Array.isArray(t)?["attrs"].concat(t):"attrs/".concat(t)},e.prototype.attr=function(t,e,n){return null==t?this.getAttrByPath():"string"==typeof t||Array.isArray(t)?1===arguments.length?this.getAttrByPath(t):null==e?this.removeAttrByPath(t,n||{}):this.setAttrByPath(t,e,n||{}):this.setAttrs(t,e||{})},Object.defineProperty(e.prototype,"visible",{get:function(){return this.isVisible()},set:function(t){this.setVisible(t)},enumerable:!1,configurable:!0}),e.prototype.setVisible=function(t,e){return void 0===e&&(e={}),this.store.set("visible",t,e),this},e.prototype.isVisible=function(){return!1!==this.store.get("visible")},e.prototype.show=function(t){return void 0===t&&(t={}),this.isVisible()||this.setVisible(!0,t),this},e.prototype.hide=function(t){return void 0===t&&(t={}),this.isVisible()&&this.setVisible(!1,t),this},e.prototype.toggleVisible=function(t,e){void 0===e&&(e={});var n="boolean"==typeof t?e:t;return("boolean"==typeof t?t:!this.isVisible())?this.show(n):this.hide(n),this},Object.defineProperty(e.prototype,"data",{get:function(){return this.getData()},set:function(t){this.setData(t)},enumerable:!1,configurable:!0}),e.prototype.getData=function(){return this.store.get("data")},e.prototype.setData=function(t,e){var n=this;if(void 0===e&&(e={}),null==t)this.removeData(e);else{var i=function(t){return n.store.set("data",t,e)};if(!0===e.overwrite)i(t);else{var o=this.getData();!1===e.deep?i("object"==typeof t?r(r({},o),t):t):i(tl({},o,t))}}return this},e.prototype.replaceData=function(t,e){return void 0===e&&(e={}),this.setData(t,r(r({},e),{overwrite:!0}))},e.prototype.updateData=function(t,e){return void 0===e&&(e={}),this.setData(t,r(r({},e),{deep:!1}))},e.prototype.removeData=function(t){return void 0===t&&(t={}),this.store.remove("data",t),this},Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this.getChildren()},enumerable:!1,configurable:!0}),e.prototype.getParentId=function(){return this.store.get("parent")},e.prototype.getParent=function(){var t=this.getParentId();if(t&&this.model){var e=this.model.getCell(t);return this._parent=e,e}return null},e.prototype.getChildren=function(){var t=this,e=this.store.get("children");if(e&&e.length&&this.model){var n=e.map((function(e){var n;return null===(n=t.model)||void 0===n?void 0:n.getCell(e)})).filter((function(t){return null!=t}));return this._children=n,s([],n,!0)}return null},e.prototype.hasParent=function(){return null!=this.parent},e.prototype.isParentOf=function(t){return null!=t&&t.getParent()===this},e.prototype.isChildOf=function(t){return null!=t&&this.getParent()===t},e.prototype.eachChild=function(t,e){return this.children&&this.children.forEach(t,e),this},e.prototype.filterChild=function(t,e){return this.children?this.children.filter(t,e):[]},e.prototype.getChildCount=function(){return null==this.children?0:this.children.length},e.prototype.getChildIndex=function(t){return null==this.children?-1:this.children.indexOf(t)},e.prototype.getChildAt=function(t){return null!=this.children&&t>=0?this.children[t]:null},e.prototype.getAncestors=function(t){void 0===t&&(t={});for(var e=[],n=this.getParent();n;)e.push(n),n=!1!==t.deep?n.getParent():null;return e},e.prototype.getDescendants=function(t){if(void 0===t&&(t={}),!1!==t.deep){if(t.breadthFirst){for(var e=[],n=this.getChildren()||[];n.length>0;){var r=n.shift(),i=r.getChildren();e.push(r),i&&n.push.apply(n,i)}return e}var o=this.getChildren()||[];return o.forEach((function(e){o.push.apply(o,e.getDescendants(t))})),o}return this.getChildren()||[]},e.prototype.isDescendantOf=function(t,e){if(void 0===e&&(e={}),null==t)return!1;if(!1!==e.deep){for(var n=this.getParent();n;){if(n===t)return!0;n=n.getParent()}return!1}return this.isChildOf(t)},e.prototype.isAncestorOf=function(t,e){return void 0===e&&(e={}),null!=t&&t.isDescendantOf(this,e)},e.prototype.contains=function(t){return this.isAncestorOf(t)},e.prototype.getCommonAncestor=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.getCommonAncestor.apply(e,s([this],t,!1))},e.prototype.setParent=function(t,e){return void 0===e&&(e={}),this._parent=t,t?this.store.set("parent",t.id,e):this.store.remove("parent",e),this},e.prototype.setChildren=function(t,e){return void 0===e&&(e={}),this._children=t,null!=t?this.store.set("children",t.map((function(t){return t.id})),e):this.store.remove("children",e),this},e.prototype.unembed=function(t,e){void 0===e&&(e={});var n=this.children;if(null!=n&&null!=t){var r=this.getChildIndex(t);-1!==r&&(n.splice(r,1),t.setParent(null,e),this.setChildren(n,e))}return this},e.prototype.embed=function(t,e){return void 0===e&&(e={}),t.addTo(this,e),this},e.prototype.addTo=function(t,n){return void 0===n&&(n={}),e.isCell(t)?t.addChild(this,n):t.addCell(this,n),this},e.prototype.insertTo=function(t,e,n){return void 0===n&&(n={}),t.insertChild(this,e,n),this},e.prototype.addChild=function(t,e){return void 0===e&&(e={}),this.insertChild(t,void 0,e)},e.prototype.insertChild=function(t,e,n){if(void 0===n&&(n={}),null!=t&&t!==this){var r=t.getParent(),i=this!==r,o=e;if(null==o&&(o=this.getChildCount(),i||(o-=1)),r){var s=r.getChildren();if(s){var a=s.indexOf(t);a>=0&&(t.setParent(null,n),s.splice(a,1),r.setChildren(s,n))}}var l=this.children;if(null==l?(l=[]).push(t):l.splice(o,0,t),t.setParent(this,n),this.setChildren(l,n),i&&this.model){var u=this.model.getIncomingEdges(this),c=this.model.getOutgoingEdges(this);u&&u.forEach((function(t){return t.updateParent(n)})),c&&c.forEach((function(t){return t.updateParent(n)}))}this.model&&this.model.addCell(t,n)}return this},e.prototype.removeFromParent=function(t){void 0===t&&(t={});var e=this.getParent();if(null!=e){var n=e.getChildIndex(this);e.removeChildAt(n,t)}return this},e.prototype.removeChild=function(t,e){void 0===e&&(e={});var n=this.getChildIndex(t);return this.removeChildAt(n,e)},e.prototype.removeChildAt=function(t,e){void 0===e&&(e={});var n=this.getChildAt(t);return null!=this.children&&null!=n&&(this.unembed(n,e),n.remove(e)),n},e.prototype.remove=function(t){var e=this;return void 0===t&&(t={}),this.batchUpdate("remove",(function(){var n=e.getParent();n&&n.removeChild(e,t),!1!==t.deep&&e.eachChild((function(e){return e.remove(t)})),e.model&&e.model.removeCell(e,t)})),this},e.prototype.transition=function(t,e,n,r){return void 0===n&&(n={}),void 0===r&&(r="/"),this.animation.start(t,e,n,r)},e.prototype.stopTransition=function(t,e,n){return void 0===n&&(n="/"),this.animation.stop(t,e,n),this},e.prototype.getTransitions=function(){return this.animation.get()},e.prototype.translate=function(t,e,n){return this},e.prototype.scale=function(t,e,n,r){return this},e.prototype.addTools=function(t,e,n){var i=Array.isArray(t)?t:[t],o="string"==typeof e?e:null,a="object"==typeof e?e:"object"==typeof n?n:{};if(a.reset)return this.setTools({name:o,items:i,local:a.local},a);var l=Yi(this.getTools());return null==l||null==o||l.name===o?(null==l&&(l={}),l.items||(l.items=[]),l.name=o,l.items=s(s([],l.items,!0),i,!0),this.setTools(r({},l),a)):void 0},e.prototype.setTools=function(t,n){return void 0===n&&(n={}),null==t?this.removeTools():this.store.set("tools",e.normalizeTools(t),n),this},e.prototype.getTools=function(){return this.store.get("tools")},e.prototype.removeTools=function(t){return void 0===t&&(t={}),this.store.remove("tools",t),this},e.prototype.hasTools=function(t){var e=this.getTools();return null!=e&&(null==t||e.name===t)},e.prototype.hasTool=function(t){var e=this.getTools();return null!=e&&e.items.some((function(e){return"string"==typeof e?e===t:e.name===t}))},e.prototype.removeTool=function(t,e){void 0===e&&(e={});var n=Yi(this.getTools());if(n){var r=!1,i=n.items.slice(),o=function(t){i.splice(t,1),r=!0};if("number"==typeof t)o(t);else for(var s=i.length-1;s>=0;s-=1){var a=i[s];("string"==typeof a?a===t:a.name===t)&&o(s)}r&&(n.items=i,this.setTools(n,e))}return this},e.prototype.getBBox=function(t){return new Vd},e.prototype.getConnectionPoint=function(t,e){return new jd},e.prototype.toJSON=function(t){var e=this;void 0===t&&(t={});var n=r({},this.store.get()),i=Object.prototype.toString,o=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!n.shape){var s=this.constructor;throw new Error("Unable to serialize ".concat(o,' missing "shape" prop, check the ').concat(o,' "').concat(s.name||i.call(s),'"'))}var a=this.constructor,l=!0===t.diff,u=n.attrs||{},c=a.getDefaults(!0),h=l?this.preprocess(c,!0):c,p=h.attrs||{},f={};Object.keys(n).forEach((function(t){var r=n[t];if(null!=r&&!Array.isArray(r)&&"object"==typeof r&&!Dn(r))throw new Error("Can only serialize ".concat(o,' with plain-object props, but got a "').concat(i.call(r),'" type of key "').concat(t,'" on ').concat(o,' "').concat(e.id,'"'));"attrs"!==t&&"shape"!==t&&l&&(_a(r,h[t])&&delete n[t])})),Object.keys(u).forEach((function(t){var e=u[t],n=p[t];Object.keys(e).forEach((function(r){var i=e[r],o=n?n[r]:null;null==i||"object"!=typeof i||Array.isArray(i)?null!=n&&_a(o,i)||(null==f[t]&&(f[t]={}),f[t][r]=i):Object.keys(i).forEach((function(e){var s=i[e];null!=n&&null!=o&&B(o)&&_a(o[e],s)||(null==f[t]&&(f[t]={}),null==f[t][r]&&(f[t][r]={}),f[t][r][e]=s)}))}))}));var d=r(r({},n),{attrs:Na(f)?void 0:f});null==d.attrs&&delete d.attrs;var g=d;return 0===g.angle&&delete g.angle,Yi(g)},e.prototype.clone=function(t){if(void 0===t&&(t={}),!t.deep){var n=r({},this.store.get());return t.keepId||delete n.id,delete n.parent,delete n.children,new(0,this.constructor)(n)}return e.deepClone(this)[this.id]},e.prototype.findView=function(t){return t.findViewByCell(this)},e.prototype.startBatch=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n=this.model),this.notify("batch:start",{name:t,data:e,cell:this}),n&&n.startBatch(t,r(r({},e),{cell:this})),this},e.prototype.stopBatch=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n=this.model),n&&n.stopBatch(t,r(r({},e),{cell:this})),this.notify("batch:stop",{name:t,data:e,cell:this}),this},e.prototype.batchUpdate=function(t,e,n){var r=this.model;this.startBatch(t,n,r);var i=e();return this.stopBatch(t,n,r),i},e.prototype.dispose=function(){this.removeFromParent(),this.store.dispose()},e.defaults={},e.attrHooks={},e.propHooks=[],o([Mh.dispose()],e.prototype,"dispose",null),e}(Mh),(t.Cell||(t.Cell={})).normalizeTools=function(t){return"string"==typeof t?{items:[t]}:Array.isArray(t)?{items:t}:t.items?t:{items:[t]}},function(t){t.toStringTag="X6.".concat(t.name),t.isCell=function(e){if(null==e)return!1;if(e instanceof t)return!0;var n=e[Symbol.toStringTag],r=e;return(null==n||n===t.toStringTag)&&"function"==typeof r.isNode&&"function"==typeof r.isEdge&&"function"==typeof r.prop&&"function"==typeof r.attr}}(t.Cell||(t.Cell={})),function(t){t.getCommonAncestor=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.filter((function(t){return null!=t})).map((function(t){return t.getAncestors()})).sort((function(t,e){return t.length-e.length})),r=n.shift();return r.find((function(t){return n.every((function(e){return e.includes(t)}))}))||null},t.getCellsBBox=function(t,e){void 0===e&&(e={});for(var n=null,r=0,i=t.length;r<i;r+=1){var o=t[r],s=o.getBBox(e);if(s){if(o.isNode()){var a=o.getAngle();null!=a&&0!==a&&(s=s.bbox(a))}n=null==n?s:n.union(s)}}return n},t.deepClone=function(e){var n=s([e],e.getDescendants({deep:!0}),!0);return t.cloneCells(n)},t.cloneCells=function(t){var e=wc(t),n=e.reduce((function(t,e){return t[e.id]=e.clone(),t}),{});return e.forEach((function(t){var e=n[t.id];if(e.isEdge()){var i=e.getSourceCellId(),o=e.getTargetCellId();i&&n[i]&&e.setSource(r(r({},e.getSource()),{cell:n[i].id})),o&&n[o]&&e.setTarget(r(r({},e.getTarget()),{cell:n[o].id}))}var s=t.getParent();s&&n[s.id]&&e.setParent(n[s.id]);var a=t.getChildren();if(a&&a.length){var l=a.reduce((function(t,e){return n[e.id]&&t.push(n[e.id]),t}),[]);l.length>0&&e.setChildren(l)}})),n}}(t.Cell||(t.Cell={})),function(t){t.config({propHooks:function(e){var n=e.tools,r=i(e,["tools"]);return n&&(r.tools=t.normalizeTools(n)),r}})}(t.Cell||(t.Cell={})),function(t){var e,n;t.exist=function(t,r){return r?null!=e&&e.exist(t):null!=n&&n.exist(t)},t.setEdgeRegistry=function(t){e=t},t.setNodeRegistry=function(t){n=t}}(Hm||(Hm={}));var Ym=function(){function t(t){this.ports=[],this.groups={},this.init(Yi(t))}return t.prototype.getPorts=function(){return this.ports},t.prototype.getGroup=function(t){return null!=t?this.groups[t]:null},t.prototype.getPortsByGroup=function(t){return this.ports.filter((function(e){return e.group===t||null==e.group&&null==t}))},t.prototype.getPortsLayoutByGroup=function(t,e){var n,r=this,i=this.getPortsByGroup(t),o=t?this.getGroup(t):null,s=o?o.position:null,a=s?s.name:null;if(null!=a){var l=Zy.registry.get(a);if(null==l)return Zy.registry.onNotFound(a);n=l}else n=Zy.presets.left;var u=i.map((function(t){return t&&t.position&&t.position.args||{}})),c=s&&s.args||{};return n(u,e,c).map((function(t,n){var o=i[n];return{portLayout:t,portId:o.id,portSize:o.size,portAttrs:o.attrs,labelSize:o.label.size,labelLayout:r.getPortLabelLayout(o,jd.create(t.position),e)}}))},t.prototype.init=function(t){var e=this,n=t.groups,r=t.items;null!=n&&Object.keys(n).forEach((function(t){e.groups[t]=e.parseGroup(n[t])})),Array.isArray(r)&&r.forEach((function(t){e.ports.push(e.parsePort(t))}))},t.prototype.parseGroup=function(t){return r(r({},t),{label:this.getLabel(t,!0),position:this.getPortPosition(t.position,!0)})},t.prototype.parsePort=function(t){var e=r({},t),n=this.getGroup(t.group)||{};return e.markup=e.markup||n.markup,e.attrs=tl({},n.attrs,e.attrs),e.position=this.createPosition(n,e),e.label=tl({},n.label,this.getLabel(e)),e.zIndex=this.getZIndex(n,e),e.size=r(r({},n.size),e.size),e},t.prototype.getZIndex=function(t,e){return"number"==typeof e.zIndex?e.zIndex:"number"==typeof t.zIndex||"auto"===t.zIndex?t.zIndex:"auto"},t.prototype.createPosition=function(t,e){return tl({name:"left",args:{}},t.position,{args:e.args})},t.prototype.getPortPosition=function(t,e){if(void 0===e&&(e=!1),null==t){if(e)return{name:"left",args:{}}}else{if("string"==typeof t)return{name:t,args:{}};if(Array.isArray(t))return{name:"absolute",args:{x:t[0],y:t[1]}};if("object"==typeof t)return t}return{args:{}}},t.prototype.getPortLabelPosition=function(t,e){if(void 0===e&&(e=!1),null==t){if(e)return{name:"left",args:{}}}else{if("string"==typeof t)return{name:t,args:{}};if("object"==typeof t)return t}return{args:{}}},t.prototype.getLabel=function(t,e){void 0===e&&(e=!1);var n=t.label||{};return n.position=this.getPortLabelPosition(n.position,e),n},t.prototype.getPortLabelLayout=function(t,e,n){var r=t.label.position.name||"left",i=t.label.position.args||{},o=ov.registry.get(r)||ov.presets.left;return o?o(e,n,i):null},t}();t.Node=function(e){function o(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.initPorts(),n}return n(o,e),Object.defineProperty(o.prototype,Symbol.toStringTag,{get:function(){return o.toStringTag},enumerable:!1,configurable:!0}),o.prototype.preprocess=function(t,n){var o=t.x,s=t.y,a=t.width,l=t.height,u=i(t,["x","y","width","height"]);if(null!=o||null!=s){var c=u.position;u.position=r(r({},c),{x:null!=o?o:c?c.x:0,y:null!=s?s:c?c.y:0})}if(null!=a||null!=l){var h=u.size;u.size=r(r({},h),{width:null!=a?a:h?h.width:0,height:null!=l?l:h?h.height:0})}return e.prototype.preprocess.call(this,u,n)},o.prototype.isNode=function(){return!0},o.prototype.size=function(t,e,n){return void 0===t?this.getSize():"number"==typeof t?this.setSize(t,e,n):this.setSize(t,e)},o.prototype.getSize=function(){var t=this.store.get("size");return t?r({},t):{width:1,height:1}},o.prototype.setSize=function(t,e,n){return"object"==typeof t?this.resize(t.width,t.height,e):this.resize(t,e,n),this},o.prototype.resize=function(e,n,r){void 0===r&&(r={}),this.startBatch("resize",r);var i=r.direction;if(i){var o=this.getSize();switch(i){case"left":case"right":n=o.height;break;case"top":case"bottom":e=o.width}var s={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[i],a=t.Angle.normalize(this.getAngle()||0);r.absolute&&(s+=Math.floor((a+45)/90),s%=4);var l=this.getBBox(),u=(0===s?l.getBottomLeft():1===s?l.getCorner():2===s?l.getTopRight():l.getOrigin()).clone().rotate(-a,l.getCenter()),c=Math.sqrt(e*e+n*n)/2,h=s*Math.PI/2;h+=Math.atan(s%2==0?n/e:e/n),h-=t.Angle.toRad(a);var p=jd.fromPolar(c,h,u).clone().translate(e/-2,n/-2);this.store.set("size",{width:e,height:n},r),this.setPosition(p.x,p.y,r)}else this.store.set("size",{width:e,height:n},r);return this.stopBatch("resize",r),this},o.prototype.scale=function(t,e,n,r){void 0===r&&(r={});var i=this.getBBox().scale(t,e,null==n?void 0:n);return this.startBatch("scale",r),this.setPosition(i.x,i.y,r),this.resize(i.width,i.height,r),this.stopBatch("scale"),this},o.prototype.position=function(t,e,n){return"number"==typeof t?this.setPosition(t,e,n):this.getPosition(t)},o.prototype.getPosition=function(t){if(void 0===t&&(t={}),t.relative){var e=this.getParent();if(null!=e&&e.isNode()){var n=this.getPosition(),i=e.getPosition();return{x:n.x-i.x,y:n.y-i.y}}}var o=this.store.get("position");return o?r({},o):{x:0,y:0}},o.prototype.setPosition=function(t,e,n){var r,i,o;if(void 0===n&&(n={}),"object"==typeof t?(r=t.x,i=t.y,o=e||{}):(r=t,i=e,o=n||{}),o.relative){var s=this.getParent();if(null!=s&&s.isNode()){var a=s.getPosition();r+=a.x,i+=a.y}}if(o.deep){var l=this.getPosition();this.translate(r-l.x,i-l.y,o)}else this.store.set("position",{x:r,y:i},o);return this},o.prototype.translate=function(e,n,i){if(void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i={}),0===e&&0===n)return this;i.translateBy=i.translateBy||this.id;var o=this.getPosition();if(null!=i.restrict&&i.translateBy===this.id){var s=this.getBBox({deep:!0}),a=i.restrict,l=o.x-s.x,u=o.y-s.y,c=Math.max(a.x+l,Math.min(a.x+a.width+l-s.width,o.x+e)),h=Math.max(a.y+u,Math.min(a.y+a.height+u-s.height,o.y+n));e=c-o.x,n=h-o.y}var p={x:o.x+e,y:o.y+n};return i.tx=e,i.ty=n,i.transition?("object"!=typeof i.transition&&(i.transition={}),this.transition("position",p,r(r({},i.transition),{interp:t.Interp.object})),this.eachChild((function(t){var r;(null===(r=i.exclude)||void 0===r?void 0:r.includes(t))||t.translate(e,n,i)}))):(this.startBatch("translate",i),this.store.set("position",p,i),this.eachChild((function(t){var r;(null===(r=i.exclude)||void 0===r?void 0:r.includes(t))||t.translate(e,n,i)})),this.stopBatch("translate",i)),this},o.prototype.angle=function(t,e){return null==t?this.getAngle():this.rotate(t,e)},o.prototype.getAngle=function(){return this.store.get("angle",0)},o.prototype.rotate=function(t,e){void 0===e&&(e={});var n=this.getAngle();if(e.center){var i=this.getSize(),o=this.getPosition(),s=this.getBBox().getCenter();s.rotate(n-t,e.center);var a=s.x-i.width/2-o.x,l=s.y-i.height/2-o.y;this.startBatch("rotate",{angle:t,options:e}),this.setPosition(o.x+a,o.y+l,e),this.rotate(t,r(r({},e),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",e.absolute?t:(n+t)%360,e);return this},o.prototype.getBBox=function(e){if(void 0===e&&(e={}),e.deep){var n=this.getDescendants({deep:!0,breadthFirst:!0});return n.push(this),t.Cell.getCellsBBox(n)}return Vd.fromPositionAndSize(this.getPosition(),this.getSize())},o.prototype.getConnectionPoint=function(t,e){var n=this.getBBox(),r=n.getCenter(),i=t.getTerminal(e);if(null==i)return r;var o=i.port;if(!o||!this.hasPort(o))return r;var s=this.getPort(o);if(!s||!s.group)return r;var a=this.getPortsPosition(s.group)[o].position,l=jd.create(a).translate(n.getOrigin()),u=this.getAngle();return u&&l.rotate(-u,r),l},o.prototype.fit=function(e){void 0===e&&(e={});var n=(this.getChildren()||[]).filter((function(t){return t.isNode()}));if(0===n.length)return this;this.startBatch("fit-embeds",e),e.deep&&n.forEach((function(t){return t.fit(e)}));var r=t.Cell.getCellsBBox(n),i=r.x,o=r.y,s=r.width,a=r.height,l=Uh(e.padding);return i-=l.left,o-=l.top,s+=l.left+l.right,a+=l.bottom+l.top,this.store.set({position:{x:i,y:o},size:{width:s,height:a}},e),this.stopBatch("fit-embeds"),this},Object.defineProperty(o.prototype,"portContainerMarkup",{get:function(){return this.getPortContainerMarkup()},set:function(t){this.setPortContainerMarkup(t)},enumerable:!1,configurable:!0}),o.prototype.getDefaultPortContainerMarkup=function(){return this.store.get("defaultPortContainerMarkup")||t.Markup.getPortContainerMarkup()},o.prototype.getPortContainerMarkup=function(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()},o.prototype.setPortContainerMarkup=function(e,n){return void 0===n&&(n={}),this.store.set("portContainerMarkup",t.Markup.clone(e),n),this},Object.defineProperty(o.prototype,"portMarkup",{get:function(){return this.getPortMarkup()},set:function(t){this.setPortMarkup(t)},enumerable:!1,configurable:!0}),o.prototype.getDefaultPortMarkup=function(){return this.store.get("defaultPortMarkup")||t.Markup.getPortMarkup()},o.prototype.getPortMarkup=function(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()},o.prototype.setPortMarkup=function(e,n){return void 0===n&&(n={}),this.store.set("portMarkup",t.Markup.clone(e),n),this},Object.defineProperty(o.prototype,"portLabelMarkup",{get:function(){return this.getPortLabelMarkup()},set:function(t){this.setPortLabelMarkup(t)},enumerable:!1,configurable:!0}),o.prototype.getDefaultPortLabelMarkup=function(){return this.store.get("defaultPortLabelMarkup")||t.Markup.getPortLabelMarkup()},o.prototype.getPortLabelMarkup=function(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()},o.prototype.setPortLabelMarkup=function(e,n){return void 0===n&&(n={}),this.store.set("portLabelMarkup",t.Markup.clone(e),n),this},Object.defineProperty(o.prototype,"ports",{get:function(){var t=this.store.get("ports",{items:[]});return null==t.items&&(t.items=[]),t},enumerable:!1,configurable:!0}),o.prototype.getPorts=function(){return Yi(this.ports.items)},o.prototype.getPortsByGroup=function(t){return this.getPorts().filter((function(e){return e.group===t}))},o.prototype.getPort=function(t){return Yi(this.ports.items.find((function(e){return e.id&&e.id===t})))},o.prototype.getPortAt=function(t){return this.ports.items[t]||null},o.prototype.hasPorts=function(){return this.ports.items.length>0},o.prototype.hasPort=function(t){return-1!==this.getPortIndex(t)},o.prototype.getPortIndex=function(t){var e="string"==typeof t?t:t.id;return null!=e?this.ports.items.findIndex((function(t){return t.id===e})):-1},o.prototype.getPortsPosition=function(t){var e=this.getSize();return this.port.getPortsLayoutByGroup(t,new Vd(0,0,e.width,e.height)).reduce((function(t,e){var n=e.portLayout;return t[e.portId]={position:r({},n.position),angle:n.angle||0},t}),{})},o.prototype.getPortProp=function(t,e){return this.getPropByPath(this.prefixPortPath(t,e))},o.prototype.setPortProp=function(t,e,n,r){if("string"==typeof e||Array.isArray(e)){var i=this.prefixPortPath(t,e),o=n;return this.setPropByPath(i,o,r)}var s=this.prefixPortPath(t),a=e;return this.setPropByPath(s,a,n)},o.prototype.removePortProp=function(t,e,n){return"string"==typeof e||Array.isArray(e)?this.removePropByPath(this.prefixPortPath(t,e),n):this.removePropByPath(this.prefixPortPath(t),e)},o.prototype.portProp=function(t,e,n,r){return null==e?this.getPortProp(t):"string"==typeof e||Array.isArray(e)?2===arguments.length?this.getPortProp(t,e):null==n?this.removePortProp(t,e,r):this.setPortProp(t,e,n,r):this.setPortProp(t,e,n)},o.prototype.prefixPortPath=function(t,e){var n=this.getPortIndex(t);if(-1===n)throw new Error('Unable to find port with id: "'.concat(t,'"'));return null==e||""===e?["ports","items","".concat(n)]:Array.isArray(e)?s(["ports","items","".concat(n)],e,!0):"ports/items/".concat(n,"/").concat(e)},o.prototype.addPort=function(t,e){var n=s([],this.ports.items,!0);return n.push(t),this.setPropByPath("ports/items",n,e),this},o.prototype.addPorts=function(t,e){return this.setPropByPath("ports/items",s(s([],this.ports.items,!0),t,!0),e),this},o.prototype.insertPort=function(t,e,n){var r=s([],this.ports.items,!0);return r.splice(t,0,e),this.setPropByPath("ports/items",r,n),this},o.prototype.removePort=function(t,e){return void 0===e&&(e={}),this.removePortAt(this.getPortIndex(t),e)},o.prototype.removePortAt=function(t,e){if(void 0===e&&(e={}),t>=0){var n=s([],this.ports.items,!0);n.splice(t,1),e.rewrite=!0,this.setPropByPath("ports/items",n,e)}return this},o.prototype.removePorts=function(t,e){var n;if(Array.isArray(t)){if(n=e||{},t.length){n.rewrite=!0;var r=s([],this.ports.items,!0).filter((function(e){return!t.some((function(t){var n="string"==typeof t?t:t.id;return e.id===n}))}));this.setPropByPath("ports/items",r,n)}}else(n=t||{}).rewrite=!0,this.setPropByPath("ports/items",[],n);return this},o.prototype.getParsedPorts=function(){return this.port.getPorts()},o.prototype.getParsedGroups=function(){return this.port.groups},o.prototype.getPortsLayoutByGroup=function(t,e){return this.port.getPortsLayoutByGroup(t,e)},o.prototype.initPorts=function(){var t=this;this.updatePortData(),this.on("change:ports",(function(){t.processRemovedPort(),t.updatePortData()}))},o.prototype.processRemovedPort=function(){var t=this.ports,e={};t.items.forEach((function(t){t.id&&(e[t.id]=!0)}));var n={};(this.store.getPrevious("ports")||{items:[]}).items.forEach((function(t){t.id&&!e[t.id]&&(n[t.id]=!0)}));var r=this.model;r&&!Na(n)&&(r.getConnectedEdges(this,{incoming:!0}).forEach((function(t){var e=t.getTargetPortId();e&&n[e]&&t.remove()})),r.getConnectedEdges(this,{outgoing:!0}).forEach((function(t){var e=t.getSourcePortId();e&&n[e]&&t.remove()})))},o.prototype.validatePorts=function(){var t=this,e={},n=[];return this.ports.items.forEach((function(r){"object"!=typeof r&&n.push("Invalid port ".concat(r,".")),null==r.id&&(r.id=t.generatePortId()),e[r.id]&&n.push("Duplicitied port id."),e[r.id]=!0})),n},o.prototype.generatePortId=function(){return Vh()},o.prototype.updatePortData=function(){var t=this.validatePorts();if(t.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(t.join(" "));var e=this.port?this.port.getPorts():null;this.port=new Ym(this.ports);var n=this.port.getPorts(),r=e?n.filter((function(t){return e.find((function(e){return e.id===t.id}))?null:t})):s([],n,!0),i=e?e.filter((function(t){return n.find((function(e){return e.id===t.id}))?null:t})):[];r.length>0&&this.notify("ports:added",{added:r,cell:this,node:this}),i.length>0&&this.notify("ports:removed",{removed:i,cell:this,node:this})},o.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},o}(t.Cell),function(t){t.toStringTag="X6.".concat(t.name),t.isNode=function(e){if(null==e)return!1;if(e instanceof t)return!0;var n=e[Symbol.toStringTag],r=e;return(null==n||n===t.toStringTag)&&"function"==typeof r.isNode&&"function"==typeof r.isEdge&&"function"==typeof r.prop&&"function"==typeof r.attr&&"function"==typeof r.size&&"function"==typeof r.position}}(t.Node||(t.Node={})),function(t){t.config({propHooks:function(t){var e=t.ports,n=i(t,["ports"]);return e&&(n.ports=Array.isArray(e)?{items:e}:e),n}})}(t.Node||(t.Node={})),function(t){t.registry=sg.create({type:"node",process:function(e,n){if(Hm.exist(e,!0))throw new Error("Node with name '".concat(e,"' was registered by anthor Edge"));if("function"==typeof n)return n.config({shape:e}),n;var r=t,o=n.inherit,s=i(n,["inherit"]);if(o)if("string"==typeof o){var a=this.get(o);null==a?this.onNotFound(o,"inherited"):r=a}else r=o;null==s.constructorName&&(s.constructorName=e);var l=r.define.call(r,s);return l.config({shape:e}),l}}),Hm.setNodeRegistry(t.registry)}(t.Node||(t.Node={})),function(t){var e=0;t.define=function(n){var r,o=n.constructorName,s=n.overwrite,a=i(n,["constructorName","overwrite"]),l=bh((r=o||a.shape)?Oh(r):"CustomNode".concat(e+=1),this);return l.config(a),a.shape&&t.registry.register(a.shape,l,s),l},t.create=function(e){var n=e.shape||"rect",r=t.registry.get(n);return r?new r(e):t.registry.onNotFound(n)}}(t.Node||(t.Node={})),t.Edge=function(e){function o(t){return void 0===t&&(t={}),e.call(this,t)||this}return n(o,e),Object.defineProperty(o.prototype,Symbol.toStringTag,{get:function(){return o.toStringTag},enumerable:!1,configurable:!0}),o.prototype.preprocess=function(n,o){var s=n.source,a=n.sourceCell,l=n.sourcePort,u=n.sourcePoint,c=n.target,h=n.targetCell,p=n.targetPort,f=n.targetPoint,d=i(n,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),g=function(t){return"string"==typeof t||"number"==typeof t};if(null!=s)if(t.Cell.isCell(s))d.source={cell:s.id};else if(g(s))d.source={cell:s};else if(jd.isPoint(s))d.source=s.toJSON();else if(Array.isArray(s))d.source={x:s[0],y:s[1]};else{var y=s.cell;t.Cell.isCell(y)?d.source=r(r({},s),{cell:y.id}):d.source=s}if(null!=a||null!=l){var v=d.source;if(null!=a){var m=g(a)?a:a.id;v?v.cell=m:v=d.source={cell:m}}null!=l&&v&&(v.port=l)}else null!=u&&(d.source=jd.create(u).toJSON());if(null!=c)if(t.Cell.isCell(c))d.target={cell:c.id};else if(g(c))d.target={cell:c};else if(jd.isPoint(c))d.target=c.toJSON();else if(Array.isArray(c))d.target={x:c[0],y:c[1]};else{y=c.cell;t.Cell.isCell(y)?d.target=r(r({},c),{cell:y.id}):d.target=c}if(null!=h||null!=p){v=d.target;if(null!=h){m=g(h)?h:h.id;v?v.cell=m:v=d.target={cell:m}}null!=p&&v&&(v.port=p)}else null!=f&&(d.target=jd.create(f).toJSON());return e.prototype.preprocess.call(this,d,o)},o.prototype.setup=function(){var t=this;e.prototype.setup.call(this),this.on("change:labels",(function(e){return t.onLabelsChanged(e)})),this.on("change:vertices",(function(e){return t.onVertexsChanged(e)}))},o.prototype.isEdge=function(){return!0},o.prototype.disconnect=function(t){return void 0===t&&(t={}),this.store.set({source:{x:0,y:0},target:{x:0,y:0}},t),this},Object.defineProperty(o.prototype,"source",{get:function(){return this.getSource()},set:function(t){this.setSource(t)},enumerable:!1,configurable:!0}),o.prototype.getSource=function(){return this.getTerminal("source")},o.prototype.getSourceCellId=function(){return this.source.cell},o.prototype.getSourcePortId=function(){return this.source.port},o.prototype.setSource=function(t,e,n){return void 0===n&&(n={}),this.setTerminal("source",t,e,n)},Object.defineProperty(o.prototype,"target",{get:function(){return this.getTarget()},set:function(t){this.setTarget(t)},enumerable:!1,configurable:!0}),o.prototype.getTarget=function(){return this.getTerminal("target")},o.prototype.getTargetCellId=function(){return this.target.cell},o.prototype.getTargetPortId=function(){return this.target.port},o.prototype.setTarget=function(t,e,n){return void 0===n&&(n={}),this.setTerminal("target",t,e,n)},o.prototype.getTerminal=function(t){return r({},this.store.get(t))},o.prototype.setTerminal=function(e,n,r,i){if(void 0===i&&(i={}),t.Cell.isCell(n))return this.store.set(e,tl({},r,{cell:n.id}),i),this;var o=n;return jd.isPoint(n)||null!=o.x&&null!=o.y?(this.store.set(e,tl({},r,{x:o.x,y:o.y}),i),this):(this.store.set(e,Yi(n),i),this)},o.prototype.getSourcePoint=function(){return this.getTerminalPoint("source")},o.prototype.getTargetPoint=function(){return this.getTerminalPoint("target")},o.prototype.getTerminalPoint=function(t){var e=this[t];if(jd.isPointLike(e))return jd.create(e);var n=this.getTerminalCell(t);return n?n.getConnectionPoint(this,t):new jd},o.prototype.getSourceCell=function(){return this.getTerminalCell("source")},o.prototype.getTargetCell=function(){return this.getTerminalCell("target")},o.prototype.getTerminalCell=function(t){if(this.model){var e="source"===t?this.getSourceCellId():this.getTargetCellId();if(e)return this.model.getCell(e)}return null},o.prototype.getSourceNode=function(){return this.getTerminalNode("source")},o.prototype.getTargetNode=function(){return this.getTerminalNode("target")},o.prototype.getTerminalNode=function(t){for(var e=this,n={};e&&e.isEdge();){if(n[e.id])return null;n[e.id]=!0,e=e.getTerminalCell(t)}return e&&e.isNode()?e:null},Object.defineProperty(o.prototype,"router",{get:function(){return this.getRouter()},set:function(t){null==t?this.removeRouter():this.setRouter(t)},enumerable:!1,configurable:!0}),o.prototype.getRouter=function(){return this.store.get("router")},o.prototype.setRouter=function(t,e,n){return"object"==typeof t?this.store.set("router",t,e):this.store.set("router",{name:t,args:e},n),this},o.prototype.removeRouter=function(t){return void 0===t&&(t={}),this.store.remove("router",t),this},Object.defineProperty(o.prototype,"connector",{get:function(){return this.getConnector()},set:function(t){null==t?this.removeConnector():this.setConnector(t)},enumerable:!1,configurable:!0}),o.prototype.getConnector=function(){return this.store.get("connector")},o.prototype.setConnector=function(t,e,n){return"object"==typeof t?this.store.set("connector",t,e):this.store.set("connector",{name:t,args:e},n),this},o.prototype.removeConnector=function(t){return void 0===t&&(t={}),this.store.remove("connector",t)},o.prototype.getDefaultLabel=function(){var t=this.constructor;return Yi(this.store.get("defaultLabel")||t.defaultLabel||{})},Object.defineProperty(o.prototype,"labels",{get:function(){return this.getLabels()},set:function(t){this.setLabels(t)},enumerable:!1,configurable:!0}),o.prototype.getLabels=function(){var t=this;return s([],this.store.get("labels",[]),!0).map((function(e){return t.parseLabel(e)}))},o.prototype.setLabels=function(t,e){return void 0===e&&(e={}),this.store.set("labels",Array.isArray(t)?t:[t],e),this},o.prototype.insertLabel=function(t,e,n){void 0===n&&(n={});var r=this.getLabels(),i=r.length,o=null!=e&&Number.isFinite(e)?e:i;return o<0&&(o=i+o+1),r.splice(o,0,this.parseLabel(t)),this.setLabels(r,n)},o.prototype.appendLabel=function(t,e){return void 0===e&&(e={}),this.insertLabel(t,-1,e)},o.prototype.getLabelAt=function(t){var e=this.getLabels();return null!=t&&Number.isFinite(t)?this.parseLabel(e[t]):null},o.prototype.setLabelAt=function(t,e,n){if(void 0===n&&(n={}),null!=t&&Number.isFinite(t)){var r=this.getLabels();r[t]=this.parseLabel(e),this.setLabels(r,n)}return this},o.prototype.removeLabelAt=function(t,e){void 0===e&&(e={});var n=this.getLabels(),r=null!=t&&Number.isFinite(t)?t:-1,i=n.splice(r,1);return this.setLabels(n,e),i.length?i[0]:null},o.prototype.parseLabel=function(t){return"string"==typeof t?this.constructor.parseStringLabel(t):t},o.prototype.onLabelsChanged=function(t){var e=t.previous,n=t.current,r=e&&n?n.filter((function(t){return e.find((function(e){return t===e||_a(t,e)}))?null:t})):n?s([],n,!0):[],i=e&&n?e.filter((function(t){return n.find((function(e){return t===e||_a(t,e)}))?null:t})):e?s([],e,!0):[];r.length>0&&this.notify("labels:added",{added:r,cell:this,edge:this}),i.length>0&&this.notify("labels:removed",{removed:i,cell:this,edge:this})},Object.defineProperty(o.prototype,"vertices",{get:function(){return this.getVertices()},set:function(t){this.setVertices(t)},enumerable:!1,configurable:!0}),o.prototype.getVertices=function(){return s([],this.store.get("vertices",[]),!0)},o.prototype.setVertices=function(t,e){void 0===e&&(e={});var n=Array.isArray(t)?t:[t];return this.store.set("vertices",n.map((function(t){return jd.toJSON(t)})),e),this},o.prototype.insertVertex=function(t,e,n){void 0===n&&(n={});var r=this.getVertices(),i=r.length,o=null!=e&&Number.isFinite(e)?e:i;return o<0&&(o=i+o+1),r.splice(o,0,jd.toJSON(t)),this.setVertices(r,n)},o.prototype.appendVertex=function(t,e){return void 0===e&&(e={}),this.insertVertex(t,-1,e)},o.prototype.getVertexAt=function(t){return null!=t&&Number.isFinite(t)?this.getVertices()[t]:null},o.prototype.setVertexAt=function(t,e,n){if(void 0===n&&(n={}),null!=t&&Number.isFinite(t)){var r=this.getVertices();r[t]=e,this.setVertices(r,n)}return this},o.prototype.removeVertexAt=function(t,e){void 0===e&&(e={});var n=this.getVertices(),r=null!=t&&Number.isFinite(t)?t:-1;return n.splice(r,1),this.setVertices(n,e)},o.prototype.onVertexsChanged=function(t){var e=t.previous,n=t.current,r=e&&n?n.filter((function(t){return e.find((function(e){return jd.equals(t,e)}))?null:t})):n?s([],n,!0):[],i=e&&n?e.filter((function(t){return n.find((function(e){return jd.equals(t,e)}))?null:t})):e?s([],e,!0):[];r.length>0&&this.notify("vertexs:added",{added:r,cell:this,edge:this}),i.length>0&&this.notify("vertexs:removed",{removed:i,cell:this,edge:this})},o.prototype.getDefaultMarkup=function(){return this.store.get("defaultMarkup")||t.Markup.getEdgeMarkup()},o.prototype.getMarkup=function(){return e.prototype.getMarkup.call(this)||this.getDefaultMarkup()},o.prototype.translate=function(t,e,n){return void 0===n&&(n={}),n.translateBy=n.translateBy||this.id,n.tx=t,n.ty=e,this.applyToPoints((function(n){return{x:(n.x||0)+t,y:(n.y||0)+e}}),n)},o.prototype.scale=function(t,e,n,r){return void 0===r&&(r={}),this.applyToPoints((function(r){return jd.create(r).scale(t,e,n).toJSON()}),r)},o.prototype.applyToPoints=function(t,e){void 0===e&&(e={});var n={},r=this.getSource(),i=this.getTarget();jd.isPointLike(r)&&(n.source=t(r)),jd.isPointLike(i)&&(n.target=t(i));var o=this.getVertices();return o.length>0&&(n.vertices=o.map(t)),this.store.set(n,e),this},o.prototype.getBBox=function(){return this.getPolyline().bbox()},o.prototype.getConnectionPoint=function(){return this.getPolyline().pointAt(.5)},o.prototype.getPolyline=function(){var t=s(s([this.getSourcePoint()],this.getVertices().map((function(t){return jd.create(t)})),!0),[this.getTargetPoint()],!1);return new Hd(t)},o.prototype.updateParent=function(e){var n=null,r=this.getSourceCell(),i=this.getTargetCell(),o=this.getParent();return r&&i&&(n=r===i||r.isDescendantOf(i)?i:i.isDescendantOf(r)?r:t.Cell.getCommonAncestor(r,i)),!o||n&&n.id===o.id||o.unembed(this,e),n&&n.embed(this,e),n},o.prototype.hasLoop=function(t){void 0===t&&(t={});var e=this.getSource(),n=this.getTarget(),r=e.cell,i=n.cell;if(!r||!i)return!1;var o=r===i;if(!o&&t.deep&&this._model){var s=this.getSourceCell(),a=this.getTargetCell();s&&a&&(o=s.isAncestorOf(a,t)||a.isAncestorOf(s,t))}return o},o.prototype.getFragmentAncestor=function(){var t=[this,this.getSourceNode(),this.getTargetNode()].filter((function(t){return null!=t}));return this.getCommonAncestor.apply(this,t)},o.prototype.isFragmentDescendantOf=function(t){var e=this.getFragmentAncestor();return!!e&&(e.id===t.id||e.isDescendantOf(t))},o.defaults={},o}(t.Cell),function(t){t.equalTerminals=function(t,e){var n=t,r=e;return n.cell===r.cell&&(n.port===r.port||null==n.port&&null==r.port)}}(t.Edge||(t.Edge={})),function(t){t.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}},t.parseStringLabel=function(t){return{attrs:{label:{text:t}}}}}(t.Edge||(t.Edge={})),function(t){t.toStringTag="X6.".concat(t.name),t.isEdge=function(e){if(null==e)return!1;if(e instanceof t)return!0;var n=e[Symbol.toStringTag],r=e;return(null==n||n===t.toStringTag)&&"function"==typeof r.isNode&&"function"==typeof r.isEdge&&"function"==typeof r.prop&&"function"==typeof r.attr&&"function"==typeof r.disconnect&&"function"==typeof r.getSource&&"function"==typeof r.getTarget}}(t.Edge||(t.Edge={})),function(t){t.registry=sg.create({type:"edge",process:function(e,n){if(Hm.exist(e,!1))throw new Error("Edge with name '".concat(e,"' was registered by anthor Node"));if("function"==typeof n)return n.config({shape:e}),n;var r=t,o=n.inherit,s=void 0===o?"edge":o,a=i(n,["inherit"]);if("string"==typeof s){var l=this.get(s||"edge");null==l&&s?this.onNotFound(s,"inherited"):r=l}else r=s;null==a.constructorName&&(a.constructorName=e);var u=r.define.call(r,a);return u.config({shape:e}),u}}),Hm.setEdgeRegistry(t.registry)}(t.Edge||(t.Edge={})),function(t){var e=0;t.define=function(n){var r,o=n.constructorName,s=n.overwrite,a=i(n,["constructorName","overwrite"]),l=bh((r=o||a.shape)?Oh(r):"CustomEdge".concat(e+=1),this);return l.config(a),a.shape&&t.registry.register(a.shape,l,s),l},t.create=function(e){var n=e.shape||"edge",r=t.registry.get(n);return r?new r(e):t.registry.onNotFound(n)}}(t.Edge||(t.Edge={})),function(t){var e="basic.edge";t.config({shape:e,propHooks:function(e){var n=e.label,r=e.vertices,o=i(e,["label","vertices"]);if(n){null==o.labels&&(o.labels=[]);var s="string"==typeof n?t.parseStringLabel(n):n;o.labels.push(s)}return r&&Array.isArray(r)&&(o.vertices=r.map((function(t){return jd.create(t).toJSON()}))),o}}),t.registry.register(e,t)}(t.Edge||(t.Edge={}));var Zm,Km=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;return r.length=0,r.comparator=n.comparator||"zIndex",r.clean(),e&&r.reset(e,{silent:!0}),r}return n(e,t),e.prototype.toJSON=function(){return this.cells.map((function(t){return t.toJSON()}))},e.prototype.add=function(t,e,n){var i,o,a,l=this;"number"==typeof e?(o=e,a=r({merge:!1},n)):(o=this.length,a=r({merge:!1},e)),o>this.length&&(o=this.length),o<0&&(o+=this.length+1);var u=Array.isArray(t)?t:[t],c=this.comparator&&"number"!=typeof e&&!1!==a.sort,h=this.comparator||null,p=!1,f=[],d=[];return u.forEach((function(t){var e=l.get(t);e?a.merge&&!t.isSameStore(e)&&(e.setProp(t.getProp(),n),d.push(e),c&&!p&&(p=null==h||"function"==typeof h?e.hasChanged():"string"==typeof h?e.hasChanged(h):h.some((function(t){return e.hasChanged(t)})))):(f.push(t),l.reference(t))})),f.length&&(c&&(p=!0),(i=this.cells).splice.apply(i,s([o,0],f,!1)),this.length=this.cells.length),p&&this.sort({silent:!0}),a.silent||(f.forEach((function(t,e){var n={cell:t,index:o+e,options:a};l.trigger("added",n),a.dryrun||t.notify("added",r({},n))})),p&&this.trigger("sorted"),(f.length||d.length)&&this.trigger("updated",{added:f,merged:d,removed:[],options:a})),this},e.prototype.remove=function(t,e){void 0===e&&(e={});var n=Array.isArray(t)?t:[t],r=this.removeCells(n,e);return!e.silent&&r.length>0&&this.trigger("updated",{options:e,removed:r,added:[],merged:[]}),Array.isArray(t)?r:r[0]},e.prototype.removeCells=function(t,e){for(var n=[],r=0;r<t.length;r+=1){var i=this.get(t[r]);if(null!=i){var o=this.cells.indexOf(i);this.cells.splice(o,1),this.length-=1,delete this.map[i.id],n.push(i),this.unreference(i),e.dryrun||i.remove(),e.silent||(this.trigger("removed",{cell:i,index:o,options:e}),e.dryrun||i.notify("removed",{cell:i,index:o,options:e}))}}return n},e.prototype.reset=function(t,e){var n=this;void 0===e&&(e={});var i=this.cells.slice();if(i.forEach((function(t){return n.unreference(t)})),this.clean(),this.add(t,r({silent:!0},e)),!e.silent){var o=this.cells.slice();this.trigger("reseted",{options:e,previous:i,current:o});var s=[],a=[];o.forEach((function(t){i.some((function(e){return e.id===t.id}))||s.push(t)})),i.forEach((function(t){o.some((function(e){return e.id===t.id}))||a.push(t)})),this.trigger("updated",{options:e,added:s,removed:a,merged:[]})}return this},e.prototype.push=function(t,e){return this.add(t,this.length,e)},e.prototype.pop=function(t){var e=this.at(this.length-1);return this.remove(e,t)},e.prototype.unshift=function(t,e){return this.add(t,0,e)},e.prototype.shift=function(t){var e=this.at(0);return this.remove(e,t)},e.prototype.get=function(t){if(null==t)return null;var e="string"==typeof t||"number"==typeof t?t:t.id;return this.map[e]||null},e.prototype.has=function(t){return null!=this.get(t)},e.prototype.at=function(t){return t<0&&(t+=this.length),this.cells[t]||null},e.prototype.first=function(){return this.at(0)},e.prototype.last=function(){return this.at(-1)},e.prototype.indexOf=function(t){return this.cells.indexOf(t)},e.prototype.toArray=function(){return this.cells.slice()},e.prototype.sort=function(t){return void 0===t&&(t={}),null!=this.comparator&&(this.cells=Ou(this.cells,this.comparator),t.silent||this.trigger("sorted")),this},e.prototype.clone=function(){return new(0,this.constructor)(this.cells.slice(),{comparator:this.comparator})},e.prototype.reference=function(t){this.map[t.id]=t,t.on("*",this.notifyCellEvent,this)},e.prototype.unreference=function(t){t.off("*",this.notifyCellEvent,this),delete this.map[t.id]},e.prototype.notifyCellEvent=function(t,e){var n=e.cell;this.trigger("cell:".concat(t),e),n&&(n.isNode()?this.trigger("node:".concat(t),r(r({},e),{node:n})):n.isEdge()&&this.trigger("edge:".concat(t),r(r({},e),{edge:n})))},e.prototype.clean=function(){this.length=0,this.cells=[],this.map={}},e}(Mh);t.Model=function(e){function i(t){void 0===t&&(t=[]);var n=e.call(this)||this;return n.batches={},n.addings=new WeakMap,n.nodes={},n.edges={},n.outgoings={},n.incomings={},n.collection=new Km(t),n.setup(),n}return n(i,e),Object.defineProperty(i.prototype,Symbol.toStringTag,{get:function(){return i.toStringTag},enumerable:!1,configurable:!0}),i.prototype.notify=function(t,e){this.trigger(t,e);var n=this.graph;return n&&("sorted"===t||"reseted"===t||"updated"===t?n.trigger("model:".concat(t),e):n.trigger(t,e)),this},i.prototype.setup=function(){var t=this,e=this.collection;e.on("sorted",(function(){return t.notify("sorted",null)})),e.on("updated",(function(e){return t.notify("updated",e)})),e.on("cell:change:zIndex",(function(){return t.sortOnChangeZ()})),e.on("added",(function(e){var n=e.cell;t.onCellAdded(n)})),e.on("removed",(function(e){var n=e.cell;t.onCellRemoved(n,e.options),t.notify("cell:removed",e),n.isNode()?t.notify("node:removed",r(r({},e),{node:n})):n.isEdge()&&t.notify("edge:removed",r(r({},e),{edge:n}))})),e.on("reseted",(function(e){t.onReset(e.current),t.notify("reseted",e)})),e.on("edge:change:source",(function(e){var n=e.edge;return t.onEdgeTerminalChanged(n,"source")})),e.on("edge:change:target",(function(e){var n=e.edge;t.onEdgeTerminalChanged(n,"target")}))},i.prototype.sortOnChangeZ=function(){this.collection.sort()},i.prototype.onCellAdded=function(t){var e=t.id;t.isEdge()?(t.updateParent(),this.edges[e]=!0,this.onEdgeTerminalChanged(t,"source"),this.onEdgeTerminalChanged(t,"target")):this.nodes[e]=!0},i.prototype.onCellRemoved=function(t,e){var n=t.id;if(t.isEdge()){delete this.edges[n];var r,i,o=t.getSource(),s=t.getTarget();if(o&&o.cell)(i=(r=this.outgoings[o.cell])?r.indexOf(n):-1)>=0&&(r.splice(i,1),0===r.length&&delete this.outgoings[o.cell]);if(s&&s.cell)(i=(r=this.incomings[s.cell])?r.indexOf(n):-1)>=0&&(r.splice(i,1),0===r.length&&delete this.incomings[s.cell])}else delete this.nodes[n];e.clear||(e.disconnectEdges?this.disconnectConnectedEdges(t,e):this.removeConnectedEdges(t,e)),t.model===this&&(t.model=null)},i.prototype.onReset=function(t){var e=this;this.nodes={},this.edges={},this.outgoings={},this.incomings={},t.forEach((function(t){return e.onCellAdded(t)}))},i.prototype.onEdgeTerminalChanged=function(e,n){var r="source"===n?this.outgoings:this.incomings,i=e.previous(n);if(i&&i.cell){var o=t.Cell.isCell(i.cell)?i.cell.id:i.cell;(l=(a=r[o])?a.indexOf(e.id):-1)>=0&&(a.splice(l,1),0===a.length&&delete r[o])}var s=e.getTerminal(n);if(s&&s.cell){var a,l,u=t.Cell.isCell(s.cell)?s.cell.id:s.cell;-1===(l=(a=r[u]||[]).indexOf(e.id))&&a.push(e.id),r[u]=a}},i.prototype.prepareCell=function(t,e){return t.model||e&&e.dryrun||(t.model=this),null==t.zIndex&&t.setZIndex(this.getMaxZIndex()+1,{silent:!0}),t},i.prototype.resetCells=function(t,e){var n=this;return void 0===e&&(e={}),t.map((function(t){return n.prepareCell(t,r(r({},e),{dryrun:!0}))})),this.collection.reset(t,e),t.map((function(t){return n.prepareCell(t,{options:e})})),this},i.prototype.clear=function(t){void 0===t&&(t={});var e=this.getCells();if(0===e.length)return this;var n=r(r({},t),{clear:!0});return this.batchUpdate("clear",(function(){for(var t=e.sort((function(t,e){return(t.isEdge()?1:2)-(e.isEdge()?1:2)}));t.length>0;){var r=t.shift();r&&r.remove(n)}}),n),this},i.prototype.addNode=function(e,n){void 0===n&&(n={});var r=t.Node.isNode(e)?e:this.createNode(e);return this.addCell(r,n),r},i.prototype.createNode=function(e){return t.Node.create(e)},i.prototype.addEdge=function(e,n){void 0===n&&(n={});var r=t.Edge.isEdge(e)?e:this.createEdge(e);return this.addCell(r,n),r},i.prototype.createEdge=function(e){return t.Edge.create(e)},i.prototype.addCell=function(t,e){var n=this;return void 0===e&&(e={}),Array.isArray(t)?this.addCells(t,e):(this.collection.has(t)||this.addings.has(t)||(this.addings.set(t,!0),this.collection.add(this.prepareCell(t,e),e),t.eachChild((function(t){return n.addCell(t,e)})),this.addings.delete(t)),this)},i.prototype.addCells=function(t,e){var n=this;void 0===e&&(e={});var i=t.length;if(0===i)return this;var o=r(r({},e),{position:i-1,maxPosition:i-1});return this.startBatch("add",r(r({},o),{cells:t})),t.forEach((function(t){n.addCell(t,o),o.position-=1})),this.stopBatch("add",r(r({},o),{cells:t})),this},i.prototype.removeCell=function(t,e){void 0===e&&(e={});var n="string"==typeof t?this.getCell(t):t;return n&&this.has(n)?this.collection.remove(n,e):null},i.prototype.updateCellId=function(t,e){this.startBatch("update",{id:e}),t.prop("id",e);var n=t.clone({keepId:!0});return this.addCell(n),this.getConnectedEdges(t).forEach((function(n){var i=n.getSourceCell(),o=n.getTargetCell();i===t&&n.setSource(r(r({},n.getSource()),{cell:e})),o===t&&n.setTarget(r(r({},n.getTarget()),{cell:e}))})),this.removeCell(t),this.stopBatch("update",{id:e}),n},i.prototype.removeCells=function(t,e){var n=this;return void 0===e&&(e={}),t.length?this.batchUpdate("remove",(function(){return t.map((function(t){return n.removeCell(t,e)}))})):[]},i.prototype.removeConnectedEdges=function(t,e){void 0===e&&(e={});var n=this.getConnectedEdges(t);return n.forEach((function(t){t.remove(e)})),n},i.prototype.disconnectConnectedEdges=function(t,e){void 0===e&&(e={});var n="string"==typeof t?t:t.id;this.getConnectedEdges(t).forEach((function(t){var r=t.getSourceCellId(),i=t.getTargetCellId();r===n&&t.setSource({x:0,y:0},e),i===n&&t.setTarget({x:0,y:0},e)}))},i.prototype.has=function(t){return this.collection.has(t)},i.prototype.total=function(){return this.collection.length},i.prototype.indexOf=function(t){return this.collection.indexOf(t)},i.prototype.getCell=function(t){return this.collection.get(t)},i.prototype.getCells=function(){return this.collection.toArray()},i.prototype.getFirstCell=function(){return this.collection.first()},i.prototype.getLastCell=function(){return this.collection.last()},i.prototype.getMinZIndex=function(){var t=this.collection.first();return t&&t.getZIndex()||0},i.prototype.getMaxZIndex=function(){var t=this.collection.last();return t&&t.getZIndex()||0},i.prototype.getCellsFromCache=function(t){var e=this;return t?Object.keys(t).map((function(t){return e.getCell(t)})).filter((function(t){return null!=t})):[]},i.prototype.getNodes=function(){return this.getCellsFromCache(this.nodes)},i.prototype.getEdges=function(){return this.getCellsFromCache(this.edges)},i.prototype.getOutgoingEdges=function(t){var e=this,n="string"==typeof t?t:t.id,r=this.outgoings[n];return r?r.map((function(t){return e.getCell(t)})).filter((function(t){return t&&t.isEdge()})):null},i.prototype.getIncomingEdges=function(t){var e=this,n="string"==typeof t?t:t.id,r=this.incomings[n];return r?r.map((function(t){return e.getCell(t)})).filter((function(t){return t&&t.isEdge()})):null},i.prototype.getConnectedEdges=function(t,e){var n=this;void 0===e&&(e={});var r=[],i="string"==typeof t?this.getCell(t):t;if(null==i)return r;var o={},s=e.indirect,a=e.incoming,l=e.outgoing;null==a&&null==l&&(a=l=!0);var u=function(t,e){var i=e?n.getOutgoingEdges(t):n.getIncomingEdges(t);if(null!=i&&i.forEach((function(t){o[t.id]||(r.push(t),o[t.id]=!0,s&&(a&&u(t,!1),l&&u(t,!0)))})),s&&t.isEdge()){var c=e?t.getTargetCell():t.getSourceCell();c&&c.isEdge()&&(o[c.id]||(r.push(c),u(c,e)))}};if(l&&u(i,!0),a&&u(i,!1),e.deep){var c=i.getDescendants({deep:!0}),h={};c.forEach((function(t){t.isNode()&&(h[t.id]=!0)}));var p=function(t,i){var s=i?n.getOutgoingEdges(t.id):n.getIncomingEdges(t.id);null!=s&&s.forEach((function(t){if(!o[t.id]){var n=t.getSourceCell(),i=t.getTargetCell();if(!e.enclosed&&n&&h[n.id]&&i&&h[i.id])return;r.push(t),o[t.id]=!0}}))};c.forEach((function(t){t.isEdge()||(l&&p(t,!0),a&&p(t,!1))}))}return r},i.prototype.isBoundary=function(t,e){var n="string"==typeof t?this.getCell(t):t,r=e?this.getIncomingEdges(n):this.getOutgoingEdges(n);return null==r||0===r.length},i.prototype.getBoundaryNodes=function(t){var e=this,n=[];return Object.keys(this.nodes).forEach((function(r){if(e.isBoundary(r,t)){var i=e.getCell(r);i&&n.push(i)}})),n},i.prototype.getRoots=function(){return this.getBoundaryNodes(!0)},i.prototype.getLeafs=function(){return this.getBoundaryNodes(!1)},i.prototype.isRoot=function(t){return this.isBoundary(t,!0)},i.prototype.isLeaf=function(t){return this.isBoundary(t,!1)},i.prototype.getNeighbors=function(t,e){void 0===e&&(e={});var n=e.incoming,r=e.outgoing;null==n&&null==r&&(n=r=!0);var i=this.getConnectedEdges(t,e).reduce((function(i,o){var s=o.hasLoop(e),a=o.getSourceCell(),l=o.getTargetCell();return n&&a&&a.isNode()&&!i[a.id]&&(!s&&(a===t||e.deep&&a.isDescendantOf(t))||(i[a.id]=a)),r&&l&&l.isNode()&&!i[l.id]&&(!s&&(l===t||e.deep&&l.isDescendantOf(t))||(i[l.id]=l)),i}),{});if(t.isEdge()){if(n){var o=t.getSourceCell();o&&o.isNode()&&!i[o.id]&&(i[o.id]=o)}if(r){var s=t.getTargetCell();s&&s.isNode()&&!i[s.id]&&(i[s.id]=s)}}return Object.keys(i).map((function(t){return i[t]}))},i.prototype.isNeighbor=function(t,e,n){void 0===n&&(n={});var r=n.incoming,i=n.outgoing;return null==r&&null==i&&(r=i=!0),this.getConnectedEdges(t,n).some((function(t){var n=t.getSourceCell(),o=t.getTargetCell();return!(!r||!n||n.id!==e.id)||!(!i||!o||o.id!==e.id)}))},i.prototype.getSuccessors=function(t,e){var n=this;void 0===e&&(e={});var i=[];return this.search(t,(function(r,o){r!==t&&n.matchDistance(o,e.distance)&&i.push(r)}),r(r({},e),{outgoing:!0})),i},i.prototype.isSuccessor=function(t,e,n){var i=this;void 0===n&&(n={});var o=!1;return this.search(t,(function(r,s){if(r===e&&r!==t&&i.matchDistance(s,n.distance))return o=!0,!1}),r(r({},n),{outgoing:!0})),o},i.prototype.getPredecessors=function(t,e){var n=this;void 0===e&&(e={});var i=[];return this.search(t,(function(r,o){r!==t&&n.matchDistance(o,e.distance)&&i.push(r)}),r(r({},e),{incoming:!0})),i},i.prototype.isPredecessor=function(t,e,n){var i=this;void 0===n&&(n={});var o=!1;return this.search(t,(function(r,s){if(r===e&&r!==t&&i.matchDistance(s,n.distance))return o=!0,!1}),r(r({},n),{incoming:!0})),o},i.prototype.matchDistance=function(t,e){return null==e||("function"==typeof e?e(t):!(!Array.isArray(e)||!e.includes(t))||t===e)},i.prototype.getCommonAncestor=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=[];return e.forEach((function(t){t&&(Array.isArray(t)?r.push.apply(r,t):r.push(t))})),t.Cell.getCommonAncestor.apply(t.Cell,r)},i.prototype.getSubGraph=function(t,e){var n=this;void 0===e&&(e={});var r=[],i={},o=[],s=[],a=function(t){i[t.id]||(r.push(t),i[t.id]=t,t.isEdge()&&s.push(t),t.isNode()&&o.push(t))};return t.forEach((function(t){(a(t),e.deep)&&t.getDescendants({deep:!0}).forEach((function(t){return a(t)}))})),s.forEach((function(t){var e=t.getSourceCell(),n=t.getTargetCell();e&&!i[e.id]&&(r.push(e),i[e.id]=e,e.isNode()&&o.push(e)),n&&!i[n.id]&&(r.push(n),i[n.id]=n,n.isNode()&&o.push(n))})),o.forEach((function(t){n.getConnectedEdges(t,e).forEach((function(t){var e=t.getSourceCell(),n=t.getTargetCell();!i[t.id]&&e&&i[e.id]&&n&&i[n.id]&&(r.push(t),i[t.id]=t)}))})),r},i.prototype.cloneSubGraph=function(t,e){void 0===e&&(e={});var n=this.getSubGraph(t,e);return this.cloneCells(n)},i.prototype.cloneCells=function(e){return t.Cell.cloneCells(e)},i.prototype.getNodesFromPoint=function(t,e){var n="number"==typeof t?{x:t,y:e||0}:t;return this.getNodes().filter((function(t){return t.getBBox().containsPoint(n)}))},i.prototype.getNodesInArea=function(t,e,n,r,i){var o="number"==typeof t?new Vd(t,e,n,r):Vd.create(t),s="number"==typeof t?i:e,a=s&&s.strict;return this.getNodes().filter((function(t){var e=t.getBBox();return a?o.containsRect(e):o.isIntersectWithRect(e)}))},i.prototype.getEdgesInArea=function(t,e,n,r,i){var o="number"==typeof t?new Vd(t,e,n,r):Vd.create(t),s="number"==typeof t?i:e,a=s&&s.strict;return this.getEdges().filter((function(t){var e=t.getBBox();return 0===e.width?e.inflate(1,0):0===e.height&&e.inflate(0,1),a?o.containsRect(e):o.isIntersectWithRect(e)}))},i.prototype.getNodesUnderNode=function(t,e){void 0===e&&(e={});var n=t.getBBox();return(null==e.by||"bbox"===e.by?this.getNodesInArea(n):this.getNodesFromPoint(n[e.by])).filter((function(e){return t.id!==e.id&&!e.isDescendantOf(t)}))},i.prototype.getAllCellsBBox=function(){return this.getCellsBBox(this.getCells())},i.prototype.getCellsBBox=function(e,n){return void 0===n&&(n={}),t.Cell.getCellsBBox(e,n)},i.prototype.search=function(t,e,n){void 0===n&&(n={}),n.breadthFirst?this.breadthFirstSearch(t,e,n):this.depthFirstSearch(t,e,n)},i.prototype.breadthFirstSearch=function(t,e,n){void 0===n&&(n={});var r=[],i={},o={};r.push(t),o[t.id]=0;for(var s=function(){var t=r.shift();return null==t||i[t.id]?"continue":(i[t.id]=!0,!1===lh(e,a,t,o[t.id])?"continue":void a.getNeighbors(t,n).forEach((function(e){o[e.id]=o[t.id]+1,r.push(e)})))},a=this;r.length>0;)s()},i.prototype.depthFirstSearch=function(t,e,n){void 0===n&&(n={});var r=[],i={},o={};r.push(t),o[t.id]=0;for(var s=function(){var t=r.pop();if(null==t||i[t.id])return"continue";if(i[t.id]=!0,!1===lh(e,a,t,o[t.id]))return"continue";var s=a.getNeighbors(t,n),l=r.length;s.forEach((function(e){o[e.id]=o[t.id]+1,r.splice(l,0,e)}))},a=this;r.length>0;)s()},i.prototype.getShortestPath=function(e,n,r){void 0===r&&(r={});var i={};this.getEdges().forEach((function(t){var e=t.getSourceCellId(),n=t.getTargetCellId();e&&n&&(i[e]||(i[e]=[]),i[n]||(i[n]=[]),i[e].push(n),r.directed||i[n].push(e))}));var o="string"==typeof e?e:e.id,s=t.Dijkstra.run(i,o,r.weight),a=[],l="string"==typeof n?n:n.id;for(s[l]&&a.push(l);l=s[l];)a.unshift(l);return a},i.prototype.translate=function(t,e,n){return this.getCells().filter((function(t){return!t.hasParent()})).forEach((function(r){return r.translate(t,e,n)})),this},i.prototype.resize=function(t,e,n){return this.resizeCells(t,e,this.getCells(),n)},i.prototype.resizeCells=function(t,e,n,r){void 0===r&&(r={});var i=this.getCellsBBox(n);if(i){var o=Math.max(t/i.width,0),s=Math.max(e/i.height,0),a=i.getOrigin();n.forEach((function(t){return t.scale(o,s,a,r)}))}return this},i.prototype.toJSON=function(t){return void 0===t&&(t={}),i.toJSON(this.getCells(),t)},i.prototype.parseJSON=function(t){return i.fromJSON(t)},i.prototype.fromJSON=function(t,e){void 0===e&&(e={});var n=this.parseJSON(t);return this.resetCells(n,e),this},i.prototype.startBatch=function(t,e){return void 0===e&&(e={}),this.batches[t]=(this.batches[t]||0)+1,this.notify("batch:start",{name:t,data:e}),this},i.prototype.stopBatch=function(t,e){return void 0===e&&(e={}),this.batches[t]=(this.batches[t]||0)-1,this.notify("batch:stop",{name:t,data:e}),this},i.prototype.batchUpdate=function(t,e,n){void 0===n&&(n={}),this.startBatch(t,n);var r=e();return this.stopBatch(t,n),r},i.prototype.hasActiveBatch=function(t){var e=this;return void 0===t&&(t=Object.keys(this.batches)),(Array.isArray(t)?t:[t]).some((function(t){return e.batches[t]>0}))},i}(Mh),(Zm=t.Model||(t.Model={})).toStringTag="X6.".concat(Zm.name),Zm.isModel=function(t){if(null==t)return!1;if(t instanceof Zm)return!0;var e=t[Symbol.toStringTag],n=t;return(null==e||e===Zm.toStringTag)&&"function"==typeof n.addNode&&"function"==typeof n.addEdge&&null!=n.collection},function(e){e.toJSON=function(t,e){return void 0===e&&(e={}),{cells:t.map((function(t){return t.toJSON(e)}))}},e.fromJSON=function(e){var n=[];return Array.isArray(e)?n.push.apply(n,e):(e.cells&&n.push.apply(n,e.cells),e.nodes&&e.nodes.forEach((function(t){null==t.shape&&(t.shape="rect"),n.push(t)})),e.edges&&e.edges.forEach((function(t){null==t.shape&&(t.shape="edge"),n.push(t)}))),n.map((function(e){var n=e.shape;if(n){if(t.Node.registry.exist(n))return t.Node.create(e);if(t.Edge.registry.exist(n))return t.Edge.create(e)}throw new Error("The `shape` should be specified when creating a node/edge instance")}))}}(t.Model||(t.Model={}));var Qm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return this.getLabel()},set:function(t){this.setLabel(t)},enumerable:!1,configurable:!0}),e.prototype.getLabel=function(){return this.getAttrByPath("text/text")},e.prototype.setLabel=function(t,e){return null==t?this.removeLabel():this.setAttrByPath("text/text",t,e),this},e.prototype.removeLabel=function(){return this.removeAttrByPath("text/text"),this},e}(t.Node);function tb(t,e){return void 0===e&&(e="body"),[{tagName:t,selector:e},{tagName:"text",selector:"label"}]}function eb(t,e,n){var i;void 0===n&&(n={});var o={constructorName:t,markup:tb(t,n.selector),attrs:(i={},i[t]=r({},Qm.bodyAttr),i)};return(n.parent||Qm).define(tl(o,e,{shape:t}))}!function(t){t.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},t.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},t.config({attrs:{text:r({},t.labelAttr)},propHooks:function(t){var e=t.label,n=i(t,["label"]);return e&&Ah(n,"attrs/text/text",e),n},visible:!0})}(Qm||(Qm={}));var nb=eb("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}}),rb=t.Edge.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}}),ib=eb("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}}),ob=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,"points",{get:function(){return this.getPoints()},set:function(t){this.setPoints(t)},enumerable:!1,configurable:!0}),e.prototype.getPoints=function(){return this.getAttrByPath("body/refPoints")},e.prototype.setPoints=function(t,n){return null==t?this.removePoints():this.setAttrByPath("body/refPoints",e.pointsToString(t),n),this},e.prototype.removePoints=function(){return this.removeAttrByPath("body/refPoints"),this},e}(Qm);!function(t){function e(t){return"string"==typeof t?t:t.map((function(t){return Array.isArray(t)?t.join(","):jd.isPointLike(t)?"".concat(t.x,", ").concat(t.y):""})).join(" ")}t.pointsToString=e,t.config({propHooks:function(t){var n=t.points,r=i(t,["points"]);if(n){var o=e(n);o&&Ah(r,"attrs/body/refPoints",o)}return r}})}(ob||(ob={}));var sb,ab,lb,ub,cb,hb=eb("polygon",{},{parent:ob}),pb=eb("polyline",{},{parent:ob}),fb=Qm.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks:function(t){var e=t.path,n=i(t,["path"]);return e&&Ah(n,"attrs/body/refD",e),n}}),db=Qm.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},t.Platform.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:wp.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:r(r({},Qm.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks:function(t){var e=t.text,n=i(t,["text"]);return e&&Ah(n,"attrs/label/text",e),n},attrHooks:{text:{set:function(t,e){var n=e.cell,i=e.view,o=e.refBBox,s=e.elem,a=e.attrs;if(!(s instanceof HTMLElement)){var l=a.style||{},u={text:t,width:-5,height:"100%"},c=r({textVerticalAnchor:"middle"},l);return lh(Iy.presets.textWrap.set,this,u,{cell:n,view:i,elem:s,refBBox:o,attrs:c}),{fill:l.color||null}}s.textContent=t},position:function(t,e){var n=e.refBBox;if(e.elem instanceof SVGElement)return n.getCenter()}}}}),gb=eb("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:(void 0===sb&&(sb="xlink:href"),function(t){var e=t.imageUrl,n=t.imageWidth,r=t.imageHeight,o=i(t,["imageUrl","imageWidth","imageHeight"]);if(null!=e||null!=n||null!=r){var s=function(){if(o.attrs){var t=o.attrs.image;null!=e&&(t[sb]=e),null!=n&&(t.width=n),null!=r&&(t.height=r),o.attrs.image=t}};o.attrs?(null==o.attrs.image&&(o.attrs.image={}),s()):(o.attrs={image:{}},s())}return o})},{selector:"image"}),yb=eb("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}});t.NodeView=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.portsCache={},t}return n(i,e),Object.defineProperty(i.prototype,Symbol.toStringTag,{get:function(){return i.toStringTag},enumerable:!1,configurable:!0}),i.prototype.getContainerClassName=function(){var t=[e.prototype.getContainerClassName.call(this),this.prefixClassName("node")];return this.can("nodeMovable")||t.push(this.prefixClassName("node-immovable")),t.join(" ")},i.prototype.updateClassName=function(t){var e=t.target;if(e.hasAttribute("magnet")){var n=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?dp(e,n):fp(e,n)}else{n=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(n):this.addClass(n)}},i.prototype.isNodeView=function(){return!0},i.prototype.confirmUpdate=function(t){var e=this,n=t;return this.hasAction(n,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(n,"render")?(this.render(),n=this.removeAction(n,["render","update","resize","translate","rotate","ports","tools"])):(n=this.handleAction(n,"resize",(function(){return e.resize()}),"update"),n=this.handleAction(n,"update",(function(){return e.update()}),Vy.useCSSSelector?"ports":null),n=this.handleAction(n,"translate",(function(){return e.translate()})),n=this.handleAction(n,"rotate",(function(){return e.rotate()})),n=this.handleAction(n,"ports",(function(){return e.renderPorts()})),n=this.handleAction(n,"tools",(function(){return e.renderTools()}))),n},i.prototype.update=function(t){this.cleanCache(),Vy.useCSSSelector&&this.removePorts();var e=this.cell,n=e.getSize(),r=e.getAttrs();this.updateAttrs(this.container,r,{attrs:t===r?null:t,rootBBox:new Vd(0,0,n.width,n.height),selectors:this.selectors}),Vy.useCSSSelector&&this.renderPorts()},i.prototype.renderMarkup=function(){var t=this.cell.markup;if(t){if("string"==typeof t)throw new TypeError("Not support string markup.");return this.renderJSONMarkup(t)}throw new TypeError("Invalid node markup.")},i.prototype.renderJSONMarkup=function(t){var e=this.parseJSONMarkup(t,this.container);this.selectors=e.selectors,this.container.appendChild(e.fragment)},i.prototype.render=function(){return this.empty(),this.renderMarkup(),this.resize(),this.updateTransform(),Vy.useCSSSelector||this.renderPorts(),this.renderTools(),this},i.prototype.resize=function(){this.cell.getAngle()&&this.rotate(),this.update()},i.prototype.translate=function(){this.updateTransform()},i.prototype.rotate=function(){this.updateTransform()},i.prototype.getTranslationString=function(){var t=this.cell.getPosition();return"translate(".concat(t.x,",").concat(t.y,")")},i.prototype.getRotationString=function(){var t=this.cell.getAngle();if(t){var e=this.cell.getSize();return"rotate(".concat(t,",").concat(e.width/2,",").concat(e.height/2,")")}},i.prototype.updateTransform=function(){var t=this.getTranslationString(),e=this.getRotationString();e&&(t+=" ".concat(e)),this.container.setAttribute("transform",t)},i.prototype.findPortElem=function(t,e){var n=t?this.portsCache[t]:null;if(!n)return null;var r=n.portContentElement,i=n.portContentSelectors||{};return this.findOne(e,r,i)},i.prototype.cleanPortsCache=function(){this.portsCache={}},i.prototype.removePorts=function(){var t=this;Object.keys(this.portsCache).forEach((function(e){Lp(t.portsCache[e].portElement)}))},i.prototype.renderPorts=function(){var t=this,e=this.container,n=[];e.childNodes.forEach((function(t){n.push(t)}));var r=this.cell.getParsedPorts(),i=Js(r,"zIndex"),o="auto";i[o]&&i[o].forEach((function(r){var i=t.getPortElement(r);e.append(i),n.push(i)})),Object.keys(i).forEach((function(e){if(e!==o){var r=parseInt(e,10);t.appendPorts(i[e],r,n)}})),this.updatePorts()},i.prototype.appendPorts=function(t,e,n){var r=this,i=t.map((function(t){return r.getPortElement(t)}));n[e]||e<0?Vp(n[Math.max(e,0)],i):Ip(this.container,i)},i.prototype.getPortElement=function(t){var e=this.portsCache[t.id];return e?e.portElement:this.createPortElement(t)},i.prototype.createPortElement=function(e){var n=t.Markup.renderMarkup(this.cell.getPortContainerMarkup()),i=n.elem;if(null==i)throw new Error("Invalid port container markup.");var o=(n=t.Markup.renderMarkup(this.getPortMarkup(e))).elem,s=n.selectors;if(null==o)throw new Error("Invalid port markup.");this.setAttrs({port:e.id,"port-group":e.group},o);var a="x6-port";e.group&&(a+=" x6-port-".concat(e.group)),fp(i,a),fp(i,"x6-port"),fp(o,"x6-port-body"),i.appendChild(o);var l,u,c=s;if(this.existPortLabel(e)){if(l=(n=t.Markup.renderMarkup(this.getPortLabelMarkup(e.label))).elem,u=n.selectors,null==l)throw new Error("Invalid port label markup.");if(s&&u){for(var h in u)if(s[h]&&h!==this.rootSelector)throw new Error("Selectors within port must be unique.");c=r(r({},s),u)}fp(l,"x6-port-label"),i.appendChild(l)}return this.portsCache[e.id]={portElement:i,portSelectors:c,portLabelElement:l,portLabelSelectors:u,portContentElement:o,portContentSelectors:s},this.graph.options.onPortRendered&&this.graph.options.onPortRendered({port:e,node:this.cell,container:i,selectors:c,labelContainer:l,labelSelectors:u,contentContainer:o,contentSelectors:s}),i},i.prototype.updatePorts=function(){var t=this,e=this.cell.getParsedGroups(),n=Object.keys(e);0===n.length?this.updatePortGroup():n.forEach((function(e){return t.updatePortGroup(e)}))},i.prototype.updatePortGroup=function(t){for(var e=Vd.fromSize(this.cell.getSize()),n=this.cell.getPortsLayoutByGroup(t,e),r=0,i=n.length;r<i;r+=1){var o=n[r],s=o.portId,a=this.portsCache[s]||{},l=o.portLayout;if(this.applyPortTransform(a.portElement,l),null!=o.portAttrs){var u={selectors:a.portSelectors||{}};o.portSize&&(u.rootBBox=Vd.fromSize(o.portSize)),this.updateAttrs(a.portElement,o.portAttrs,u)}var c=o.labelLayout;if(c&&a.portLabelElement&&(this.applyPortTransform(a.portLabelElement,c,-(l.angle||0)),c.attrs)){u={selectors:a.portLabelSelectors||{}};o.labelSize&&(u.rootBBox=Vd.fromSize(o.labelSize)),this.updateAttrs(a.portLabelElement,c.attrs,u)}}},i.prototype.applyPortTransform=function(t,e,n){void 0===n&&(n=0);var r=e.angle,i=e.position;id(t,Jf().rotate(n).translate(i.x||0,i.y||0).rotate(r||0),{absolute:!0})},i.prototype.getPortMarkup=function(t){return t.markup||this.cell.portMarkup},i.prototype.getPortLabelMarkup=function(t){return t.markup||this.cell.portLabelMarkup},i.prototype.existPortLabel=function(t){return t.attrs&&t.attrs.text},i.prototype.getEventArgs=function(t,e,n){var r=this,i=r.cell;return null==e||null==n?{e:t,view:r,node:i,cell:i}:{e:t,x:e,y:n,view:r,node:i,cell:i}},i.prototype.getPortEventArgs=function(t,e,n){var r=this,i=r.cell,o=i;return n?{e:t,x:n.x,y:n.y,view:r,node:i,cell:o,port:e}:{e:t,view:r,node:i,cell:o,port:e}},i.prototype.notifyMouseDown=function(t,n,r){e.prototype.onMouseDown.call(this,t,n,r),this.notify("node:mousedown",this.getEventArgs(t,n,r))},i.prototype.notifyMouseMove=function(t,n,r){e.prototype.onMouseMove.call(this,t,n,r),this.notify("node:mousemove",this.getEventArgs(t,n,r))},i.prototype.notifyMouseUp=function(t,n,r){e.prototype.onMouseUp.call(this,t,n,r),this.notify("node:mouseup",this.getEventArgs(t,n,r))},i.prototype.notifyPortEvent=function(t,e,n){var r=this.findAttr("port",e.target);r&&this.notify(t,this.getPortEventArgs(e,r,n))},i.prototype.onClick=function(t,n,r){e.prototype.onClick.call(this,t,n,r),this.notify("node:click",this.getEventArgs(t,n,r)),this.notifyPortEvent("node:port:click",t,{x:n,y:r})},i.prototype.onDblClick=function(t,n,r){e.prototype.onDblClick.call(this,t,n,r),this.notify("node:dblclick",this.getEventArgs(t,n,r)),this.notifyPortEvent("node:port:dblclick",t,{x:n,y:r})},i.prototype.onContextMenu=function(t,n,r){e.prototype.onContextMenu.call(this,t,n,r),this.notify("node:contextmenu",this.getEventArgs(t,n,r)),this.notifyPortEvent("node:port:contextmenu",t,{x:n,y:r})},i.prototype.onMouseDown=function(t,e,n){this.isPropagationStopped(t)||(this.notifyMouseDown(t,e,n),this.notifyPortEvent("node:port:mousedown",t,{x:e,y:n}),this.startNodeDragging(t,e,n))},i.prototype.onMouseMove=function(t,e,n){var r=this.getEventData(t),i=r.action;if("magnet"===i)this.dragMagnet(t,e,n);else{if("move"===i){var o=r.targetView||this;o.dragNode(t,e,n),o.notify("node:moving",{e:t,x:e,y:n,view:o,cell:o.cell,node:o.cell})}this.notifyMouseMove(t,e,n),this.notifyPortEvent("node:port:mousemove",t,{x:e,y:n})}this.setEventData(t,r)},i.prototype.onMouseUp=function(t,e,n){var r=this.getEventData(t),i=r.action;"magnet"===i?this.stopMagnetDragging(t,e,n):(this.notifyMouseUp(t,e,n),this.notifyPortEvent("node:port:mouseup",t,{x:e,y:n}),"move"===i&&(r.targetView||this).stopNodeDragging(t,e,n));var o=r.targetMagnet;o&&this.onMagnetClick(t,o,e,n),this.checkMouseleave(t)},i.prototype.onMouseOver=function(t){e.prototype.onMouseOver.call(this,t),this.notify("node:mouseover",this.getEventArgs(t)),this.notifyPortEvent("node:port:mouseover",t)},i.prototype.onMouseOut=function(t){e.prototype.onMouseOut.call(this,t),this.notify("node:mouseout",this.getEventArgs(t)),this.notifyPortEvent("node:port:mouseout",t)},i.prototype.onMouseEnter=function(t){this.updateClassName(t),e.prototype.onMouseEnter.call(this,t),this.notify("node:mouseenter",this.getEventArgs(t)),this.notifyPortEvent("node:port:mouseenter",t)},i.prototype.onMouseLeave=function(t){e.prototype.onMouseLeave.call(this,t),this.notify("node:mouseleave",this.getEventArgs(t)),this.notifyPortEvent("node:port:mouseleave",t)},i.prototype.onMouseWheel=function(t,n,i,o){e.prototype.onMouseWheel.call(this,t,n,i,o),this.notify("node:mousewheel",r({delta:o},this.getEventArgs(t,n,i)))},i.prototype.onMagnetClick=function(t,e,n,i){var o=this.graph;o.view.getMouseMovedCount(t)>o.options.clickThreshold||this.notify("node:magnet:click",r({magnet:e},this.getEventArgs(t,n,i)))},i.prototype.onMagnetDblClick=function(t,e,n,i){this.notify("node:magnet:dblclick",r({magnet:e},this.getEventArgs(t,n,i)))},i.prototype.onMagnetContextMenu=function(t,e,n,i){this.notify("node:magnet:contextmenu",r({magnet:e},this.getEventArgs(t,n,i)))},i.prototype.onMagnetMouseDown=function(t,e,n,r){this.startMagnetDragging(t,n,r)},i.prototype.onCustomEvent=function(t,n,i,o){this.notify("node:customevent",r({name:n},this.getEventArgs(t,i,o))),e.prototype.onCustomEvent.call(this,t,n,i,o)},i.prototype.prepareEmbedding=function(t){var e=this.graph,n=this.getEventData(t).cell||this.cell,r=e.findViewByCell(n),i=e.snapToGrid(t.clientX,t.clientY);this.notify("node:embed",{e:t,node:n,view:r,cell:n,x:i.x,y:i.y,currentParent:n.getParent()})},i.prototype.processEmbedding=function(e,n){var r=this,i=n.cell||this.cell,o=n.graph||this.graph,s=o.options.embedding,a=s.findParent,l="function"==typeof a?lh(a,o,{view:this,node:this.cell}).filter((function(e){return t.Cell.isCell(e)&&r.cell.id!==e.id&&!e.isDescendantOf(r.cell)})):o.model.getNodesUnderNode(i,{by:a});if(s.frontOnly&&l.length>0){var u=Js(l,"zIndex"),c=Za(Object.keys(u));c&&(l=u[c])}l=l.filter((function(t){return t.visible}));for(var h=null,p=n.candidateEmbedView,f=s.validate,d=l.length-1;d>=0;d-=1){var g=l[d];if(p&&p.cell.id===g.id){h=p;break}var y=g.findView(o);if(lh(f,o,{child:this.cell,parent:y.cell,childView:this,parentView:y})){h=y;break}}this.clearEmbedding(n),h&&h.highlight(null,{type:"embedding"}),n.candidateEmbedView=h;var v=o.snapToGrid(e.clientX,e.clientY);this.notify("node:embedding",{e:e,cell:i,node:i,view:o.findViewByCell(i),x:v.x,y:v.y,currentParent:i.getParent(),candidateParent:h?h.cell:null})},i.prototype.clearEmbedding=function(t){var e=t.candidateEmbedView;e&&(e.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null)},i.prototype.finalizeEmbedding=function(t,e){this.graph.startBatch("embedding");var n=e.cell||this.cell,r=e.graph||this.graph,i=r.findViewByCell(n),o=n.getParent(),s=e.candidateEmbedView;if(s?(s.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null,null!=o&&o.id===s.cell.id||s.cell.insertChild(n,void 0,{ui:!0})):o&&o.unembed(n,{ui:!0}),r.model.getConnectedEdges(n,{deep:!0}).forEach((function(t){t.updateParent({ui:!0})})),i&&s){var a=r.snapToGrid(t.clientX,t.clientY);i.notify("node:embedded",{e:t,cell:n,x:a.x,y:a.y,node:n,view:r.findViewByCell(n),previousParent:o,currentParent:n.getParent()})}this.graph.stopBatch("embedding")},i.prototype.getDelegatedView=function(){for(var t=this.cell,e=this;e&&!t.isEdge();){if(!t.hasParent()||e.can("stopDelegateOnDragging"))return e;t=t.getParent(),e=this.graph.findViewByCell(t)}return null},i.prototype.validateMagnet=function(t,e,n){if("passive"!==e.getAttribute("magnet")){var r=this.graph.options.connecting.validateMagnet;return!r||lh(r,this.graph,{e:n,magnet:e,view:t,cell:t.cell})}return!1},i.prototype.startMagnetDragging=function(t,e,n){if(this.can("magnetConnectable")){t.stopPropagation();var r=t.currentTarget,i=this.graph;this.setEventData(t,{targetMagnet:r}),this.validateMagnet(this,r,t)?(i.options.magnetThreshold<=0&&this.startConnectting(t,r,e,n),this.setEventData(t,{action:"magnet"}),this.stopPropagation(t)):((pp(r,"x6-port-body")||r.closest(".x6-port-body"))&&this.stopPropagation(t),this.onMouseDown(t,e,n)),i.view.delegateDragEvents(t,this)}},i.prototype.startConnectting=function(t,e,n,r){this.graph.model.startBatch("add-edge");var i=this.createEdgeFromMagnet(e,n,r);i.setEventData(t,i.prepareArrowheadDragging("target",{x:n,y:r,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(t,{edgeView:i}),i.notifyMouseDown(t,n,r)},i.prototype.getDefaultEdge=function(t,e){var n,r=this.graph.options.connecting.createEdge;return r&&(n=lh(r,this.graph,{sourceMagnet:e,sourceView:t,sourceCell:t.cell})),n},i.prototype.createEdgeFromMagnet=function(t,e,n){var i=this.graph,o=i.model,s=this.getDefaultEdge(this,t);return s.setSource(r(r({},s.getSource()),this.getEdgeTerminal(t,e,n,s,"source"))),s.setTarget(r(r({},s.getTarget()),{x:e,y:n})),s.addTo(o,{async:!1,ui:!0}),s.findView(i)},i.prototype.dragMagnet=function(t,e,n){var r=this.getEventData(t),i=r.edgeView;if(i)i.onMouseMove(t,e,n),this.autoScrollGraph(t.clientX,t.clientY);else{var o=this.graph,s=o.options.magnetThreshold,a=this.getEventTarget(t),l=r.targetMagnet;if("onleave"===s){if(l===a||l.contains(a))return}else if(o.view.getMouseMovedCount(t)<=s)return;this.startConnectting(t,l,e,n)}},i.prototype.stopMagnetDragging=function(t,e,n){var r=this.eventData(t).edgeView;r&&(r.onMouseUp(t,e,n),this.graph.model.stopBatch("add-edge"))},i.prototype.notifyUnhandledMouseDown=function(t,e,n){this.notify("node:unhandled:mousedown",{e:t,x:e,y:n,view:this,cell:this.cell,node:this.cell})},i.prototype.notifyNodeMove=function(t,e,n,r,i){var o=this,s=[i],a=this.graph.getPlugin("selection");if(a&&a.isSelectionMovable()){var l=a.getSelectedCells();l.includes(i)&&(s=l.filter((function(t){return t.isNode()})))}s.forEach((function(i){o.notify(t,{e:e,x:n,y:r,cell:i,node:i,view:i.findView(o.graph)})}))},i.prototype.getRestrictArea=function(t){var e=this.graph.options.translating.restrict,n="function"==typeof e?lh(e,this.graph,t):e;return"number"==typeof n?this.graph.transform.getGraphArea().inflate(n):!0===n?this.graph.transform.getGraphArea():n||null},i.prototype.startNodeDragging=function(t,e,n){var r=this.getDelegatedView();if(null==r||!r.can("nodeMovable"))return this.notifyUnhandledMouseDown(t,e,n);this.setEventData(t,{targetView:r,action:"move"});var i=jd.create(r.cell.getPosition());r.setEventData(t,{moving:!1,offset:i.diff(e,n),restrict:this.getRestrictArea(r)})},i.prototype.dragNode=function(e,n,r){var i=this.cell,o=this.graph,s=o.getGridSize(),a=this.getEventData(e),l=a.offset,u=a.restrict;a.moving||(a.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",e,n,r,this.cell)),this.autoScrollGraph(e.clientX,e.clientY);var c=t.GeometryUtil.snapToGrid(n+l.x,s),h=t.GeometryUtil.snapToGrid(r+l.y,s);i.setPosition(c,h,{restrict:u,deep:!0,ui:!0}),o.options.embedding.enabled&&(a.embedding||(this.prepareEmbedding(e),a.embedding=!0),this.processEmbedding(e,a))},i.prototype.stopNodeDragging=function(t,e,n){var r=this.getEventData(t);r.embedding&&this.finalizeEmbedding(t,r),r.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",t,e,n,this.cell)),r.moving=!1,r.embedding=!1},i.prototype.autoScrollGraph=function(t,e){var n=this.graph.getPlugin("scroller");n&&n.autoScroll(t,e)},i}(t.CellView),(ab=t.NodeView||(t.NodeView={})).toStringTag="X6.".concat(ab.name),ab.isNodeView=function(t){if(null==t)return!1;if(t instanceof ab)return!0;var e=t[Symbol.toStringTag],n=t;return(null==e||e===ab.toStringTag)&&"function"==typeof n.isNodeView&&"function"==typeof n.isEdgeView&&"function"==typeof n.confirmUpdate&&"function"==typeof n.update&&"function"==typeof n.findPortElem&&"function"==typeof n.resize&&"function"==typeof n.rotate&&"function"==typeof n.translate},t.NodeView.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),t.NodeView.registry.register("node",t.NodeView,!0),t.EdgeView=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.POINT_ROUNDING=2,t}return n(i,e),Object.defineProperty(i.prototype,Symbol.toStringTag,{get:function(){return i.toStringTag},enumerable:!1,configurable:!0}),i.prototype.getContainerClassName=function(){return[e.prototype.getContainerClassName.call(this),this.prefixClassName("edge")].join(" ")},Object.defineProperty(i.prototype,"sourceBBox",{get:function(){var t=this.sourceView;if(!t){var e=this.cell.getSource();return new Vd(e.x,e.y)}var n=this.sourceMagnet;return t.isEdgeElement(n)?new Vd(this.sourceAnchor.x,this.sourceAnchor.y):t.getBBoxOfElement(n||t.container)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"targetBBox",{get:function(){var t=this.targetView;if(!t){var e=this.cell.getTarget();return new Vd(e.x,e.y)}var n=this.targetMagnet;return t.isEdgeElement(n)?new Vd(this.targetAnchor.x,this.targetAnchor.y):t.getBBoxOfElement(n||t.container)},enumerable:!1,configurable:!0}),i.prototype.isEdgeView=function(){return!0},i.prototype.confirmUpdate=function(t,e){var n=this;void 0===e&&(e={});var r=t;if(this.hasAction(r,"source")){if(!this.updateTerminalProperties("source"))return r;r=this.removeAction(r,"source")}if(this.hasAction(r,"target")){if(!this.updateTerminalProperties("target"))return r;r=this.removeAction(r,"target")}var i=this.graph,o=this.sourceView,s=this.targetView;return i&&(o&&!i.renderer.isViewMounted(o)||s&&!i.renderer.isViewMounted(s))?r:this.hasAction(r,"render")?(this.render(),r=this.removeAction(r,["render","update","labels","tools"])):(r=this.handleAction(r,"update",(function(){return n.update(e)})),r=this.handleAction(r,"labels",(function(){return n.onLabelsChange(e)})),r=this.handleAction(r,"tools",(function(){return n.renderTools()})))},i.prototype.render=function(){return this.empty(),this.renderMarkup(),this.labelContainer=null,this.renderLabels(),this.update(),this.renderTools(),this},i.prototype.renderMarkup=function(){var t=this.cell.markup;if(t){if("string"==typeof t)throw new TypeError("Not support string markup.");return this.renderJSONMarkup(t)}throw new TypeError("Invalid edge markup.")},i.prototype.renderJSONMarkup=function(t){var e=this.parseJSONMarkup(t,this.container);this.selectors=e.selectors,this.container.append(e.fragment)},i.prototype.customizeLabels=function(){if(this.labelContainer)for(var t=this.cell,e=t.labels,n=0,r=e.length;n<r;n+=1){var i=e[n],o=this.labelCache[n],s=this.labelSelectors[n],a=this.graph.options.onEdgeLabelRendered;a&&a({edge:t,label:i,container:o,selectors:s})}},i.prototype.renderLabels=function(){var t=this.cell,e=t.getLabels(),n=e.length,r=this.labelContainer;if(this.labelCache={},this.labelSelectors={},n<=0)return r&&r.parentNode&&r.parentNode.removeChild(r),this;r?this.empty(r):(r=Cp("g"),this.addClass(this.prefixClassName("edge-labels"),r),this.labelContainer=r);for(var i=0,o=e.length;i<o;i+=1){var s=e[i],a=this.normalizeLabelMarkup(this.parseLabelMarkup(s.markup)),l=void 0,u=void 0;if(a)l=a.node,u=a.selectors;else{var c=t.getDefaultLabel(),h=this.normalizeLabelMarkup(this.parseLabelMarkup(c.markup));l=h.node,u=h.selectors}l.setAttribute("data-index","".concat(i)),r.appendChild(l);var p=this.rootSelector;if(u[p])throw new Error("Ambiguous label root selector.");u[p]=l,this.labelCache[i]=l,this.labelSelectors[i]=u}return null==r.parentNode&&this.container.appendChild(r),this.updateLabels(),this.customizeLabels(),this},i.prototype.onLabelsChange=function(t){void 0===t&&(t={}),this.shouldRerenderLabels(t)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()},i.prototype.shouldRerenderLabels=function(t){void 0===t&&(t={});var e=this.cell.previous("labels");if(null==e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var n=t.propertyPathArray||[],r=n.length;if(r>1)if(e[n[1]]){if(2===r)return"object"==typeof t.propertyValue&&ea(t.propertyValue,"markup");if("markup"!==n[2])return!1}}return!0},i.prototype.parseLabelMarkup=function(t){return t?"string"==typeof t?this.parseLabelStringMarkup(t):this.parseJSONMarkup(t):null},i.prototype.parseLabelStringMarkup=function(t){for(var e=wf.createVectors(t),n=document.createDocumentFragment(),r=0,i=e.length;r<i;r+=1){var o=e[r].node;n.appendChild(o)}return{fragment:n,selectors:{}}},i.prototype.normalizeLabelMarkup=function(t){if(null!=t){var e,n=t.fragment;if(!(n instanceof DocumentFragment&&n.hasChildNodes()))throw new Error("Invalid label markup.");var r=n.childNodes;return(e=r.length>1||"G"!==r[0].nodeName.toUpperCase()?wf.create("g").append(n):wf.create(r[0])).addClass(this.prefixClassName("edge-label")),{node:e.node,selectors:t.selectors}}},i.prototype.updateLabels=function(){if(this.labelContainer)for(var t=this.cell,e=t.labels,n=this.can("edgeLabelMovable"),r=t.getDefaultLabel(),i=0,o=e.length;i<o;i+=1){var s=this.labelCache[i],a=this.labelSelectors[i];s.setAttribute("cursor",n?"move":"default");var l=e[i],u=tl({},r.attrs,l.attrs);this.updateAttrs(s,u,{selectors:a,rootBBox:l.size?Vd.fromSize(l.size):void 0})}},i.prototype.renderTools=function(){var t=this.cell.getTools();return this.addTools(t),this},i.prototype.update=function(t){void 0===t&&(t={}),this.cleanCache(),this.updateConnection(t);var e=this.cell.getAttrs();return null!=e&&this.updateAttrs(this.container,e,{selectors:this.selectors}),this.updateLabelPositions(),this.updateTools(t),this},i.prototype.removeRedundantLinearVertices=function(t){void 0===t&&(t={});var e=this.cell,n=e.getVertices(),r=s(s([this.sourceAnchor],n,!0),[this.targetAnchor],!1),i=r.length,o=new Hd(r);o.simplify({threshold:.01});var a=o.points.map((function(t){return t.toJSON()})),l=a.length;return i===l?0:(e.setVertices(a.slice(1,l-1),t),i-l)},i.prototype.getTerminalView=function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("Unknown terminal type '".concat(t,"'"))}},i.prototype.getTerminalAnchor=function(t){switch(t){case"source":return jd.create(this.sourceAnchor);case"target":return jd.create(this.targetAnchor);default:throw new Error("Unknown terminal type '".concat(t,"'"))}},i.prototype.getTerminalConnectionPoint=function(t){switch(t){case"source":return jd.create(this.sourcePoint);case"target":return jd.create(this.targetPoint);default:throw new Error("Unknown terminal type '".concat(t,"'"))}},i.prototype.getTerminalMagnet=function(t,e){switch(void 0===e&&(e={}),t){case"source":if(e.raw)return this.sourceMagnet;var n=this.sourceView;return n?this.sourceMagnet||n.container:null;case"target":if(e.raw)return this.targetMagnet;var r=this.targetView;return r?this.targetMagnet||r.container:null;default:throw new Error("Unknown terminal type '".concat(t,"'"))}},i.prototype.updateConnection=function(t){void 0===t&&(t={});var e=this.cell;if(t.translateBy&&e.isFragmentDescendantOf(t.translateBy)){var n=t.tx||0,r=t.ty||0;this.routePoints=new Hd(this.routePoints).translate(n,r).points,this.translateConnectionPoints(n,r),this.path.translate(n,r)}else{var i=e.getVertices(),o=this.findAnchors(i);this.sourceAnchor=o.source,this.targetAnchor=o.target,this.routePoints=this.findRoutePoints(i);var s=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=s.source,this.targetPoint=s.target;var a=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,a.source||this.sourcePoint,a.target||this.targetPoint)}this.cleanCache()},i.prototype.findAnchors=function(t){var e=this.cell,n=e.source,r=e.target,i=t[0],o=t[t.length-1];return r.priority&&!n.priority?this.findAnchorsOrdered("target",o,"source",i):this.findAnchorsOrdered("source",i,"target",o)},i.prototype.findAnchorsOrdered=function(t,e,n,r){var i,o,s,a=this.cell,l=a[t],u=a[n],c=this.getTerminalView(t),h=this.getTerminalView(n),p=this.getTerminalMagnet(t),f=this.getTerminalMagnet(n);if(c){var d=void 0;d=e?jd.create(e):h?f:jd.create(u),o=this.getAnchor(l.anchor,c,p,d,t)}else o=jd.create(l);if(h){var g=jd.create(r||o);s=this.getAnchor(u.anchor,h,f,g,n)}else s=jd.isPointLike(u)?jd.create(u):new jd;return(i={})[t]=o,i[n]=s,i},i.prototype.getAnchor=function(t,e,n,r,i){var o,s=e.isEdgeElement(n),a=this.graph.options.connecting,l="string"==typeof t?{name:t}:t;if(!l){var u=s?("source"===i?a.sourceEdgeAnchor:a.targetEdgeAnchor)||a.edgeAnchor:("source"===i?a.sourceAnchor:a.targetAnchor)||a.anchor;l="string"==typeof u?{name:u}:u}if(!l)throw new Error("Anchor should be specified.");var c=l.name;if(s){if("function"!=typeof(h=Zv.registry.get(c)))return Zv.registry.onNotFound(c);o=lh(h,this,e,n,r,l.args||{},i)}else{var h;if("function"!=typeof(h=$v.registry.get(c)))return $v.registry.onNotFound(c);o=lh(h,this,e,n,r,l.args||{},i)}return o?o.round(this.POINT_ROUNDING):new jd},i.prototype.findRoutePoints=function(t){void 0===t&&(t=[]);var e,n=this.graph.options.connecting.router||Im.presets.normal,r=this.cell.getRouter()||n;if("function"==typeof r)e=lh(r,this,t,{},this);else{var i="string"==typeof r?r:r.name,o="string"==typeof r?{}:r.args||{},s=i?Im.registry.get(i):Im.presets.normal;if("function"!=typeof s)return Im.registry.onNotFound(i);e=lh(s,this,t,o,this)}return null==e?t.map((function(t){return jd.create(t)})):e.map((function(t){return jd.create(t)}))},i.prototype.findConnectionPoints=function(t,e,n){var r,i,o=this.cell,s=this.graph.options.connecting,a=o.getSource(),l=o.getTarget(),u=this.sourceView,c=this.targetView,h=t[0],p=t[t.length-1];if(u&&!u.isEdgeElement(this.sourceMagnet)){var f=this.sourceMagnet||u.container,d=new Dd(h||n,e),g=a.connectionPoint||s.sourceConnectionPoint||s.connectionPoint;r=this.getConnectionPoint(g,u,f,d,"source")}else r=e;if(c&&!c.isEdgeElement(this.targetMagnet)){var y=this.targetMagnet||c.container,v=l.connectionPoint||s.targetConnectionPoint||s.connectionPoint,m=new Dd(p||e,n);i=this.getConnectionPoint(v,c,y,m,"target")}else i=n;return{source:r,target:i}},i.prototype.getConnectionPoint=function(t,e,n,r,i){var o=r.end;if(null==t)return o;var s="string"==typeof t?t:t.name,a="string"==typeof t?{}:t.args,l=om.registry.get(s);if("function"!=typeof l)return om.registry.onNotFound(s);var u=lh(l,this,r,e,n,a||{},i);return u?u.round(this.POINT_ROUNDING):o},i.prototype.findMarkerPoints=function(t,e,n){var r,i,o=this,s=function(t){for(var e=o.cell.getAttrs(),n=Object.keys(e),r=0,i=n.length;r<i;r+=1){var s=e[n[r]];if(s["".concat(t,"Marker")]||s["".concat(t,"-marker")]){var a=s.strokeWidth||s["stroke-width"];if(a)return parseFloat(a);break}}return null},a=t[0],l=t[t.length-1],u=s("source");u&&(r=e.clone().move(a||n,-u));var c=s("target");return c&&(i=n.clone().move(l||e,-c)),this.sourceMarkerPoint=r||e.clone(),this.targetMarkerPoint=i||n.clone(),{source:r,target:i}},i.prototype.findPath=function(t,e,n){var i,o,s,a=this.cell.getConnector()||this.graph.options.connecting.connector;if("string"==typeof a?i=a:(i=a.name,o=a.args),i){var l=qm.registry.get(i);if("function"!=typeof l)return qm.registry.onNotFound(i);s=l}else s=qm.presets.normal;var u=lh(s,this,e,n,t,r(r({},o),{raw:!0}),this);return"string"==typeof u?og.parse(u):u},i.prototype.translateConnectionPoints=function(t,e){this.sourcePoint.translate(t,e),this.targetPoint.translate(t,e),this.sourceAnchor.translate(t,e),this.targetAnchor.translate(t,e),this.sourceMarkerPoint.translate(t,e),this.targetMarkerPoint.translate(t,e)},i.prototype.updateLabelPositions=function(){if(null==this.labelContainer)return this;if(!this.path)return this;var t=this.cell,e=t.getLabels();if(0===e.length)return this;for(var n=t.getDefaultLabel(),r=this.normalizeLabelPosition(n.position),i=0,o=e.length;i<o;i+=1){var s=e[i],a=this.normalizeLabelPosition(s.position),l=tl({},r,a),u=this.getLabelTransformationMatrix(l);this.labelCache[i].setAttribute("transform",Zf(u))}return this},i.prototype.updateTerminalProperties=function(t){var e=this.cell,n=this.graph,r=e[t],i=r&&r.cell,o="".concat(t,"View");if(!i)return this[o]=null,this.updateTerminalMagnet(t),!0;var s=n.getCellById(i);if(!s)throw new Error("Edge's ".concat(t,' node with id "').concat(i,'" not exists'));var a=s.findView(n);return!!a&&(this[o]=a,this.updateTerminalMagnet(t),!0)},i.prototype.updateTerminalMagnet=function(t){var e="".concat(t,"Magnet"),n=this.getTerminalView(t);if(n){var r=n.getMagnetFromEdgeTerminal(this.cell[t]);r===n.container&&(r=null),this[e]=r}else this[e]=null},i.prototype.getLabelPositionAngle=function(t){var e=this.cell.getLabelAt(t);return e&&e.position&&"object"==typeof e.position&&e.position.angle||0},i.prototype.getLabelPositionArgs=function(t){var e=this.cell.getLabelAt(t);if(e&&e.position&&"object"==typeof e.position)return e.position.options},i.prototype.getDefaultLabelPositionArgs=function(){var t=this.cell.getDefaultLabel();if(t&&t.position&&"object"==typeof t.position)return t.position.options},i.prototype.mergeLabelPositionArgs=function(t,e){return null===t?null:void 0===t?null===e?null:e:tl({},e,t)},i.prototype.getConnection=function(){return null!=this.path?this.path.clone():null},i.prototype.getConnectionPathData=function(){if(null==this.path)return"";var t=this.cache.pathCache;return ea(t,"data")||(t.data=this.path.serialize()),t.data||""},i.prototype.getConnectionSubdivisions=function(){if(null==this.path)return null;var t=this.cache.pathCache;return ea(t,"segmentSubdivisions")||(t.segmentSubdivisions=this.path.getSegmentSubdivisions()),t.segmentSubdivisions},i.prototype.getConnectionLength=function(){if(null==this.path)return 0;var t=this.cache.pathCache;return ea(t,"length")||(t.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),t.length},i.prototype.getPointAtLength=function(t){return null==this.path?null:this.path.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})},i.prototype.getPointAtRatio=function(t){return null==this.path?null:(Fh(t)&&(t=parseFloat(t)/100),this.path.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}))},i.prototype.getTangentAtLength=function(t){return null==this.path?null:this.path.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})},i.prototype.getTangentAtRatio=function(t){return null==this.path?null:this.path.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})},i.prototype.getClosestPoint=function(t){return null==this.path?null:this.path.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()})},i.prototype.getClosestPointLength=function(t){return null==this.path?null:this.path.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})},i.prototype.getClosestPointRatio=function(t){return null==this.path?null:this.path.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})},i.prototype.getLabelPosition=function(t,e,n,r){var i,o={distance:0},s=0;"number"==typeof n?(s=n,i=r):i=n,null!=i&&(o.options=i);var a,l,u=i&&i.absoluteOffset,c=!(i&&i.absoluteDistance),h=i&&i.absoluteDistance&&i.reverseDistance,p=this.path,f={segmentSubdivisions:this.getConnectionSubdivisions()},d=new jd(t,e),g=p.closestPointT(d,f),y=this.getConnectionLength()||0,v=p.lengthAtT(g,f);if(c&&(v=y>0?v/y:0),h&&(v=-1*(y-v)||1),o.distance=v,u||(a=p.tangentAtT(g)),a)l=a.pointOffset(d);else{var m=p.pointAtT(g),b=d.diff(m);l={x:b.x,y:b.y}}return o.offset=l,o.angle=s,o},i.prototype.normalizeLabelPosition=function(t){return"number"==typeof t?{distance:t}:t},i.prototype.getLabelTransformationMatrix=function(e){var n=this.normalizeLabelPosition(e),r=n.options||{},i=n.angle||0,o=n.distance,s=o>0&&o<=1,a=0,l={x:0,y:0},u=n.offset;u&&("number"==typeof u?a=u:(null!=u.x&&(l.x=u.x),null!=u.y&&(l.y=u.y)));var c,h=0!==l.x||0!==l.y||0===a,p=r.keepGradient,f=r.ensureLegibility,d=this.path,g={segmentSubdivisions:this.getConnectionSubdivisions()},y=s?o*this.getConnectionLength():o,v=d.tangentAtLength(y,g),m=i;if(v){if(h)(c=v.start).translate(l);else{var b=v.clone();b.rotate(-90,v.start),b.setLength(a),c=b.end}p&&(m=v.angle()+i,f&&(m=t.Angle.normalize((m+90)%180-90)))}else c=d.start,h&&c.translate(l);return Jf().translate(c.x,c.y).rotate(m)},i.prototype.getVertexIndex=function(t,e){var n=this.cell.getVertices(),r=this.getClosestPointLength(new jd(t,e)),i=0;if(null!=r)for(var o=n.length;i<o;i+=1){var s=n[i],a=this.getClosestPointLength(s);if(null!=a&&r<a)break}return i},i.prototype.getEventArgs=function(t,e,n){var r=this,i=r.cell;return null==e||null==n?{e:t,view:r,edge:i,cell:i}:{e:t,x:e,y:n,view:r,edge:i,cell:i}},i.prototype.notifyUnhandledMouseDown=function(t,e,n){this.notify("edge:unhandled:mousedown",{e:t,x:e,y:n,view:this,cell:this.cell,edge:this.cell})},i.prototype.notifyMouseDown=function(t,n,r){e.prototype.onMouseDown.call(this,t,n,r),this.notify("edge:mousedown",this.getEventArgs(t,n,r))},i.prototype.notifyMouseMove=function(t,n,r){e.prototype.onMouseMove.call(this,t,n,r),this.notify("edge:mousemove",this.getEventArgs(t,n,r))},i.prototype.notifyMouseUp=function(t,n,r){e.prototype.onMouseUp.call(this,t,n,r),this.notify("edge:mouseup",this.getEventArgs(t,n,r))},i.prototype.onClick=function(t,n,r){e.prototype.onClick.call(this,t,n,r),this.notify("edge:click",this.getEventArgs(t,n,r))},i.prototype.onDblClick=function(t,n,r){e.prototype.onDblClick.call(this,t,n,r),this.notify("edge:dblclick",this.getEventArgs(t,n,r))},i.prototype.onContextMenu=function(t,n,r){e.prototype.onContextMenu.call(this,t,n,r),this.notify("edge:contextmenu",this.getEventArgs(t,n,r))},i.prototype.onMouseDown=function(t,e,n){this.notifyMouseDown(t,e,n),this.startEdgeDragging(t,e,n)},i.prototype.onMouseMove=function(t,e,n){var r=this.getEventData(t);switch(r.action){case"drag-label":this.dragLabel(t,e,n);break;case"drag-arrowhead":this.dragArrowhead(t,e,n);break;case"drag-edge":this.dragEdge(t,e,n)}return this.notifyMouseMove(t,e,n),r},i.prototype.onMouseUp=function(t,e,n){var r=this.getEventData(t);switch(r.action){case"drag-label":this.stopLabelDragging(t,e,n);break;case"drag-arrowhead":this.stopArrowheadDragging(t,e,n);break;case"drag-edge":this.stopEdgeDragging(t,e,n)}return this.notifyMouseUp(t,e,n),this.checkMouseleave(t),r},i.prototype.onMouseOver=function(t){e.prototype.onMouseOver.call(this,t),this.notify("edge:mouseover",this.getEventArgs(t))},i.prototype.onMouseOut=function(t){e.prototype.onMouseOut.call(this,t),this.notify("edge:mouseout",this.getEventArgs(t))},i.prototype.onMouseEnter=function(t){e.prototype.onMouseEnter.call(this,t),this.notify("edge:mouseenter",this.getEventArgs(t))},i.prototype.onMouseLeave=function(t){e.prototype.onMouseLeave.call(this,t),this.notify("edge:mouseleave",this.getEventArgs(t))},i.prototype.onMouseWheel=function(t,n,i,o){e.prototype.onMouseWheel.call(this,t,n,i,o),this.notify("edge:mousewheel",r({delta:o},this.getEventArgs(t,n,i)))},i.prototype.onCustomEvent=function(t,n,i,o){if(Np(t.target,"edge-tool",this.container)){if(t.stopPropagation(),this.can("useEdgeTools")){if("edge:remove"===n)return void this.cell.remove({ui:!0});this.notify("edge:customevent",r({name:n},this.getEventArgs(t,i,o)))}this.notifyMouseDown(t,i,o)}else this.notify("edge:customevent",r({name:n},this.getEventArgs(t,i,o))),e.prototype.onCustomEvent.call(this,t,n,i,o)},i.prototype.onLabelMouseDown=function(t,e,n){this.notifyMouseDown(t,e,n),this.startLabelDragging(t,e,n),this.getEventData(t).stopPropagation&&t.stopPropagation()},i.prototype.startEdgeDragging=function(t,e,n){this.can("edgeMovable")?this.setEventData(t,{x:e,y:n,moving:!1,action:"drag-edge"}):this.notifyUnhandledMouseDown(t,e,n)},i.prototype.dragEdge=function(t,e,n){var r=this.getEventData(t);r.moving||(r.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e:t,x:e,y:n,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(e-r.x,n-r.y,{ui:!0}),this.setEventData(t,{x:e,y:n}),this.notify("edge:moving",{e:t,x:e,y:n,view:this,cell:this.cell,edge:this.cell})},i.prototype.stopEdgeDragging=function(t,e,n){var r=this.getEventData(t);r.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e:t,x:e,y:n,view:this,cell:this.cell,edge:this.cell})),r.moving=!1},i.prototype.prepareArrowheadDragging=function(t,e){var n=this.getTerminalMagnet(t),r={action:"drag-arrowhead",x:e.x,y:e.y,isNewEdge:!0===e.isNewEdge,terminalType:t,initialMagnet:n,initialTerminal:Xi(this.cell[t]),fallbackAction:e.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(t),options:e.options};return this.beforeArrowheadDragging(r),r},i.prototype.createValidateConnectionArgs=function(t){var e,n=[];n[4]=t,n[5]=this;var r=0,i=0;"source"===t?(r=2,e="target"):(i=2,e="source");var o=this.cell[e],s=o.cell;if(s){var a=void 0,l=n[r]=this.graph.findViewByCell(s);l&&(a=l.getMagnetFromEdgeTerminal(o))===l.container&&(a=void 0),n[r+1]=a}return function(t,e){return n[i]=t,n[i+1]=t.container===e?void 0:e,n}},i.prototype.beforeArrowheadDragging=function(t){t.zIndex=this.cell.zIndex,this.cell.toFront();var e=this.container.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(t)},i.prototype.afterArrowheadDragging=function(t){null!=t.zIndex&&(this.cell.setZIndex(t.zIndex,{ui:!0}),t.zIndex=null),this.container.style.pointerEvents=t.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(t)},i.prototype.validateConnection=function(e,n,r,o,s,a,l){var u=this,c=this.graph.options.connecting,h=c.allowLoop,p=c.allowNode,f=c.allowEdge,d=c.allowPort,g=c.allowMulti,y=c.validateConnection,v=a?a.cell:null,m="target"===s?r:e,b="target"===s?o:n,w=!0,x=function(t){var i="source"===s?l?l.port:null:v?v.getSourcePortId():null,c="target"===s?l?l.port:null:v?v.getTargetPortId():null;return lh(t,u.graph,{edge:v,edgeView:a,sourceView:e,targetView:r,sourcePort:i,targetPort:c,sourceMagnet:n,targetMagnet:o,sourceCell:e?e.cell:null,targetCell:r?r.cell:null,type:s})};if(null!=h&&("boolean"==typeof h?h||e!==r||(w=!1):w=x(h)),w&&null!=d&&("boolean"==typeof d?!d&&b&&(w=!1):w=x(d)),w&&null!=f&&("boolean"==typeof f?!f&&i.isEdgeView(m)&&(w=!1):w=x(f)),w&&null!=p&&null==b&&("boolean"==typeof p?!p&&t.NodeView.isNodeView(m)&&(w=!1):w=x(p)),w&&null!=g&&a){var P=a.cell,A="source"===s?l:P.getSource(),C="target"===s?l:P.getTarget(),E=l?this.graph.getCellById(l.cell):null;if(A&&C&&A.cell&&C.cell&&E)if("function"==typeof g)w=x(g);else{var M=this.graph.model.getConnectedEdges(E,{outgoing:"source"===s,incoming:"target"===s});if(M.length)if("withPort"===g)M.some((function(t){var e=t.getSource(),n=t.getTarget();return e&&n&&e.cell===A.cell&&n.cell===C.cell&&null!=e.port&&e.port===A.port&&null!=n.port&&n.port===C.port}))&&(w=!1);else if(!g){M.some((function(t){var e=t.getSource(),n=t.getTarget();return e&&n&&e.cell===A.cell&&n.cell===C.cell}))&&(w=!1)}}}return w&&null!=y&&(w=x(y)),w},i.prototype.allowConnectToBlank=function(t){var e=this.graph,n=e.options.connecting.allowBlank;if("function"!=typeof n)return!!n;var r=e.findViewByCell(t),i=t.getSourceCell(),o=t.getTargetCell(),s=e.findViewByCell(i),a=e.findViewByCell(o);return lh(n,e,{edge:t,edgeView:r,sourceCell:i,targetCell:o,sourceView:s,targetView:a,sourcePort:t.getSourcePortId(),targetPort:t.getTargetPortId(),sourceMagnet:r.sourceMagnet,targetMagnet:r.targetMagnet})},i.prototype.validateEdge=function(t,e,n){var r=this.graph;if(!this.allowConnectToBlank(t)){var i=t.getSourceCellId(),o=t.getTargetCellId();if(!i||!o)return!1}var s=r.options.connecting.validateEdge;return!s||lh(s,r,{edge:t,type:e,previous:n})},i.prototype.arrowheadDragging=function(t,e,n,i){i.x=e,i.y=n,i.currentTarget!==t&&(i.currentMagnet&&i.currentView&&i.currentView.unhighlight(i.currentMagnet,{type:"magnetAdsorbed"}),i.currentView=this.graph.findViewByElem(t),i.currentView?(i.currentMagnet=i.currentView.findMagnet(t),i.currentMagnet&&this.validateConnection.apply(this,s(s([],i.getValidateConnectionArgs(i.currentView,i.currentMagnet),!1),[i.currentView.getEdgeTerminal(i.currentMagnet,e,n,this.cell,i.terminalType)],!1))?i.currentView.highlight(i.currentMagnet,{type:"magnetAdsorbed"}):i.currentMagnet=null):i.currentMagnet=null),i.currentTarget=t,this.cell.prop(i.terminalType,{x:e,y:n},r(r({},i.options),{ui:!0}))},i.prototype.arrowheadDragged=function(t,e,n){var r=t.currentView,i=t.currentMagnet;if(i&&r){r.unhighlight(i,{type:"magnetAdsorbed"});var o=t.terminalType,s=r.getEdgeTerminal(i,e,n,this.cell,o);this.cell.setTerminal(o,s,{ui:!0})}},i.prototype.snapArrowhead=function(t,e,n){var i=this,o=this.graph,a=o.options.connecting,l=a.snap,u=a.allowEdge,c="object"==typeof l&&l.radius||50,h={x:t-c,y:e-c,width:2*c,height:2*c},p=o.renderer.findViewsInArea(h);if(u){var f=o.renderer.findEdgeViewsInArea(h).filter((function(t){return t!==i}));p.push.apply(p,f)}var d,g=n.closestView||null,y=n.closestMagnet||null;n.closestView=null,n.closestMagnet=null;var v,m=Number.MAX_SAFE_INTEGER,b=new jd(t,e);p.forEach((function(r){"false"!==r.container.getAttribute("magnet")&&(d=r.cell.getBBox().getCenter().distance(b))<c&&d<m&&(y===r.container||i.validateConnection.apply(i,s(s([],n.getValidateConnectionArgs(r,null),!1),[r.getEdgeTerminal(r.container,t,e,i.cell,n.terminalType)],!1)))&&(m=d,n.closestView=r,n.closestMagnet=r.container),r.container.querySelectorAll("[magnet]").forEach((function(o){if("false"!==o.getAttribute("magnet")){var a=r.getBBoxOfElement(o);(d=b.distance(a.getCenter()))<c&&d<m&&(y===o||i.validateConnection.apply(i,s(s([],n.getValidateConnectionArgs(r,o),!1),[r.getEdgeTerminal(o,t,e,i.cell,n.terminalType)],!1)))&&(m=d,n.closestView=r,n.closestMagnet=o)}}))}));var w=n.terminalType,x=n.closestView,P=n.closestMagnet,A=y!==P;if(g&&A&&g.unhighlight(y,{type:"magnetAdsorbed"}),x){if(!A)return;x.highlight(P,{type:"magnetAdsorbed"}),v=x.getEdgeTerminal(P,t,e,this.cell,w)}else v={x:t,y:e};this.cell.setTerminal(w,v,{},r(r({},n.options),{ui:!0}))},i.prototype.snapArrowheadEnd=function(t){var e=t.closestView,n=t.closestMagnet;e&&n&&(e.unhighlight(n,{type:"magnetAdsorbed"}),t.currentMagnet=e.findMagnet(n)),t.closestView=null,t.closestMagnet=null},i.prototype.finishEmbedding=function(t){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(t.zIndex=null)},i.prototype.fallbackConnection=function(t){if("remove"===t.fallbackAction)this.cell.remove({ui:!0});else this.cell.prop(t.terminalType,t.initialTerminal,{ui:!0})},i.prototype.notifyConnectionEvent=function(e,n){var r=e.terminalType,i=e.initialTerminal,o=this.cell[r];if(o&&!t.Edge.equalTerminals(i,o)){var s=this.graph,a=i,l=a.cell?s.getCellById(a.cell):null,u=a.port,c=l?s.findViewByCell(l):null,h=l||e.isNewEdge?null:jd.create(i).toJSON(),p=o,f=p.cell?s.getCellById(p.cell):null,d=p.port,g=f?s.findViewByCell(f):null,y=f?null:jd.create(o).toJSON();this.notify("edge:connected",{e:n,previousCell:l,previousPort:u,previousView:c,previousPoint:h,currentCell:f,currentView:g,currentPort:d,currentPoint:y,previousMagnet:e.initialMagnet,currentMagnet:e.currentMagnet,edge:this.cell,view:this,type:r,isNew:e.isNewEdge})}},i.prototype.highlightAvailableMagnets=function(t){var e=this,n=this.graph,r=n.model.getCells();t.marked={};for(var i=function(i,a){var l=n.findViewByCell(r[i]);if(!l||l.cell.id===o.cell.id)return"continue";var u=Array.prototype.slice.call(l.container.querySelectorAll("[magnet]"));"false"!==l.container.getAttribute("magnet")&&u.push(l.container);var c=u.filter((function(n){return e.validateConnection.apply(e,s(s([],t.getValidateConnectionArgs(l,n),!1),[l.getEdgeTerminal(n,t.x,t.y,e.cell,t.terminalType)],!1))}));if(c.length>0){for(var h=0,p=c.length;h<p;h+=1)l.highlight(c[h],{type:"magnetAvailable"});l.highlight(null,{type:"nodeAvailable"}),t.marked[l.cell.id]=c}},o=this,a=0,l=r.length;a<l;a+=1)i(a)},i.prototype.unhighlightAvailableMagnets=function(t){var e=this,n=t.marked||{};Object.keys(n).forEach((function(t){var r=e.graph.findViewByCell(t);r&&(n[t].forEach((function(t){r.unhighlight(t,{type:"magnetAvailable"})})),r.unhighlight(null,{type:"nodeAvailable"}))})),t.marked=null},i.prototype.startArrowheadDragging=function(t,e,n){if(this.can("arrowheadMovable")){var r=t.target.getAttribute("data-terminal"),i=this.prepareArrowheadDragging(r,{x:e,y:n});this.setEventData(t,i)}else this.notifyUnhandledMouseDown(t,e,n)},i.prototype.dragArrowhead=function(t,e,n){var r=this.getEventData(t);this.graph.options.connecting.snap?this.snapArrowhead(e,n,r):this.arrowheadDragging(this.getEventTarget(t),e,n,r)},i.prototype.stopArrowheadDragging=function(t,e,n){var r=this.graph,i=this.getEventData(t);r.options.connecting.snap?this.snapArrowheadEnd(i):this.arrowheadDragged(i,e,n),this.validateEdge(this.cell,i.terminalType,i.initialTerminal)?(this.finishEmbedding(i),this.notifyConnectionEvent(i,t)):this.fallbackConnection(i),this.afterArrowheadDragging(i)},i.prototype.startLabelDragging=function(t,e,n){if(this.can("edgeLabelMovable")){var r=t.currentTarget,i=parseInt(r.getAttribute("data-index"),10),o=this.getLabelPositionAngle(i),s=this.getLabelPositionArgs(i),a=this.getDefaultLabelPositionArgs(),l=this.mergeLabelPositionArgs(s,a);this.setEventData(t,{index:i,positionAngle:o,positionArgs:l,stopPropagation:!0,action:"drag-label"})}else this.setEventData(t,{stopPropagation:!0});this.graph.view.delegateDragEvents(t,this)},i.prototype.dragLabel=function(t,e,n){var r=this.getEventData(t),i=this.cell.getLabelAt(r.index),o=tl({},i,{position:this.getLabelPosition(e,n,r.positionAngle,r.positionArgs)});this.cell.setLabelAt(r.index,o)},i.prototype.stopLabelDragging=function(t,e,n){},i}(t.CellView),(lb=t.EdgeView||(t.EdgeView={})).toStringTag="X6.".concat(lb.name),lb.isEdgeView=function(t){if(null==t)return!1;if(t instanceof lb)return!0;var e=t[Symbol.toStringTag],n=t;return(null==e||e===lb.toStringTag)&&"function"==typeof n.isNodeView&&"function"==typeof n.isEdgeView&&"function"==typeof n.confirmUpdate&&"function"==typeof n.update&&"function"==typeof n.getConnection},t.EdgeView.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],tools:["tools"],vertices:["vertices","update"]}}),t.EdgeView.registry.register("edge",t.EdgeView,!0),t.GraphView=function(e){function r(n){var i=e.call(this)||this;i.graph=n;var o=t.Markup.parseJSONMarkup(r.markup),s=o.selectors,a=o.fragment;return i.background=s.background,i.grid=s.grid,i.svg=s.svg,i.defs=s.defs,i.viewport=s.viewport,i.primer=s.primer,i.stage=s.stage,i.decorator=s.decorator,i.overlay=s.overlay,i.container=i.options.container,i.restore=r.snapshoot(i.container),fp(i.container,i.prefixClassName("graph")),Ip(i.container,a),i.delegateEvents(),i}return n(r,e),Object.defineProperty(r.prototype,"options",{get:function(){return this.graph.options},enumerable:!1,configurable:!0}),r.prototype.delegateEvents=function(){var t=this.constructor;return e.prototype.delegateEvents.call(this,t.events),this},r.prototype.guard=function(e,n){return"mousedown"===e.type&&2===e.button||(!(!this.options.guard||!this.options.guard(e,n))||(e.data&&void 0!==e.data.guarded?e.data.guarded:!(n&&n.cell&&t.Cell.isCell(n.cell))&&(this.svg!==e.target&&this.container!==e.target&&!this.svg.contains(e.target))))},r.prototype.findView=function(t){return this.graph.findViewByElem(t)},r.prototype.onDblClick=function(t){this.options.preventDefaultDblClick&&t.preventDefault();var e=this.normalizeEvent(t),n=this.findView(e.target);if(!this.guard(e,n)){var r=this.graph.snapToGrid(e.clientX,e.clientY);n?n.onDblClick(e,r.x,r.y):this.graph.trigger("blank:dblclick",{e:e,x:r.x,y:r.y})}},r.prototype.onClick=function(t){if(this.getMouseMovedCount(t)<=this.options.clickThreshold){var e=this.normalizeEvent(t),n=this.findView(e.target);if(this.guard(e,n))return;var r=this.graph.snapToGrid(e.clientX,e.clientY);n?n.onClick(e,r.x,r.y):this.graph.trigger("blank:click",{e:e,x:r.x,y:r.y})}},r.prototype.isPreventDefaultContextMenu=function(t){var e=this.options.preventDefaultContextMenu;return"function"==typeof e&&(e=lh(e,this.graph,{view:t})),e},r.prototype.onContextMenu=function(t){var e=this.normalizeEvent(t),n=this.findView(e.target);if(this.isPreventDefaultContextMenu(n)&&t.preventDefault(),!this.guard(e,n)){var r=this.graph.snapToGrid(e.clientX,e.clientY);n?n.onContextMenu(e,r.x,r.y):this.graph.trigger("blank:contextmenu",{e:e,x:r.x,y:r.y})}},r.prototype.delegateDragEvents=function(t,e){null==t.data&&(t.data={}),this.setEventData(t,{currentView:e||null,mouseMovedCount:0,startPosition:{x:t.clientX,y:t.clientY}});var n=this.constructor;this.delegateDocumentEvents(n.documentEvents,t.data),this.undelegateEvents()},r.prototype.getMouseMovedCount=function(t){return this.getEventData(t).mouseMovedCount||0},r.prototype.onMouseDown=function(t){var e=this.normalizeEvent(t),n=this.findView(e.target);if(!this.guard(e,n)){this.options.preventDefaultMouseDown&&t.preventDefault();var r=this.graph.snapToGrid(e.clientX,e.clientY);n?n.onMouseDown(e,r.x,r.y):(this.options.preventDefaultBlankAction&&["touchstart"].includes(e.type)&&t.preventDefault(),this.graph.trigger("blank:mousedown",{e:e,x:r.x,y:r.y})),this.delegateDragEvents(e,n)}},r.prototype.onMouseMove=function(t){var e=this.getEventData(t),n=e.startPosition;if((!n||n.x!==t.clientX||n.y!==t.clientY)&&(null==e.mouseMovedCount&&(e.mouseMovedCount=0),e.mouseMovedCount+=1,!(e.mouseMovedCount<=this.options.moveThreshold))){var r=this.normalizeEvent(t),i=this.graph.snapToGrid(r.clientX,r.clientY),o=e.currentView;o?o.onMouseMove(r,i.x,i.y):this.graph.trigger("blank:mousemove",{e:r,x:i.x,y:i.y}),this.setEventData(r,e)}},r.prototype.onMouseUp=function(t){this.undelegateDocumentEvents();var e=this.normalizeEvent(t),n=this.graph.snapToGrid(e.clientX,e.clientY),r=this.getEventData(t).currentView;if(r?r.onMouseUp(e,n.x,n.y):this.graph.trigger("blank:mouseup",{e:e,x:n.x,y:n.y}),!t.isPropagationStopped()){var i=new dd(t,{type:"click",data:t.data});this.onClick(i)}t.stopImmediatePropagation(),this.delegateEvents()},r.prototype.onMouseOver=function(t){var e=this.normalizeEvent(t),n=this.findView(e.target);if(!this.guard(e,n))if(n)n.onMouseOver(e);else{if(this.container===e.target)return;this.graph.trigger("blank:mouseover",{e:e})}},r.prototype.onMouseOut=function(t){var e=this.normalizeEvent(t),n=this.findView(e.target);if(!this.guard(e,n))if(n)n.onMouseOut(e);else{if(this.container===e.target)return;this.graph.trigger("blank:mouseout",{e:e})}},r.prototype.onMouseEnter=function(t){var e=this.normalizeEvent(t),n=this.findView(e.target);if(!this.guard(e,n)){var r=this.graph.findViewByElem(e.relatedTarget);if(n){if(r===n)return;n.onMouseEnter(e)}else{if(r)return;this.graph.trigger("graph:mouseenter",{e:e})}}},r.prototype.onMouseLeave=function(t){var e=this.normalizeEvent(t),n=this.findView(e.target);if(!this.guard(e,n)){var r=this.graph.findViewByElem(e.relatedTarget);if(n){if(r===n)return;n.onMouseLeave(e)}else{if(r)return;this.graph.trigger("graph:mouseleave",{e:e})}}},r.prototype.onMouseWheel=function(t){var e=this.normalizeEvent(t),n=this.findView(e.target);if(!this.guard(e,n)){var r=e.originalEvent,i=this.graph.snapToGrid(r.clientX,r.clientY),o=Math.max(-1,Math.min(1,r.wheelDelta||-r.detail));n?n.onMouseWheel(e,i.x,i.y,o):this.graph.trigger("blank:mousewheel",{e:e,delta:o,x:i.x,y:i.y})}},r.prototype.onCustomEvent=function(t){var e=t.currentTarget,n=e.getAttribute("event")||e.getAttribute("data-event");if(n){var r=this.findView(e);if(r){var i=this.normalizeEvent(t);if(this.guard(i,r))return;var o=this.graph.snapToGrid(i.clientX,i.clientY);r.onCustomEvent(i,n,o.x,o.y)}}},r.prototype.handleMagnetEvent=function(t,e){var n=t.currentTarget,r=n.getAttribute("magnet");if(r&&"false"!==r.toLowerCase()){var i=this.findView(n);if(i){var o=this.normalizeEvent(t);if(this.guard(o,i))return;var s=this.graph.snapToGrid(o.clientX,o.clientY);lh(e,this.graph,i,o,n,s.x,s.y)}}},r.prototype.onMagnetMouseDown=function(t){this.handleMagnetEvent(t,(function(t,e,n,r,i){t.onMagnetMouseDown(e,n,r,i)}))},r.prototype.onMagnetDblClick=function(t){this.handleMagnetEvent(t,(function(t,e,n,r,i){t.onMagnetDblClick(e,n,r,i)}))},r.prototype.onMagnetContextMenu=function(t){var e=this.findView(t.target);this.isPreventDefaultContextMenu(e)&&t.preventDefault(),this.handleMagnetEvent(t,(function(t,e,n,r,i){t.onMagnetContextMenu(e,n,r,i)}))},r.prototype.onLabelMouseDown=function(t){var e=t.currentTarget,n=this.findView(e);if(n){var r=this.normalizeEvent(t);if(this.guard(r,n))return;var i=this.graph.snapToGrid(r.clientX,r.clientY);n.onLabelMouseDown(r,i.x,i.y)}},r.prototype.onImageDragStart=function(){return!1},r.prototype.dispose=function(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=function(){}},o([t.View.dispose()],r.prototype,"dispose",null),r}(t.View),ub=t.GraphView||(t.GraphView={}),cb="".concat(Vy.prefixCls,"-graph"),ub.markup=[{ns:wp.xhtml,tagName:"div",selector:"background",className:"".concat(cb,"-background")},{ns:wp.xhtml,tagName:"div",selector:"grid",className:"".concat(cb,"-grid")},{ns:wp.svg,tagName:"svg",selector:"svg",className:"".concat(cb,"-svg"),attrs:{width:"100%",height:"100%","xmlns:xlink":wp.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:"".concat(cb,"-svg-viewport"),children:[{tagName:"g",selector:"primer",className:"".concat(cb,"-svg-primer")},{tagName:"g",selector:"stage",className:"".concat(cb,"-svg-stage")},{tagName:"g",selector:"decorator",className:"".concat(cb,"-svg-decorator")},{tagName:"g",selector:"overlay",className:"".concat(cb,"-svg-overlay")}]}]}],ub.snapshoot=function(t){var e=t.cloneNode();return t.childNodes.forEach((function(t){return e.appendChild(t)})),function(){for(Bp(t);t.attributes.length>0;)t.removeAttribute(t.attributes[0].name);for(var n=0,r=e.attributes.length;n<r;n+=1){var i=e.attributes[n];t.setAttribute(i.name,i.value)}e.childNodes.forEach((function(e){return t.appendChild(e)}))}},function(t){var e,n=Vy.prefixCls;t.events=((e={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel"})["mouseenter  .".concat(n,"-cell")]="onMouseEnter",e["mouseleave  .".concat(n,"-cell")]="onMouseLeave",e["mouseenter  .".concat(n,"-cell-tools")]="onMouseEnter",e["mouseleave  .".concat(n,"-cell-tools")]="onMouseLeave",e["mousedown   .".concat(n,"-cell [event]")]="onCustomEvent",e["touchstart  .".concat(n,"-cell [event]")]="onCustomEvent",e["mousedown   .".concat(n,"-cell [data-event]")]="onCustomEvent",e["touchstart  .".concat(n,"-cell [data-event]")]="onCustomEvent",e["dblclick    .".concat(n,"-cell [magnet]")]="onMagnetDblClick",e["contextmenu .".concat(n,"-cell [magnet]")]="onMagnetContextMenu",e["mousedown   .".concat(n,"-cell [magnet]")]="onMagnetMouseDown",e["touchstart  .".concat(n,"-cell [magnet]")]="onMagnetMouseDown",e["dblclick    .".concat(n,"-cell [data-magnet]")]="onMagnetDblClick",e["contextmenu .".concat(n,"-cell [data-magnet]")]="onMagnetContextMenu",e["mousedown   .".concat(n,"-cell [data-magnet]")]="onMagnetMouseDown",e["touchstart  .".concat(n,"-cell [data-magnet]")]="onMagnetMouseDown",e["dragstart   .".concat(n,"-cell image")]="onImageDragStart",e["mousedown   .".concat(n,"-edge .").concat(n,"-edge-label")]="onLabelMouseDown",e["touchstart  .".concat(n,"-edge .").concat(n,"-edge-label")]="onLabelMouseDown",e),t.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(t.GraphView||(t.GraphView={}));var vb,mb=function(t){function e(e){var n=t.call(this)||this;return n.graph=e,n.init(),n}return n(e,t),Object.defineProperty(e.prototype,"options",{get:function(){return this.graph.options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return this.graph.model},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this.graph.view},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e}(a),bb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.init=function(){Vy.autoInsertCSS&&Od("core",".x6-graph {\n  position: relative;\n  outline: none;\n  touch-action: none;\n}\n.x6-graph-background,\n.x6-graph-grid,\n.x6-graph-svg {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-background-stage,\n.x6-graph-grid-stage,\n.x6-graph-svg-stage {\n  user-select: none;\n}\n.x6-graph.x6-graph-pannable {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.x6-graph.x6-graph-panning {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n  user-select: none;\n}\n.x6-node {\n  cursor: move;\n  /* stylelint-disable-next-line */\n}\n.x6-node.x6-node-immovable {\n  cursor: default;\n}\n.x6-node * {\n  -webkit-user-drag: none;\n}\n.x6-node .scalable * {\n  vector-effect: non-scaling-stroke;\n}\n.x6-node [magnet='true'] {\n  cursor: crosshair;\n  transition: opacity 0.3s;\n}\n.x6-node [magnet='true']:hover {\n  opacity: 0.7;\n}\n.x6-node foreignObject {\n  display: block;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-node foreignObject > body {\n  position: static;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-edge .source-marker,\n.x6-edge .target-marker {\n  vector-effect: non-scaling-stroke;\n}\n.x6-edge .connection {\n  stroke-linejoin: round;\n  fill: none;\n}\n.x6-edge .connection-wrap {\n  cursor: move;\n  opacity: 0;\n  fill: none;\n  stroke: #000;\n  stroke-width: 15;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n.x6-edge .connection-wrap:hover {\n  opacity: 0.4;\n  stroke-opacity: 0.4;\n}\n.x6-edge .vertices {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .vertices .vertex {\n  fill: #1abc9c;\n}\n.x6-edge .vertices .vertex :hover {\n  fill: #34495e;\n  stroke: none;\n}\n.x6-edge .vertices .vertex-remove {\n  cursor: pointer;\n  fill: #fff;\n}\n.x6-edge .vertices .vertex-remove-area {\n  cursor: pointer;\n  opacity: 0.1;\n}\n.x6-edge .vertices .vertex-group:hover .vertex-remove-area {\n  opacity: 1;\n}\n.x6-edge .arrowheads {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .arrowheads .arrowhead {\n  fill: #1abc9c;\n}\n.x6-edge .arrowheads .arrowhead :hover {\n  fill: #f39c12;\n  stroke: none;\n}\n.x6-edge .tools {\n  cursor: pointer;\n  opacity: 0;\n}\n.x6-edge .tools .tool-options {\n  display: none;\n}\n.x6-edge .tools .tool-remove circle {\n  fill: #f00;\n}\n.x6-edge .tools .tool-remove path {\n  fill: #fff;\n}\n.x6-edge:hover .vertices,\n.x6-edge:hover .arrowheads,\n.x6-edge:hover .tools {\n  opacity: 1;\n}\n.x6-highlight-opacity {\n  opacity: 0.3;\n}\n.x6-cell-tool-editor {\n  position: relative;\n  display: inline-block;\n  min-height: 1em;\n  margin: 0;\n  padding: 0;\n  line-height: 1;\n  white-space: normal;\n  text-align: center;\n  vertical-align: top;\n  overflow-wrap: normal;\n  outline: none;\n  transform-origin: 0 0;\n  -webkit-user-drag: none;\n}\n.x6-edge-tool-editor {\n  border: 1px solid #275fc5;\n  border-radius: 2px;\n}\n")},e.prototype.dispose=function(){Nd("core")},o([e.dispose()],e.prototype,"dispose",null),e}(mb);!function(t){t.get=function(e){var n=e.grid;e.panning,e.mousewheel,e.embedding;var o=i(e,["grid","panning","mousewheel","embedding"]),s=e.container;if(null==s)throw new Error("Ensure the container of the graph is specified and valid");null==o.width&&(o.width=s.clientWidth),null==o.height&&(o.height=s.clientHeight);var a=tl({},t.defaults,o),l={size:10,visible:!1};return a.grid="number"==typeof n?{size:n,visible:!1}:r(r({},l),"boolean"==typeof n?{visible:n}:n),["panning","mousewheel","embedding"].forEach((function(t){var n=e[t];"boolean"==typeof n?a[t].enabled=n:a[t]=r(r({},a[t]),n)})),a}}(vb||(vb={})),function(t){t.defaults={x:0,y:0,scaling:{min:.01,max:16},grid:{size:10,visible:!1},background:!1,panning:{enabled:!1,eventTypes:["leftMouseDown"]},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:Vy.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:Vy.prefix("available-magnet")}}},connecting:{snap:!1,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",router:"normal",connector:"normal",validateConnection:function(t){var e=t.type,n=t.sourceView,r=t.targetView;return null!=("target"===e?r:n)},createEdge:function(){return new rb}},translating:{restrict:!1},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:function(){return!0}},moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},async:!0,virtual:!1,guard:function(){return!1}}}(vb||(vb={}));var wb,xb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,"elem",{get:function(){return this.view.grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){return this.options.grid},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.startListening(),this.draw(this.grid)},e.prototype.startListening=function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)},e.prototype.stopListening=function(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)},e.prototype.setVisible=function(t){this.grid.visible!==t&&(this.grid.visible=t,this.update())},e.prototype.getGridSize=function(){return this.grid.size},e.prototype.setGridSize=function(t){this.grid.size=Math.max(t,1),this.update()},e.prototype.show=function(){this.setVisible(!0),this.update()},e.prototype.hide=function(){this.setVisible(!1),this.update()},e.prototype.clear=function(){this.elem.style.backgroundImage=""},e.prototype.draw=function(t){this.clear(),this.instance=null,Object.assign(this.grid,t),this.patterns=this.resolveGrid(t),this.update()},e.prototype.update=function(t){void 0===t&&(t={});var e=this.grid.size;if(e<=1||!this.grid.visible)return this.clear();var n=this.graph.matrix(),o=this.getInstance(),s=Array.isArray(t)?t:[t];this.patterns.forEach((function(t,a){var l="pattern_".concat(a),u=n.a||1,c=n.d||1,h=t.update,p=t.markup,f=i(t,["update","markup"]),d=r(r(r({},f),s[a]),{sx:u,sy:c,ox:n.e||0,oy:n.f||0,width:e*u,height:e*c});o.has(l)||o.add(l,wf.create("pattern",{id:l,patternUnits:"userSpaceOnUse"},wf.createVectors(p)).node);var g=o.get(l);"function"==typeof h&&h(g.childNodes[0],d);var y=d.ox%d.width;y<0&&(y+=d.width);var v=d.oy%d.height;v<0&&(v+=d.height),Hp(g,{x:y,y:v,width:d.width,height:d.height})}));var a=(new XMLSerializer).serializeToString(o.root),l="url(data:image/svg+xml;base64,".concat(btoa(a),")");this.elem.style.backgroundImage=l},e.prototype.getInstance=function(){return this.instance||(this.instance=new pg),this.instance},e.prototype.resolveGrid=function(t){if(!t)return[];var e=t.type;if(null==e)return[r(r({},pg.presets.dot),t.args)];var n=pg.registry.get(e);if(n){var i=t.args||[];return Array.isArray(i)||(i=[i]),Array.isArray(n)?n.map((function(t,e){return r(r({},t),i[e])})):[r(r({},n),i[0])]}return pg.registry.onNotFound(e)},e.prototype.dispose=function(){this.stopListening(),this.clear()},o([mb.dispose()],e.prototype,"dispose",null),e}(mb),Pb=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return n(i,e),Object.defineProperty(i.prototype,"container",{get:function(){return this.graph.view.container},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"viewport",{get:function(){return this.graph.view.viewport},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stage",{get:function(){return this.graph.view.stage},enumerable:!1,configurable:!0}),i.prototype.init=function(){this.resize()},i.prototype.getMatrix=function(){var t=this.viewport.getAttribute("transform");return t!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=t),Jf(this.viewportMatrix)},i.prototype.setMatrix=function(t){var e=Jf(t),n=Zf(e);this.viewport.setAttribute("transform",n),this.viewportMatrix=e,this.viewportTransformString=n},i.prototype.resize=function(t,e){var n=void 0===t?this.options.width:t,i=void 0===e?this.options.height:e;this.options.width=n,this.options.height=i,"number"==typeof n&&(n=Math.round(n)),"number"==typeof i&&(i=Math.round(i)),this.container.style.width=null==n?"":"".concat(n,"px"),this.container.style.height=null==i?"":"".concat(i,"px");var o=this.getComputedSize();return this.graph.trigger("resize",r({},o)),this},i.prototype.getComputedSize=function(){var t=this.options.width,e=this.options.height;return Ia(t)||(t=this.container.clientWidth),Ia(e)||(e=this.container.clientHeight),{width:t,height:e}},i.prototype.getScale=function(){return ed(this.getMatrix())},i.prototype.scale=function(t,e,n,r){if(void 0===e&&(e=t),void 0===n&&(n=0),void 0===r&&(r=0),t=this.clampScale(t),e=this.clampScale(e),n||r){var i=this.getTranslation(),o=i.tx-n*(t-1),s=i.ty-r*(e-1);o===i.tx&&s===i.ty||this.translate(o,s)}var a=this.getMatrix();return a.a=t,a.d=e,this.setMatrix(a),this.graph.trigger("scale",{sx:t,sy:e,ox:n,oy:r}),this},i.prototype.clampScale=function(t){var e=this.graph.options.scaling;return Qr(t,e.min||.01,e.max||16)},i.prototype.getZoom=function(){return this.getScale().sx},i.prototype.zoom=function(t,e){e=e||{};var n=t,r=t,i=this.getScale(),o=this.getComputedSize(),s=o.width/2,a=o.height/2;if(e.absolute||(n+=i.sx,r+=i.sy),e.scaleGrid&&(n=Math.round(n/e.scaleGrid)*e.scaleGrid,r=Math.round(r/e.scaleGrid)*e.scaleGrid),e.maxScale&&(n=Math.min(e.maxScale,n),r=Math.min(e.maxScale,r)),e.minScale&&(n=Math.max(e.minScale,n),r=Math.max(e.minScale,r)),e.center&&(s=e.center.x,a=e.center.y),n=this.clampScale(n),r=this.clampScale(r),s||a){var l=this.getTranslation(),u=s-(s-l.tx)*(n/i.sx),c=a-(a-l.ty)*(r/i.sy);u===l.tx&&c===l.ty||this.translate(u,c)}return this.scale(n,r),this},i.prototype.getRotation=function(){return nd(this.getMatrix())},i.prototype.rotate=function(e,n,r){if(null==n||null==r){var i=t.Util.getBBox(this.stage);n=i.width/2,r=i.height/2}var o=this.getMatrix().translate(n,r).rotate(e).translate(-n,-r);return this.setMatrix(o),this},i.prototype.getTranslation=function(){return rd(this.getMatrix())},i.prototype.translate=function(t,e){var n=this.getMatrix();n.e=t||0,n.f=e||0,this.setMatrix(n);var i=this.getTranslation();return this.options.x=i.tx,this.options.y=i.ty,this.graph.trigger("translate",r({},i)),this},i.prototype.setOrigin=function(t,e){return this.translate(t||0,e||0)},i.prototype.fitToContent=function(t,e,n,r){if("object"==typeof t){var i=t;t=i.gridWidth||1,e=i.gridHeight||1,n=i.padding||0,r=i}else t=t||1,e=e||1,n=n||0,null==r&&(r={});var o=Uh(n),s=r.border||0,a=r.contentArea?Vd.create(r.contentArea):this.getContentArea(r);s>0&&a.inflate(s);var l=this.getScale(),u=this.getTranslation(),c=l.sx,h=l.sy;a.x*=c,a.y*=h,a.width*=c,a.height*=h;var p=Math.max(Math.ceil((a.width+a.x)/t),1)*t,f=Math.max(Math.ceil((a.height+a.y)/e),1)*e,d=0,g=0;("negative"===r.allowNewOrigin&&a.x<0||"positive"===r.allowNewOrigin&&a.x>=0||"any"===r.allowNewOrigin)&&(d=Math.ceil(-a.x/t)*t,p+=d+=o.left),("negative"===r.allowNewOrigin&&a.y<0||"positive"===r.allowNewOrigin&&a.y>=0||"any"===r.allowNewOrigin)&&(g=Math.ceil(-a.y/e)*e,f+=g+=o.top),p+=o.right,f+=o.bottom,p=Math.max(p,r.minWidth||0),f=Math.max(f,r.minHeight||0),p=Math.min(p,r.maxWidth||Number.MAX_SAFE_INTEGER),f=Math.min(f,r.maxHeight||Number.MAX_SAFE_INTEGER);var y=this.getComputedSize(),v=p!==y.width||f!==y.height;return(d!==u.tx||g!==u.ty)&&this.translate(d,g),v&&this.resize(p,f),new Vd(-d/c,-g/h,p/c,f/h)},i.prototype.scaleContentToFit=function(t){void 0===t&&(t={}),this.scaleContentToFitImpl(t)},i.prototype.scaleContentToFitImpl=function(t,e){var n,r;if(void 0===t&&(t={}),void 0===e&&(e=!0),t.contentArea){var i=t.contentArea;n=this.graph.localToGraph(i),r=jd.create(i)}else n=this.getContentBBox(t),r=this.graph.graphToLocal(n);if(n.width&&n.height){var o,s=Uh(t.padding),a=t.minScale||0,l=t.maxScale||Number.MAX_SAFE_INTEGER,u=t.minScaleX||a,c=t.maxScaleX||l,h=t.minScaleY||a,p=t.maxScaleY||l;if(t.viewportArea)o=t.viewportArea;else{var f=this.getComputedSize(),d=this.getTranslation();o={x:d.tx,y:d.ty,width:f.width,height:f.height}}o=Vd.create(o).moveAndExpand({x:s.left,y:s.top,width:-s.left-s.right,height:-s.top-s.bottom});var g=this.getScale(),y=o.width/n.width*g.sx,v=o.height/n.height*g.sy;!1!==t.preserveAspectRatio&&(y=v=Math.min(y,v));var m=t.scaleGrid;if(m&&(y=m*Math.floor(y/m),v=m*Math.floor(v/m)),y=Qr(y,u,c),v=Qr(v,h,p),this.scale(y,v),e){var b=this.options,w=o.x-r.x*y-b.x,x=o.y-r.y*v-b.y;this.translate(w,x)}}},i.prototype.getContentArea=function(e){return void 0===e&&(e={}),!1!==e.useCellGeometry?this.model.getAllCellsBBox()||new Vd:t.Util.getBBox(this.stage)},i.prototype.getContentBBox=function(t){return void 0===t&&(t={}),this.graph.localToGraph(this.getContentArea(t))},i.prototype.getGraphArea=function(){var t=Vd.fromSize(this.getComputedSize());return this.graph.graphToLocal(t)},i.prototype.zoomToRect=function(t,e){void 0===e&&(e={});var n=Vd.create(t),r=this.graph;e.contentArea=n,null==e.viewportArea&&(e.viewportArea={x:r.options.x,y:r.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(e,!1);var i=n.getCenter();return this.centerPoint(i.x,i.y),this},i.prototype.zoomToFit=function(t){return void 0===t&&(t={}),this.zoomToRect(this.getContentArea(t),t)},i.prototype.centerPoint=function(t,e){var n=this.getComputedSize(),r=this.getScale(),i=this.getTranslation(),o=n.width/2,s=n.height/2;e="number"==typeof e?e:s,t=o-(t="number"==typeof t?t:o)*r.sx,e=s-e*r.sy,i.tx===t&&i.ty===e||this.translate(t,e)},i.prototype.centerContent=function(t){var e=this.graph.getContentArea(t).getCenter();this.centerPoint(e.x,e.y)},i.prototype.centerCell=function(t){return this.positionCell(t,"center")},i.prototype.positionPoint=function(t,e,n){var r=this.getComputedSize();(e=Gh(e,Math.max(0,r.width)))<0&&(e=r.width+e),(n=Gh(n,Math.max(0,r.height)))<0&&(n=r.height+n);var i=this.getTranslation(),o=this.getScale(),s=e-t.x*o.sx,a=n-t.y*o.sy;i.tx===s&&i.ty===a||this.translate(s,a)},i.prototype.positionRect=function(t,e){var n=Vd.create(t);switch(e){case"center":return this.positionPoint(n.getCenter(),"50%","50%");case"top":return this.positionPoint(n.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(n.getTopRight(),"100%",0);case"right":return this.positionPoint(n.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(n.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(n.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(n.getBottomLeft(),0,"100%");case"left":return this.positionPoint(n.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(n.getTopLeft(),0,0);default:return this}},i.prototype.positionCell=function(t,e){var n=t.getBBox();return this.positionRect(n,e)},i.prototype.positionContent=function(t,e){var n=this.graph.getContentArea(e);return this.positionRect(n,t)},i}(mb),Ab=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,"elem",{get:function(){return this.view.background},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.startListening(),this.options.background&&this.draw(this.options.background)},e.prototype.startListening=function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)},e.prototype.stopListening=function(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)},e.prototype.updateBackgroundImage=function(t){void 0===t&&(t={});var e=t.size||"auto auto",n=t.position||"center",r=this.graph.transform.getScale(),i=this.graph.translate();if("object"==typeof n){var o=i.tx+r.sx*(n.x||0),s=i.ty+r.sy*(n.y||0);n="".concat(o,"px ").concat(s,"px")}"object"==typeof e&&(e=Vd.fromSize(e).scale(r.sx,r.sy),e="".concat(e.width,"px ").concat(e.height,"px")),this.elem.style.backgroundSize=e,this.elem.style.backgroundPosition=n},e.prototype.drawBackgroundImage=function(t,e){if(void 0===e&&(e={}),t instanceof HTMLImageElement){var n=this.optionsCache;if(!n||n.image===e.image){var r,i=e.opacity,o=e.size,s=e.repeat||"no-repeat",a=fg.registry.get(s);if("function"==typeof a){var l=e.quality||1;t.width*=l,t.height*=l;var u=a(t,e);if(!(u instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");r=u.toDataURL("image/png"),s=e.repeat&&s!==e.repeat?e.repeat:"repeat","object"==typeof o?(o.width*=u.width/t.width,o.height*=u.height/t.height):void 0===o&&(e.size={width:u.width/l,height:u.height/l})}else r=t.src,void 0===o&&(e.size={width:t.width,height:t.height});null!=n&&"object"==typeof e.size&&e.image===n.image&&e.repeat===n.repeat&&e.quality===n.quality&&(n.size=Xi(e.size));var c=this.elem.style;c.backgroundImage="url(".concat(r,")"),c.backgroundRepeat=s,c.opacity=null==i||i>=1?"":"".concat(i),this.updateBackgroundImage(e)}}else this.elem.style.backgroundImage=""},e.prototype.updateBackgroundColor=function(t){this.elem.style.backgroundColor=t||""},e.prototype.updateBackgroundOptions=function(t){this.graph.options.background=t},e.prototype.update=function(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)},e.prototype.draw=function(t){var e=this,n=t||{};if(this.updateBackgroundOptions(t),this.updateBackgroundColor(n.color),n.image){this.optionsCache=Xi(n);var r=document.createElement("img");r.onload=function(){return e.drawBackgroundImage(r,t)},r.setAttribute("crossorigin","anonymous"),r.src=n.image}else this.drawBackgroundImage(null),this.optionsCache=null},e.prototype.clear=function(){this.draw()},e.prototype.dispose=function(){this.clear(),this.stopListening()},o([mb.dispose()],e.prototype,"dispose",null),e}(mb),Cb=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),Object.defineProperty(r.prototype,"widgetOptions",{get:function(){return this.options.panning},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pannable",{get:function(){return this.widgetOptions&&!0===this.widgetOptions.enabled},enumerable:!1,configurable:!0}),r.prototype.init=function(){this.startListening(),this.updateClassName()},r.prototype.startListening=function(){var t=this.widgetOptions.eventTypes;t&&(t.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),t.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),yd.on(this.graph.container,"mousedown",this.onRightMouseDown)),t.includes("mouseWheel")&&(this.mousewheelHandle=new bd(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()))},r.prototype.stopListening=function(){var t=this.widgetOptions.eventTypes;t&&(t.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),t.includes("rightMouseDown")&&yd.off(this.graph.container,"mousedown",this.onRightMouseDown),t.includes("mouseWheel")&&this.mousewheelHandle&&this.mousewheelHandle.disable())},r.prototype.preparePanning=function(t){var e=t.e,n=this.graph.getPlugin("selection"),r=n&&n.allowRubberband(e,!0);(this.allowPanning(e,!0)||this.allowPanning(e)&&!r)&&this.startPanning(e)},r.prototype.allowPanning=function(e,n){return this.pannable&&t.ModifierKey.isMatch(e,this.widgetOptions.modifiers,n)},r.prototype.startPanning=function(t){var e=this.view.normalizeEvent(t);this.clientX=e.clientX,this.clientY=e.clientY,this.panning=!0,this.updateClassName(),yd.on(document.body,{"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),yd.on(window,"mouseup.panning",this.stopPanning.bind(this))},r.prototype.pan=function(t){var e=this.view.normalizeEvent(t),n=e.clientX-this.clientX,r=e.clientY-this.clientY;this.clientX=e.clientX,this.clientY=e.clientY,this.graph.translateBy(n,r)},r.prototype.stopPanning=function(t){this.panning=!1,this.updateClassName(),yd.off(document.body,".panning"),yd.off(window,".panning")},r.prototype.updateClassName=function(){var t=this.view.container,e=this.view.prefixClassName("graph-panning"),n=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(fp(t,e),dp(t,n)):(dp(t,e),fp(t,n)):(dp(t,e),dp(t,n))},r.prototype.onRightMouseDown=function(t){2===t.button&&this.allowPanning(t,!0)&&this.startPanning(t)},r.prototype.allowMouseWheel=function(t){return this.pannable&&!t.ctrlKey},r.prototype.onMouseWheel=function(t,e,n){t.ctrlKey||this.graph.translateBy(-e,-n)},r.prototype.autoPanning=function(t,e){var n=10,r=this.graph.getGraphArea(),i=0,o=0;t<=r.left+n&&(i=-10),e<=r.top+n&&(o=-10),t>=r.right-n&&(i=n),e>=r.bottom-n&&(o=n),0===i&&0===o||this.graph.translateBy(-i,-o)},r.prototype.enablePanning=function(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())},r.prototype.disablePanning=function(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())},r.prototype.dispose=function(){this.stopListening()},o([mb.dispose()],r.prototype,"dispose",null),r}(mb),Eb=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.cumulatedFactor=1,t}return n(r,e),Object.defineProperty(r.prototype,"widgetOptions",{get:function(){return this.options.mousewheel},enumerable:!1,configurable:!0}),r.prototype.init=function(){this.container=this.graph.container,this.target=this.widgetOptions.global?document:this.container,this.mousewheelHandle=new bd(this.target,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.widgetOptions.enabled&&this.enable(!0)},Object.defineProperty(r.prototype,"disabled",{get:function(){return!0!==this.widgetOptions.enabled},enumerable:!1,configurable:!0}),r.prototype.enable=function(t){(this.disabled||t)&&(this.widgetOptions.enabled=!0,this.mousewheelHandle.enable())},r.prototype.disable=function(){this.disabled||(this.widgetOptions.enabled=!1,this.mousewheelHandle.disable())},r.prototype.allowMouseWheel=function(e){var n=this.widgetOptions.guard;return(null==n||n.call(e))&&t.ModifierKey.isMatch(e,this.widgetOptions.modifiers)},r.prototype.onMouseWheel=function(e){var n=this.widgetOptions.guard;if((null==n||n.call(e))&&t.ModifierKey.isMatch(e,this.widgetOptions.modifiers)){var r=this.widgetOptions.factor||1.2;null==this.currentScale&&(this.startPos={x:e.clientX,y:e.clientY},this.currentScale=this.graph.transform.getScale().sx),e.deltaY<0?this.currentScale<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*r*20)/20/this.currentScale:this.currentScale<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*(1/r)*20)/20/this.currentScale,this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);var i=this.currentScale,o=this.graph.transform.clampScale(i*this.cumulatedFactor);if((o=Qr(o,this.widgetOptions.minScale||Number.MIN_SAFE_INTEGER,this.widgetOptions.maxScale||Number.MAX_SAFE_INTEGER))!==i)if(this.widgetOptions.zoomAtMousePosition){var s=!!this.graph.getPlugin("scroller")?this.graph.clientToLocal(this.startPos):this.graph.clientToGraph(this.startPos);this.graph.zoom(o,{absolute:!0,center:s.clone()})}else this.graph.zoom(o,{absolute:!0});this.currentScale=null,this.cumulatedFactor=1}},r.prototype.dispose=function(){this.disable()},o([a.dispose()],r.prototype,"dispose",null),r}(mb),Mb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.init=function(){this.resetRenderArea=Fo(this.resetRenderArea,200),this.resetRenderArea(),this.startListening()},e.prototype.startListening=function(){this.graph.on("translate",this.resetRenderArea,this),this.graph.on("scale",this.resetRenderArea,this),this.graph.on("resize",this.resetRenderArea,this)},e.prototype.stopListening=function(){this.graph.off("translate",this.resetRenderArea,this),this.graph.off("scale",this.resetRenderArea,this),this.graph.off("resize",this.resetRenderArea,this)},e.prototype.enableVirtualRender=function(){this.options.virtual=!0,this.resetRenderArea()},e.prototype.disableVirtualRender=function(){this.options.virtual=!1,this.graph.renderer.setRenderArea(void 0)},e.prototype.resetRenderArea=function(){if(this.options.virtual){var t=this.graph.getGraphArea();this.graph.renderer.setRenderArea(t)}},e.prototype.dispose=function(){this.stopListening()},o([mb.dispose()],e.prototype,"dispose",null),e}(mb),Sb=function(){function t(){this.isFlushing=!1,this.isFlushPending=!1,this.scheduleId=0,this.queue=[],this.frameInterval=33,this.initialTime=Date.now()}return t.prototype.queueJob=function(t){if(t.priority===wb.PRIOR)t.cb();else{var e=this.findInsertionIndex(t);e>=0&&this.queue.splice(e,0,t)}},t.prototype.queueFlush=function(){this.isFlushing||this.isFlushPending||(this.isFlushPending=!0,this.scheduleJob())},t.prototype.queueFlushSync=function(){this.isFlushing||this.isFlushPending||(this.isFlushPending=!0,this.flushJobsSync())},t.prototype.clearJobs=function(){this.queue.length=0,this.isFlushing=!1,this.isFlushPending=!1,this.cancelScheduleJob()},t.prototype.flushJobs=function(){this.isFlushPending=!1,this.isFlushing=!0;for(var t,e=this.getCurrentTime();t=this.queue.shift();){try{t.cb()}catch(t){}if(this.getCurrentTime()-e>=this.frameInterval)break}this.isFlushing=!1,this.queue.length&&this.queueFlush()},t.prototype.flushJobsSync=function(){var t;for(this.isFlushPending=!1,this.isFlushing=!0;t=this.queue.shift();)try{t.cb()}catch(t){console.log(t)}this.isFlushing=!1},t.prototype.findInsertionIndex=function(t){for(var e=0;this.queue[e]&&this.queue[e].priority>=t.priority;)e+=1;return e},t.prototype.scheduleJob=function(){"requestIdleCallback"in window?(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.requestIdleCallback(this.flushJobs.bind(this),{timeout:100})):(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.setTimeout(this.flushJobs.bind(this)))},t.prototype.cancelScheduleJob=function(){"cancelIdleCallback"in window?(this.scheduleId&&window.cancelIdleCallback(this.scheduleId),this.scheduleId=0):(this.scheduleId&&clearTimeout(this.scheduleId),this.scheduleId=0)},t.prototype.getCurrentTime=function(){return"object"==typeof performance&&"function"==typeof performance.now?performance.now():Date.now()-this.initialTime},t}();!function(t){t[t.RenderEdge=1]="RenderEdge",t[t.RenderNode=2]="RenderNode",t[t.Update=3]="Update",t[t.PRIOR=100]="PRIOR"}(wb||(wb={}));var Tb=function(e){function i(t){var n=e.call(this)||this;return n.views={},n.willRemoveViews={},n.queue=new Sb,n.graph=t,n.init(),n}return n(i,e),Object.defineProperty(i.prototype,"model",{get:function(){return this.graph.model},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"container",{get:function(){return this.graph.view.stage},enumerable:!1,configurable:!0}),i.prototype.init=function(){this.startListening()},i.prototype.startListening=function(){this.model.on("reseted",this.onModelReseted,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)},i.prototype.stopListening=function(){this.model.off("reseted",this.onModelReseted,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)},i.prototype.onModelReseted=function(t){var e=t.options;this.queue.clearJobs(),this.removeZPivots(),this.resetViews(),this.renderViews(this.model.getCells(),e)},i.prototype.onCellAdded=function(t){var e=t.cell,n=t.options;this.renderViews([e],n)},i.prototype.onCellRemoved=function(t){var e=t.cell;this.removeViews([e])},i.prototype.onCellZIndexChanged=function(t){var e=t.cell,n=t.options,r=this.views[e.id];r&&this.requestViewUpdate(r.view,i.FLAG_INSERT,n,wb.Update,!0)},i.prototype.onCellVisibleChanged=function(t){var e=t.cell,n=t.current;this.toggleVisible(e,!!n)},i.prototype.requestViewUpdate=function(t,e,n,r,i){var o=this;void 0===n&&(n={}),void 0===r&&(r=wb.Update),void 0===i&&(i=!0);var s=t.cell.id,a=this.views[s];if(a){a.flag=e,a.options=n;var l=t.hasAction(e,["translate","resize","rotate"]);t.isNodeView()&&l&&(r=wb.PRIOR,i=!1),this.queue.queueJob({id:s,priority:r,cb:function(){o.renderViewInArea(t,e,n)}}),this.getEffectedEdges(t).forEach((function(t){o.requestViewUpdate(t.view,t.flag,n,r,!1)})),i&&this.flush()}},i.prototype.setRenderArea=function(t){this.renderArea=t,this.flushWaittingViews()},i.prototype.isViewMounted=function(t){if(null==t)return!1;var e=this.views[t.cell.id];return!!e&&e.state===i.ViewState.MOUNTED},i.prototype.renderViews=function(t,e){var n=this;void 0===e&&(e={}),t.sort((function(t,e){return t.isNode()&&e.isEdge()?-1:0})),t.forEach((function(t){var r=t.id,o=0,s=n.views[r];if(s)o=i.FLAG_INSERT;else{var a=n.createCellView(t);a&&(a.graph=n.graph,o=i.FLAG_INSERT|a.getBootstrapFlag(),s={view:a,flag:o,options:e,state:i.ViewState.CREATED},n.views[r]=s)}s&&n.requestViewUpdate(s.view,o,e,n.getRenderPriority(s.view),!1)})),this.flush()},i.prototype.renderViewInArea=function(t,e,n){var r=this;void 0===n&&(n={});var o=t.cell,s=o.id,a=this.views[s];if(a){var l=0;this.isInRenderArea(t)||a.state===i.ViewState.MOUNTED?(l=this.updateView(t,e,n),a.flag=l):a.state=i.ViewState.WAITTING,l&&o.isEdge()&&0==(l&t.getFlag(["source","target"]))&&this.queue.queueJob({id:s,priority:wb.RenderEdge,cb:function(){r.updateView(t,e,n)}})}},i.prototype.removeViews=function(t){var e=this;t.forEach((function(t){var n=t.id,r=e.views[n];r&&(e.willRemoveViews[n]=r,delete e.views[n],e.queue.queueJob({id:n,priority:e.getRenderPriority(r.view),cb:function(){e.removeView(r.view)}}))})),this.flush()},i.prototype.flush=function(){this.graph.options.async?this.queue.queueFlush():this.queue.queueFlushSync()},i.prototype.flushWaittingViews=function(){for(var t=Object.keys(this.views),e=0,n=t.length;e<n;e+=1){var r=this.views[t[e]];if(r&&r.state===i.ViewState.WAITTING){var o=r.view,s=r.flag,a=r.options;this.requestViewUpdate(o,s,a,this.getRenderPriority(o),!1)}}this.flush()},i.prototype.updateView=function(e,n,r){if(void 0===r&&(r={}),null==e)return 0;if(t.CellView.isCellView(e)){if(n&i.FLAG_REMOVE)return this.removeView(e.cell),0;n&i.FLAG_INSERT&&(this.insertView(e),n^=i.FLAG_INSERT)}return n?e.confirmUpdate(n,r):0},i.prototype.insertView=function(t){var e=this.views[t.cell.id];if(e){var n=t.cell.getZIndex(),r=this.addZPivot(n);this.container.insertBefore(t.container,r),t.cell.isVisible()||this.toggleVisible(t.cell,!1),e.state=i.ViewState.MOUNTED}},i.prototype.resetViews=function(){var t=this;this.willRemoveViews=r({},this.views),Object.keys(this.willRemoveViews).forEach((function(e){var n=t.willRemoveViews[e];n&&t.removeView(n.view)})),this.views={},this.willRemoveViews={}},i.prototype.removeView=function(t){var e=t.cell,n=this.willRemoveViews[e.id];t&&(n.view.remove(),delete this.willRemoveViews[e.id])},i.prototype.toggleVisible=function(t,e){for(var n=this.model.getConnectedEdges(t),r=0,i=n.length;r<i;r+=1){var o=n[r];if(e){var s=o.getSourceCell(),a=o.getTargetCell();if(s&&!s.isVisible()||a&&!a.isVisible())continue;this.toggleVisible(o,!0)}else this.toggleVisible(o,!1)}var l=this.views[t.id];l&&df(l.view.container,{display:e?"unset":"none"})},i.prototype.addZPivot=function(t){void 0===t&&(t=0),null==this.zPivots&&(this.zPivots={});var e=this.zPivots,n=e[t];if(n)return n;n=e[t]=document.createComment("z-index:".concat(t+1));var r=-1/0;for(var i in e){var o=+i;o<t&&o>r&&(r=o)}var s=this.container;if(r!==-1/0){var a=e[r];s.insertBefore(n,a.nextSibling)}else s.insertBefore(n,s.firstChild);return n},i.prototype.removeZPivots=function(){var t=this;this.zPivots&&Object.keys(this.zPivots).forEach((function(e){var n=t.zPivots[e];n&&n.parentNode&&n.parentNode.removeChild(n)})),this.zPivots={}},i.prototype.createCellView=function(e){var n=this.graph.options.createCellView;if(n){var r=lh(n,this.graph,e);if(r||null===r)return r}var i=e.view,o={graph:this.graph};if(null!=i&&"string"==typeof i){var s=t.CellView.registry.get(i);return s?new s(e,o):t.CellView.registry.onNotFound(i)}return e.isNode()?new t.NodeView(e,o):e.isEdge()?new t.EdgeView(e,o):null},i.prototype.getEffectedEdges=function(t){for(var e=[],n=t.cell,r=this.model.getConnectedEdges(n),i=0,o=r.length;i<o;i+=1){var s=r[i],a=this.views[s.id];if(a){var l=a.view,u=["update"];s.getTargetCell()===n&&u.push("target"),s.getSourceCell()===n&&u.push("source"),e.push({id:s.id,view:l,flag:l.getFlag(u)})}}return e},i.prototype.isInRenderArea=function(t){return!this.renderArea||this.renderArea.isIntersectWithRect(t.cell.getBBox())},i.prototype.getRenderPriority=function(t){return t.cell.isNode()?wb.RenderNode:wb.RenderEdge},i.prototype.dispose=function(){this.stopListening()},o([a.dispose()],i.prototype,"dispose",null),i}(a);!function(t){t.FLAG_INSERT=1<<30,t.FLAG_REMOVE=1<<29,t.FLAG_RENDER=67108863}(Tb||(Tb={})),function(t){var e;(e=t.ViewState||(t.ViewState={}))[e.CREATED=0]="CREATED",e[e.MOUNTED=1]="MOUNTED",e[e.WAITTING=2]="WAITTING"}(Tb||(Tb={}));var kb,Ob=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.schedule=new Tb(t.graph),t}return n(r,e),r.prototype.requestViewUpdate=function(t,e,n){void 0===n&&(n={}),this.schedule.requestViewUpdate(t,e,n)},r.prototype.isViewMounted=function(t){return this.schedule.isViewMounted(t)},r.prototype.setRenderArea=function(t){this.schedule.setRenderArea(t)},r.prototype.findViewByElem=function(t){if(null==t)return null;var e=this.options.container,n="string"==typeof t?e.querySelector(t):t instanceof Element?t:t[0];if(n){var r=this.graph.view.findAttr("data-cell-id",n);if(r){var i=this.schedule.views;if(i[r])return i[r].view}}return null},r.prototype.findViewByCell=function(e){if(null==e)return null;var n=t.Cell.isCell(e)?e.id:e,r=this.schedule.views;return r[n]?r[n].view:null},r.prototype.findViewsFromPoint=function(e){var n=this,r={x:e.x,y:e.y};return this.model.getCells().map((function(t){return n.findViewByCell(t)})).filter((function(e){return null!=e&&t.Util.getBBox(e.container,{target:n.view.stage}).containsPoint(r)}))},r.prototype.findViewsInArea=function(e,n){var r=this;void 0===n&&(n={});var i=Vd.create(e);return this.model.getNodes().map((function(t){return r.findViewByCell(t)})).filter((function(e){if(e){var o=t.Util.getBBox(e.container,{target:r.graph.view.stage});return n.strict?i.containsRect(o):i.isIntersectWithRect(o)}return!1}))},r.prototype.findEdgeViewsInArea=function(e,n){var r=this;void 0===n&&(n={});var i=Vd.create(e);return this.model.getEdges().map((function(t){return r.findViewByCell(t)})).filter((function(e){if(e){var o=t.Util.getBBox(e.container,{target:r.view.stage});return 0===o.width?o.inflate(1,0):0===o.height&&o.inflate(0,1),n.strict?i.containsRect(o):i.isIntersectWithRect(o)}return!1}))},r.prototype.dispose=function(){this.schedule.dispose()},o([mb.dispose()],r.prototype,"dispose",null),r}(mb),Nb=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return n(o,e),Object.defineProperty(o.prototype,"cid",{get:function(){return this.graph.view.cid},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"svg",{get:function(){return this.view.svg},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"defs",{get:function(){return this.view.defs},enumerable:!1,configurable:!0}),o.prototype.isDefined=function(t){return null!=this.svg.getElementById(t)},o.prototype.filter=function(e){var n=e.id,i=e.name;if(n||(n="filter-".concat(i,"-").concat(this.cid,"-").concat(jh(JSON.stringify(e)))),!this.isDefined(n)){var o=wg.registry.get(i);if(null==o)return wg.registry.onNotFound(i);var s=o(e.args||{}),a=r(r({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},e.attrs),{id:n});wf.create(t.Markup.sanitize(s),a).appendTo(this.defs)}return n},o.prototype.gradient=function(t){var e=t.id,n=t.type;if(e||(e="gradient-".concat(n,"-").concat(this.cid,"-").concat(jh(JSON.stringify(t)))),!this.isDefined(e)){var i=t.stops.map((function(t){var e=null!=t.opacity&&Number.isFinite(t.opacity)?t.opacity:1;return'<stop offset="'.concat(t.offset,'" stop-color="').concat(t.color,'" stop-opacity="').concat(e,'"/>')})),o="<".concat(n,">").concat(i.join(""),"</").concat(n,">"),s=r({id:e},t.attrs);wf.create(o,s).appendTo(this.defs)}return e},o.prototype.marker=function(t){var e=t.id,n=t.refX,o=t.refY,s=t.markerUnits,a=t.markerOrient,l=t.tagName,u=t.children,c=i(t,["id","refX","refY","markerUnits","markerOrient","tagName","children"]),h=e;if(h||(h="marker-".concat(this.cid,"-").concat(jh(JSON.stringify(t)))),!this.isDefined(h)){"path"!==l&&delete c.d;var p=wf.create("marker",{refX:n,refY:o,id:h,overflow:"visible",orient:null!=a?a:"auto",markerUnits:s||"userSpaceOnUse"},u?u.map((function(t){var e=t.tagName,n=i(t,["tagName"]);return wf.create("".concat(e)||"path",Jp(r(r({},c),n)))})):[wf.create(l||"path",Jp(c))]);this.defs.appendChild(p.node)}return h},o.prototype.remove=function(t){var e=this.svg.getElementById(t);e&&e.parentNode&&e.parentNode.removeChild(e)},o}(mb),_b=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.getClientMatrix=function(){return Jf(this.view.stage.getScreenCTM())},r.prototype.getClientOffset=function(){var t=this.view.svg.getBoundingClientRect();return new jd(t.left,t.top)},r.prototype.getPageOffset=function(){return this.getClientOffset().translate(window.scrollX,window.scrollY)},r.prototype.snapToGrid=function(t,e){return("number"==typeof t?this.clientToLocalPoint(t,e):this.clientToLocalPoint(t.x,t.y)).snapToGrid(this.graph.getGridSize())},r.prototype.localToGraphPoint=function(e,n){var r=jd.create(e,n);return t.Util.transformPoint(r,this.graph.matrix())},r.prototype.localToClientPoint=function(e,n){var r=jd.create(e,n);return t.Util.transformPoint(r,this.getClientMatrix())},r.prototype.localToPagePoint=function(t,e){return("number"==typeof t?this.localToGraphPoint(t,e):this.localToGraphPoint(t)).translate(this.getPageOffset())},r.prototype.localToGraphRect=function(e,n,r,i){var o=Vd.create(e,n,r,i);return t.Util.transformRectangle(o,this.graph.matrix())},r.prototype.localToClientRect=function(e,n,r,i){var o=Vd.create(e,n,r,i);return t.Util.transformRectangle(o,this.getClientMatrix())},r.prototype.localToPageRect=function(t,e,n,r){return("number"==typeof t?this.localToGraphRect(t,e,n,r):this.localToGraphRect(t)).translate(this.getPageOffset())},r.prototype.graphToLocalPoint=function(e,n){var r=jd.create(e,n);return t.Util.transformPoint(r,this.graph.matrix().inverse())},r.prototype.clientToLocalPoint=function(e,n){var r=jd.create(e,n);return t.Util.transformPoint(r,this.getClientMatrix().inverse())},r.prototype.clientToGraphPoint=function(e,n){var r=jd.create(e,n);return t.Util.transformPoint(r,this.graph.matrix().multiply(this.getClientMatrix().inverse()))},r.prototype.pageToLocalPoint=function(t,e){var n=jd.create(t,e).diff(this.getPageOffset());return this.graphToLocalPoint(n)},r.prototype.graphToLocalRect=function(e,n,r,i){var o=Vd.create(e,n,r,i);return t.Util.transformRectangle(o,this.graph.matrix().inverse())},r.prototype.clientToLocalRect=function(e,n,r,i){var o=Vd.create(e,n,r,i);return t.Util.transformRectangle(o,this.getClientMatrix().inverse())},r.prototype.clientToGraphRect=function(e,n,r,i){var o=Vd.create(e,n,r,i);return t.Util.transformRectangle(o,this.graph.matrix().multiply(this.getClientMatrix().inverse()))},r.prototype.pageToLocalRect=function(t,e,n,r){var i=Vd.create(t,e,n,r),o=this.getPageOffset();return i.x-=o.x,i.y-=o.y,this.graphToLocalRect(i)},r}(mb),Lb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.highlights={},e}return n(e,t),e.prototype.init=function(){this.startListening()},e.prototype.startListening=function(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)},e.prototype.stopListening=function(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)},e.prototype.onCellHighlight=function(t){var e=t.view,n=t.magnet,i=t.options,o=void 0===i?{}:i,s=this.resolveHighlighter(o);if(s){var a=this.getHighlighterId(n,s);if(!this.highlights[a]){var l=s.highlighter;l.highlight(e,n,r({},s.args)),this.highlights[a]={cellView:e,magnet:n,highlighter:l,args:s.args}}}},e.prototype.onCellUnhighlight=function(t){var e=t.magnet,n=t.options,r=void 0===n?{}:n,i=this.resolveHighlighter(r);if(i){var o=this.getHighlighterId(e,i);this.unhighlight(o)}},e.prototype.resolveHighlighter=function(t){var e=this.options,n=t.highlighter;if(null==n){var r=t.type;n=r&&e.highlighting[r]||e.highlighting.default}if(null==n)return null;var i="string"==typeof n?{name:n}:n,o=i.name,s=Wy.registry.get(o);return null==s?Wy.registry.onNotFound(o):(Wy.check(o,s),{name:o,highlighter:s,args:i.args||{}})},e.prototype.getHighlighterId=function(t,e){return mp(t),e.name+t.id+JSON.stringify(e.args)},e.prototype.unhighlight=function(t){var e=this.highlights[t];e&&(e.highlighter.unhighlight(e.cellView,e.magnet,e.args),delete this.highlights[t])},e.prototype.dispose=function(){var t=this;Object.keys(this.highlights).forEach((function(e){return t.unhighlight(e)})),this.stopListening()},o([e.dispose()],e.prototype,"dispose",null),e}(mb),Bb=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.getScroller=function(){var t=this.graph.getPlugin("scroller");return t&&t.options.enabled?t:null},r.prototype.getContainer=function(){var t=this.getScroller();return t?t.container.parentElement:this.graph.container.parentElement},r.prototype.getSensorTarget=function(){var t=this.options.autoResize;if(t)return"boolean"==typeof t?this.getContainer():t},r.prototype.init=function(){var e=this;if(this.options.autoResize){var n=this.getSensorTarget();n&&t.SizeSensor.bind(n,(function(){var t=n.offsetWidth,r=n.offsetHeight;e.resize(t,r)}))}},r.prototype.resize=function(t,e){var n=this.getScroller();n?n.resize(t,e):this.graph.transform.resize(t,e)},r.prototype.dispose=function(){t.SizeSensor.clear(this.graph.container)},o([mb.dispose()],r.prototype,"dispose",null),r}(mb);t.Graph=function(e){function i(n){var r=e.call(this)||this;return r.installedPlugins=new Set,r.options=vb.get(n),r.css=new bb(r),r.view=new t.GraphView(r),r.defs=new Nb(r),r.coord=new _b(r),r.transform=new Pb(r),r.highlight=new Lb(r),r.grid=new xb(r),r.background=new Ab(r),r.options.model?r.model=r.options.model:(r.model=new t.Model,r.model.graph=r),r.renderer=new Ob(r),r.panning=new Cb(r),r.mousewheel=new Eb(r),r.virtualRender=new Mb(r),r.size=new Bb(r),r}return n(i,e),Object.defineProperty(i.prototype,"container",{get:function(){return this.options.container},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,Symbol.toStringTag,{get:function(){return i.toStringTag},enumerable:!1,configurable:!0}),i.prototype.isNode=function(t){return t.isNode()},i.prototype.isEdge=function(t){return t.isEdge()},i.prototype.resetCells=function(t,e){return void 0===e&&(e={}),this.model.resetCells(t,e),this},i.prototype.clearCells=function(t){return void 0===t&&(t={}),this.model.clear(t),this},i.prototype.toJSON=function(t){return void 0===t&&(t={}),this.model.toJSON(t)},i.prototype.parseJSON=function(t){return this.model.parseJSON(t)},i.prototype.fromJSON=function(t,e){return void 0===e&&(e={}),this.model.fromJSON(t,e),this},i.prototype.getCellById=function(t){return this.model.getCell(t)},i.prototype.addNode=function(t,e){return void 0===e&&(e={}),this.model.addNode(t,e)},i.prototype.addNodes=function(e,n){var r=this;return void 0===n&&(n={}),this.addCell(e.map((function(e){return t.Node.isNode(e)?e:r.createNode(e)})),n)},i.prototype.createNode=function(t){return this.model.createNode(t)},i.prototype.removeNode=function(t,e){return void 0===e&&(e={}),this.model.removeCell(t,e)},i.prototype.addEdge=function(t,e){return void 0===e&&(e={}),this.model.addEdge(t,e)},i.prototype.addEdges=function(e,n){var r=this;return void 0===n&&(n={}),this.addCell(e.map((function(e){return t.Edge.isEdge(e)?e:r.createEdge(e)})),n)},i.prototype.removeEdge=function(t,e){return void 0===e&&(e={}),this.model.removeCell(t,e)},i.prototype.createEdge=function(t){return this.model.createEdge(t)},i.prototype.addCell=function(t,e){return void 0===e&&(e={}),this.model.addCell(t,e),this},i.prototype.removeCell=function(t,e){return void 0===e&&(e={}),this.model.removeCell(t,e)},i.prototype.removeCells=function(t,e){return void 0===e&&(e={}),this.model.removeCells(t,e)},i.prototype.removeConnectedEdges=function(t,e){return void 0===e&&(e={}),this.model.removeConnectedEdges(t,e)},i.prototype.disconnectConnectedEdges=function(t,e){return void 0===e&&(e={}),this.model.disconnectConnectedEdges(t,e),this},i.prototype.hasCell=function(t){return this.model.has(t)},i.prototype.getCells=function(){return this.model.getCells()},i.prototype.getCellCount=function(){return this.model.total()},i.prototype.getNodes=function(){return this.model.getNodes()},i.prototype.getEdges=function(){return this.model.getEdges()},i.prototype.getOutgoingEdges=function(t){return this.model.getOutgoingEdges(t)},i.prototype.getIncomingEdges=function(t){return this.model.getIncomingEdges(t)},i.prototype.getConnectedEdges=function(t,e){return void 0===e&&(e={}),this.model.getConnectedEdges(t,e)},i.prototype.getRootNodes=function(){return this.model.getRoots()},i.prototype.getLeafNodes=function(){return this.model.getLeafs()},i.prototype.isRootNode=function(t){return this.model.isRoot(t)},i.prototype.isLeafNode=function(t){return this.model.isLeaf(t)},i.prototype.getNeighbors=function(t,e){return void 0===e&&(e={}),this.model.getNeighbors(t,e)},i.prototype.isNeighbor=function(t,e,n){return void 0===n&&(n={}),this.model.isNeighbor(t,e,n)},i.prototype.getSuccessors=function(t,e){return void 0===e&&(e={}),this.model.getSuccessors(t,e)},i.prototype.isSuccessor=function(t,e,n){return void 0===n&&(n={}),this.model.isSuccessor(t,e,n)},i.prototype.getPredecessors=function(t,e){return void 0===e&&(e={}),this.model.getPredecessors(t,e)},i.prototype.isPredecessor=function(t,e,n){return void 0===n&&(n={}),this.model.isPredecessor(t,e,n)},i.prototype.getCommonAncestor=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.model).getCommonAncestor.apply(t,e)},i.prototype.getSubGraph=function(t,e){return void 0===e&&(e={}),this.model.getSubGraph(t,e)},i.prototype.cloneSubGraph=function(t,e){return void 0===e&&(e={}),this.model.cloneSubGraph(t,e)},i.prototype.cloneCells=function(t){return this.model.cloneCells(t)},i.prototype.getNodesFromPoint=function(t,e){return this.model.getNodesFromPoint(t,e)},i.prototype.getNodesInArea=function(t,e,n,r,i){return this.model.getNodesInArea(t,e,n,r,i)},i.prototype.getNodesUnderNode=function(t,e){return void 0===e&&(e={}),this.model.getNodesUnderNode(t,e)},i.prototype.searchCell=function(t,e,n){return void 0===n&&(n={}),this.model.search(t,e,n),this},i.prototype.getShortestPath=function(t,e,n){return void 0===n&&(n={}),this.model.getShortestPath(t,e,n)},i.prototype.getAllCellsBBox=function(){return this.model.getAllCellsBBox()},i.prototype.getCellsBBox=function(t,e){return void 0===e&&(e={}),this.model.getCellsBBox(t,e)},i.prototype.startBatch=function(t,e){void 0===e&&(e={}),this.model.startBatch(t,e)},i.prototype.stopBatch=function(t,e){void 0===e&&(e={}),this.model.stopBatch(t,e)},i.prototype.batchUpdate=function(t,e,n){var r="string"==typeof t?t:"update",i="string"==typeof t?e:t,o="function"==typeof e?n:e;this.startBatch(r,o);var s=i();return this.stopBatch(r,o),s},i.prototype.updateCellId=function(t,e){return this.model.updateCellId(t,e)},i.prototype.findView=function(e){return t.Cell.isCell(e)?this.findViewByCell(e):this.findViewByElem(e)},i.prototype.findViews=function(t){return Vd.isRectangleLike(t)?this.findViewsInArea(t):jd.isPointLike(t)?this.findViewsFromPoint(t):[]},i.prototype.findViewByCell=function(t){return this.renderer.findViewByCell(t)},i.prototype.findViewByElem=function(t){return this.renderer.findViewByElem(t)},i.prototype.findViewsFromPoint=function(t,e){var n="number"==typeof t?{x:t,y:e}:t;return this.renderer.findViewsFromPoint(n)},i.prototype.findViewsInArea=function(t,e,n,r,i){var o="number"==typeof t?{x:t,y:e,width:n,height:r}:t,s="number"==typeof t?i:e;return this.renderer.findViewsInArea(o,s)},i.prototype.matrix=function(t){return void 0===t?this.transform.getMatrix():(this.transform.setMatrix(t),this)},i.prototype.resize=function(t,e){var n=this.getPlugin("scroller");return n?n.resize(t,e):this.transform.resize(t,e),this},i.prototype.scale=function(t,e,n,r){return void 0===e&&(e=t),void 0===n&&(n=0),void 0===r&&(r=0),void 0===t?this.transform.getScale():(this.transform.scale(t,e,n,r),this)},i.prototype.zoom=function(t,e){var n=this.getPlugin("scroller");if(n){if(void 0===t)return n.zoom();n.zoom(t,e)}else{if(void 0===t)return this.transform.getZoom();this.transform.zoom(t,e)}return this},i.prototype.zoomTo=function(t,e){void 0===e&&(e={});var n=this.getPlugin("scroller");return n?n.zoom(t,r(r({},e),{absolute:!0})):this.transform.zoom(t,r(r({},e),{absolute:!0})),this},i.prototype.zoomToRect=function(t,e){void 0===e&&(e={});var n=this.getPlugin("scroller");return n?n.zoomToRect(t,e):this.transform.zoomToRect(t,e),this},i.prototype.zoomToFit=function(t){void 0===t&&(t={});var e=this.getPlugin("scroller");return e?e.zoomToFit(t):this.transform.zoomToFit(t),this},i.prototype.rotate=function(t,e,n){return void 0===t?this.transform.getRotation():(this.transform.rotate(t,e,n),this)},i.prototype.translate=function(t,e){return void 0===t?this.transform.getTranslation():(this.transform.translate(t,e),this)},i.prototype.translateBy=function(t,e){var n=this.translate(),r=n.tx+t,i=n.ty+e;return this.translate(r,i)},i.prototype.getGraphArea=function(){return this.transform.getGraphArea()},i.prototype.getContentArea=function(t){return void 0===t&&(t={}),this.transform.getContentArea(t)},i.prototype.getContentBBox=function(t){return void 0===t&&(t={}),this.transform.getContentBBox(t)},i.prototype.fitToContent=function(t,e,n,r){return this.transform.fitToContent(t,e,n,r)},i.prototype.scaleContentToFit=function(t){return void 0===t&&(t={}),this.transform.scaleContentToFit(t),this},i.prototype.center=function(){return this.centerPoint()},i.prototype.centerPoint=function(t,e){var n=this.getPlugin("scroller");return n?n.centerPoint(t,e):this.transform.centerPoint(t,e),this},i.prototype.centerContent=function(t){var e=this.getPlugin("scroller");return e?e.centerContent(t):this.transform.centerContent(t),this},i.prototype.centerCell=function(t){var e=this.getPlugin("scroller");return e?e.centerCell(t):this.transform.centerCell(t),this},i.prototype.positionPoint=function(t,e,n){var r=this.getPlugin("scroller");return r?r.positionPoint(t,e,n):this.transform.positionPoint(t,e,n),this},i.prototype.positionRect=function(t,e,n){var r=this.getPlugin("scroller");return r?r.positionRect(t,e,n):this.transform.positionRect(t,e),this},i.prototype.positionCell=function(t,e,n){var r=this.getPlugin("scroller");return r?r.positionCell(t,e,n):this.transform.positionCell(t,e),this},i.prototype.positionContent=function(t,e){var n=this.getPlugin("scroller");return n?n.positionContent(t,e):this.transform.positionContent(t,e),this},i.prototype.snapToGrid=function(t,e){return this.coord.snapToGrid(t,e)},i.prototype.pageToLocal=function(t,e,n,r){return Vd.isRectangleLike(t)?this.coord.pageToLocalRect(t):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof r?this.coord.pageToLocalRect(t,e,n,r):this.coord.pageToLocalPoint(t,e)},i.prototype.localToPage=function(t,e,n,r){return Vd.isRectangleLike(t)?this.coord.localToPageRect(t):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof r?this.coord.localToPageRect(t,e,n,r):this.coord.localToPagePoint(t,e)},i.prototype.clientToLocal=function(t,e,n,r){return Vd.isRectangleLike(t)?this.coord.clientToLocalRect(t):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof r?this.coord.clientToLocalRect(t,e,n,r):this.coord.clientToLocalPoint(t,e)},i.prototype.localToClient=function(t,e,n,r){return Vd.isRectangleLike(t)?this.coord.localToClientRect(t):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof r?this.coord.localToClientRect(t,e,n,r):this.coord.localToClientPoint(t,e)},i.prototype.localToGraph=function(t,e,n,r){return Vd.isRectangleLike(t)?this.coord.localToGraphRect(t):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof r?this.coord.localToGraphRect(t,e,n,r):this.coord.localToGraphPoint(t,e)},i.prototype.graphToLocal=function(t,e,n,r){return Vd.isRectangleLike(t)?this.coord.graphToLocalRect(t):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof r?this.coord.graphToLocalRect(t,e,n,r):this.coord.graphToLocalPoint(t,e)},i.prototype.clientToGraph=function(t,e,n,r){return Vd.isRectangleLike(t)?this.coord.clientToGraphRect(t):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof r?this.coord.clientToGraphRect(t,e,n,r):this.coord.clientToGraphPoint(t,e)},i.prototype.defineFilter=function(t){return this.defs.filter(t)},i.prototype.defineGradient=function(t){return this.defs.gradient(t)},i.prototype.defineMarker=function(t){return this.defs.marker(t)},i.prototype.getGridSize=function(){return this.grid.getGridSize()},i.prototype.setGridSize=function(t){return this.grid.setGridSize(t),this},i.prototype.showGrid=function(){return this.grid.show(),this},i.prototype.hideGrid=function(){return this.grid.hide(),this},i.prototype.clearGrid=function(){return this.grid.clear(),this},i.prototype.drawGrid=function(t){return this.grid.draw(t),this},i.prototype.updateBackground=function(){return this.background.update(),this},i.prototype.drawBackground=function(t,e){var n=this.getPlugin("scroller");return null==n||null!=this.options.background&&e?this.background.draw(t):n.drawBackground(t,e),this},i.prototype.clearBackground=function(t){var e=this.getPlugin("scroller");return null==e||null!=this.options.background&&t?this.background.clear():e.clearBackground(t),this},i.prototype.enableVirtualRender=function(){return this.virtualRender.enableVirtualRender(),this},i.prototype.disableVirtualRender=function(){return this.virtualRender.disableVirtualRender(),this},i.prototype.isMouseWheelEnabled=function(){return!this.mousewheel.disabled},i.prototype.enableMouseWheel=function(){return this.mousewheel.enable(),this},i.prototype.disableMouseWheel=function(){return this.mousewheel.disable(),this},i.prototype.toggleMouseWheel=function(t){return null==t?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():t?this.enableMouseWheel():this.disableMouseWheel(),this},i.prototype.isPannable=function(){var t=this.getPlugin("scroller");return t?t.isPannable():this.panning.pannable},i.prototype.enablePanning=function(){var t=this.getPlugin("scroller");return t?t.enablePanning():this.panning.enablePanning(),this},i.prototype.disablePanning=function(){var t=this.getPlugin("scroller");return t?t.disablePanning():this.panning.disablePanning(),this},i.prototype.togglePanning=function(t){return null==t?this.isPannable()?this.disablePanning():this.enablePanning():t!==this.isPannable()&&(t?this.enablePanning():this.disablePanning()),this},i.prototype.use=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.installedPlugins.has(t)||(this.installedPlugins.add(t),t.init.apply(t,s([this],e,!1))),this},i.prototype.getPlugin=function(t){return Array.from(this.installedPlugins).find((function(e){return e.name===t}))},i.prototype.getPlugins=function(t){return Array.from(this.installedPlugins).filter((function(e){return t.includes(e.name)}))},i.prototype.disablePlugins=function(t){var e=t;Array.isArray(e)||(e=[e]);var n=this.getPlugins(e);return null==n||n.forEach((function(t){var e;null===(e=null==t?void 0:t.disable)||void 0===e||e.call(t)})),this},i.prototype.enablePlugins=function(t){var e=t;Array.isArray(e)||(e=[e]);var n=this.getPlugins(e);return null==n||n.forEach((function(t){var e;null===(e=null==t?void 0:t.enable)||void 0===e||e.call(t)})),this},i.prototype.disposePlugins=function(t){var e=t;Array.isArray(e)||(e=[e]);var n=this.getPlugins(e);return null==n||n.forEach((function(t){t.dispose()})),this},i.prototype.isPluginEnabled=function(t){var e,n=this.getPlugin(t);return null===(e=null==n?void 0:n.isEnabled)||void 0===e?void 0:e.call(n)},i.prototype.dispose=function(){this.clearCells(),this.off(),this.css.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.highlight.dispose(),this.background.dispose(),this.mousewheel.dispose(),this.panning.dispose(),this.view.dispose(),this.renderer.dispose(),this.installedPlugins.forEach((function(t){t.dispose()}))},o([Mh.dispose()],i.prototype,"dispose",null),i}(Mh),(kb=t.Graph||(t.Graph={})).View=t.GraphView,kb.Renderer=Ob,kb.MouseWheel=Eb,kb.DefsManager=Nb,kb.GridManager=xb,kb.CoordManager=_b,kb.TransformManager=Pb,kb.HighlightManager=Lb,kb.BackgroundManager=Ab,function(t){t.toStringTag="X6.".concat(t.name),t.isGraph=function(e){if(null==e)return!1;if(e instanceof t)return!0;var n=e[Symbol.toStringTag];return null==n||n===t.toStringTag}}(t.Graph||(t.Graph={})),function(t){t.render=function(e,n){var r=e instanceof HTMLElement?new t({container:e}):new t(e);return null!=n&&r.fromJSON(n),r}}(t.Graph||(t.Graph={})),function(e){e.registerNode=t.Node.registry.register,e.registerEdge=t.Edge.registry.register,e.registerView=t.CellView.registry.register,e.registerAttr=Iy.registry.register,e.registerGrid=pg.registry.register,e.registerFilter=wg.registry.register,e.registerNodeTool=Ov.registry.register,e.registerEdgeTool=Nv.registry.register,e.registerBackground=fg.registry.register,e.registerHighlighter=Wy.registry.register,e.registerPortLayout=Zy.registry.register,e.registerPortLabelLayout=ov.registry.register,e.registerMarker=my.registry.register,e.registerRouter=Im.registry.register,e.registerConnector=qm.registry.register,e.registerAnchor=$v.registry.register,e.registerEdgeAnchor=Zv.registry.register,e.registerConnectionPoint=om.registry.register}(t.Graph||(t.Graph={})),function(e){e.unregisterNode=t.Node.registry.unregister,e.unregisterEdge=t.Edge.registry.unregister,e.unregisterView=t.CellView.registry.unregister,e.unregisterAttr=Iy.registry.unregister,e.unregisterGrid=pg.registry.unregister,e.unregisterFilter=wg.registry.unregister,e.unregisterNodeTool=Ov.registry.unregister,e.unregisterEdgeTool=Nv.registry.unregister,e.unregisterBackground=fg.registry.unregister,e.unregisterHighlighter=Wy.registry.unregister,e.unregisterPortLayout=Zy.registry.unregister,e.unregisterPortLabelLayout=ov.registry.unregister,e.unregisterMarker=my.registry.unregister,e.unregisterRouter=Im.registry.unregister,e.unregisterConnector=qm.registry.unregister,e.unregisterAnchor=$v.registry.unregister,e.unregisterEdgeAnchor=Zv.registry.unregister,e.unregisterConnectionPoint=om.registry.unregister}(t.Graph||(t.Graph={}));var Ib=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(t.Node);!function(e){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return n(r,t),r.prototype.init=function(){var n=this;t.prototype.init.call(this),this.cell.on("change:*",(function(t){var r=t.key,i=e.shapeMaps[n.cell.shape];if(i){var o=i.effect;o&&!o.includes(r)||n.renderHTMLComponent()}}))},r.prototype.confirmUpdate=function(e){var n=this,i=t.prototype.confirmUpdate.call(this,e);return this.handleAction(i,r.action,(function(){return n.renderHTMLComponent()}))},r.prototype.renderHTMLComponent=function(){var t=this.selectors&&this.selectors.foContent;if(t){Bp(t);var n=e.shapeMaps[this.cell.shape];if(!n)return;var r=n.html;"function"==typeof r&&(r=r(this.cell)),r&&("string"==typeof r?t.innerHTML=r:Ip(t,r))}},r}(t.NodeView);e.View=r,function(e){e.action="html",e.config({bootstrap:[e.action],actions:{html:e.action}}),t.NodeView.registry.register("html-view",e,!0)}(r=e.View||(e.View={}))}(Ib||(Ib={})),function(e){e.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},r({},t.Markup.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),t.Node.registry.register("html",e,!0)}(Ib||(Ib={})),function(e){e.shapeMaps={},e.register=function(n){var o=n.shape,s=n.html,a=n.effect,l=n.inherit,u=i(n,["shape","html","effect","inherit"]);if(!o)throw new Error("should specify shape in config");e.shapeMaps[o]={html:s,effect:a},t.Graph.registerNode(o,r({inherit:l||"html"},u),!0)}}(Ib||(Ib={}));var jb=Object.freeze({__proto__:null,Rect:nb,Edge:rb,Ellipse:ib,Polygon:hb,Polyline:pb,Path:fb,TextBlock:db,Image:gb,Circle:yb,get HTML(){return Ib}});t.ArrayExt=Sh,t.BackgroundManager=Ab,t.Basecoat=Mh,t.Collection=Km,t.Color=Sd,t.Config=Vy,t.CssLoader=Bd,t.Curve=$d,t.Dictionary=Td,t.Disablable=class extends Mh{get disabled(){return!0===this._disabled}enable(){delete this._disabled}disable(){this._disabled=!0}},t.Disposable=a,t.DisposableDelegate=class{constructor(t){this.callback=t}get disposed(){return!this.callback}dispose(){if(!this.callback)return;const t=this.callback;this.callback=null,t()}},t.DisposableSet=l,t.Dom=xd,t.Ellipse=Rd,t.Events=dh,t.FunctionExt=ph,t.Line=Dd,t.NumberExt=qh,t.ObjectExt=Eh,t.Path=og,t.Point=jd,t.Polyline=Hd,t.PriorityQueue=Cd,t.Rectangle=Vd,t.Registry=$m,t.Segment=Jd,t.Shape=jb,t.StringExt=zh,t.Text=Qp,t.TransformManager=Pb,t.Vector=wf,t.normalizePathData=ig}));
//# sourceMappingURL=index.js.map
